<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>Solutions to Practice Problems </title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="pcalibre1 pcalibre2 pcalibre">
<section id="P7000497027000000000000000007B49" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre2 pcalibre4" id="P700049702700000000000000004665D" data-uri="chapter10.xhtml#P700049702700000000000000004665D" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">Solutions to Practice Problems </span></h1></header>
<section id="P7000497027000000000000000007B4B" data-uri="chapter10.xhtml#P7000497027000000000000000007B4B" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P700049702700000000000000004665E" data-uri="chapter10.xhtml#P700049702700000000000000004665E" epub:type="title"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP70004970270000000000000000078E1.xhtml#P7000497027000000000000000007931"><span class="pcalibre1 pcalibre21 pcalibre2">Solution to Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">10.1 </span></a>(page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP70004970270000000000000000078E1.xhtml#P7000497027000000000000000007930">895</a>)</h1></header>
<p id="P700049702700000000000000004665F" data-uri="chapter10.xhtml#P700049702700000000000000004665F" class="pcalibre8 pcalibre1 pcalibre2">Unix processes begin life with open descriptors assigned to <code id="P7000497027000000000000000046660" data-uri="chapter10.xhtml#P7000497027000000000000000046660" class="pcalibre1 calibre1 pcalibre2">stdin</code> (descriptor 0), <code id="P7000497027000000000000000046661" data-uri="chapter10.xhtml#P7000497027000000000000000046661" class="pcalibre1 calibre1 pcalibre2">stdout</code> (descriptor 1), and <code id="P7000497027000000000000000046662" data-uri="chapter10.xhtml#P7000497027000000000000000046662" class="pcalibre1 calibre1 pcalibre2">stderr</code> (descriptor 2). The open function always returns the lowest unopened descriptor, so the first call to open returns descriptor 3. The call to the close function frees up descriptor 3. The final call to open returns descriptor 3, and thus the output of the program is <code id="P7000497027000000000000000046663" data-uri="chapter10.xhtml#P7000497027000000000000000046663" class="pcalibre1 calibre1 pcalibre2">fd2 = 3</code>.</p>
</section>
<section id="P7000497027000000000000000007B52" data-uri="chapter10.xhtml#P7000497027000000000000000007B52" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P7000497027000000000000000046664" data-uri="chapter10.xhtml#P7000497027000000000000000046664" epub:type="title"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP7000497027000000000000000007A61.xhtml#P7000497027000000000000000007A89"><span class="pcalibre1 pcalibre21 pcalibre2">Solution to Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">10.2 </span></a>(page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000007A61.xhtml#P7000497027000000000000000007A83">908</a>)</h1></header>
<p id="P7000497027000000000000000046665" data-uri="chapter10.xhtml#P7000497027000000000000000046665" class="pcalibre8 pcalibre1 pcalibre2">The descriptors <code id="P7000497027000000000000000046666" data-uri="chapter10.xhtml#P7000497027000000000000000046666" class="pcalibre1 calibre1 pcalibre2">fd1</code> and <code id="P7000497027000000000000000046667" data-uri="chapter10.xhtml#P7000497027000000000000000046667" class="pcalibre1 calibre1 pcalibre2">fd2</code> each have their own open file table entry, so each descriptor has its own file position for <code id="P7000497027000000000000000046668" data-uri="chapter10.xhtml#P7000497027000000000000000046668" class="pcalibre1 calibre1 pcalibre2">foobar.txt</code>. Thus, the read from <code id="P7000497027000000000000000046669" data-uri="chapter10.xhtml#P7000497027000000000000000046669" class="pcalibre1 calibre1 pcalibre2">fd2</code> reads the first byte of <code id="P700049702700000000000000004666A" data-uri="chapter10.xhtml#P700049702700000000000000004666A" class="pcalibre1 calibre1 pcalibre2">foobar.txt</code>, and the output is</p>
<pre id="P700049702700000000000000004666B" data-uri="chapter10.xhtml#P700049702700000000000000004666B" class="calibre2 pcalibre2 pcalibre1"><code id="P700049702700000000000000004666C" data-uri="chapter10.xhtml#P700049702700000000000000004666C" class="calibre3 pcalibre1 pcalibre2">
c = f
</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P700049702700000000000000004666D" data-uri="chapter10.xhtml#P700049702700000000000000004666D">and not</p>
<pre id="P700049702700000000000000004666E" data-uri="chapter10.xhtml#P700049702700000000000000004666E" class="calibre2 pcalibre2 pcalibre1"><code id="P700049702700000000000000004666F" data-uri="chapter10.xhtml#P700049702700000000000000004666F" class="calibre3 pcalibre1 pcalibre2">
c = o
</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P7000497027000000000000000046670" data-uri="chapter10.xhtml#P7000497027000000000000000046670">as you might have thought initially.</p>
</section>
<section id="P7000497027000000000000000007B60" data-uri="chapter10.xhtml#P7000497027000000000000000007B60" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P7000497027000000000000000046671" data-uri="chapter10.xhtml#P7000497027000000000000000046671" epub:type="title"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP7000497027000000000000000007A61.xhtml#P7000497027000000000000000007A93"><span class="pcalibre1 pcalibre21 pcalibre2">Solution to Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">10.3 </span></a>(page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000007A61.xhtml#P7000497027000000000000000007A83">908</a>)</h1></header>
<p id="P7000497027000000000000000046672" data-uri="chapter10.xhtml#P7000497027000000000000000046672" class="pcalibre8 pcalibre1 pcalibre2">Recall that the child inherits the parent's descriptor table and that all processes shared the same open file table. Thus, the descriptor <code id="P7000497027000000000000000046673" data-uri="chapter10.xhtml#P7000497027000000000000000046673" class="pcalibre1 calibre1 pcalibre2">fd</code> in both the parent and child points to the same open file table entry. When the child reads the first byte of the file, the file position increases by 1. Thus, the parent reads the second byte, and the output is</p>
<pre id="P7000497027000000000000000046674" data-uri="chapter10.xhtml#P7000497027000000000000000046674" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046675" data-uri="chapter10.xhtml#P7000497027000000000000000046675" class="calibre3 pcalibre1 pcalibre2">c = o</code></pre>
</section>
<section id="P7000497027000000000000000007B66" data-uri="chapter10.xhtml#P7000497027000000000000000007B66" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P7000497027000000000000000046676" data-uri="chapter10.xhtml#P7000497027000000000000000046676" epub:type="title"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP7000497027000000000000000007A9B.xhtml#P7000497027000000000000000007AB2"><span class="pcalibre1 pcalibre21 pcalibre2">Solution to Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">10.4 </span></a>(page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000007A61.xhtml#P7000497027000000000000000007A9A">909</a>)</h1></header>
<p id="P7000497027000000000000000046677" data-uri="chapter10.xhtml#P7000497027000000000000000046677" class="pcalibre8 pcalibre1 pcalibre2">To redirect standard input (descriptor 0) to descriptor 5, we would call <code id="P7000497027000000000000000046678" data-uri="chapter10.xhtml#P7000497027000000000000000046678" class="pcalibre1 calibre1 pcalibre2">dup2(5,0)</code>, or equivalently, <code id="P7000497027000000000000000046679" data-uri="chapter10.xhtml#P7000497027000000000000000046679" class="pcalibre1 calibre1 pcalibre2">dup2(5,STDIN_FILENO)</code>.</p>
</section>
<section id="P7000497027000000000000000007B6B" data-uri="chapter10.xhtml#P7000497027000000000000000007B6B" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P700049702700000000000000004667A" data-uri="chapter10.xhtml#P700049702700000000000000004667A" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007B6D" title="916" data-uri="chapter10.xhtml#P7000497027000000000000000007B6D" epub:type="pagebreak"></span><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP7000497027000000000000000007A9B.xhtml#P7000497027000000000000000007AC4"><span class="pcalibre1 pcalibre21 pcalibre2">Solution to Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">10.5 </span></a>(page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000007A9B.xhtml#P7000497027000000000000000007ABB">910</a>)</h1></header>
<p id="P700049702700000000000000004667B" data-uri="chapter10.xhtml#P700049702700000000000000004667B" class="pcalibre8 pcalibre1 pcalibre2">At first glance, you might think the output would be</p>
<pre id="P700049702700000000000000004667C" data-uri="chapter10.xhtml#P700049702700000000000000004667C" class="calibre2 pcalibre2 pcalibre1"><code id="P700049702700000000000000004667D" data-uri="chapter10.xhtml#P700049702700000000000000004667D" class="calibre3 pcalibre1 pcalibre2">c = f</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P700049702700000000000000004667E" data-uri="chapter10.xhtml#P700049702700000000000000004667E">but because we are redirecting <code id="P700049702700000000000000004667F" data-uri="chapter10.xhtml#P700049702700000000000000004667F" class="pcalibre1 calibre1 pcalibre2">fd1</code> to <code id="P7000497027000000000000000046680" data-uri="chapter10.xhtml#P7000497027000000000000000046680" class="pcalibre1 calibre1 pcalibre2">fd2</code>, the output is really</p>
<pre id="P7000497027000000000000000046681" data-uri="chapter10.xhtml#P7000497027000000000000000046681" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046682" data-uri="chapter10.xhtml#P7000497027000000000000000046682" class="calibre3 pcalibre1 pcalibre2">c = o</code></pre>
</section>
</section></body></html>
