<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>11.3 The Global IP Internet</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="pcalibre1 pcalibre2 pcalibre">
<section id="P7000497027000000000000000007BFE" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre2 pcalibre4" id="P700049702700000000000000004671C" data-uri="chapter11.xhtml#P700049702700000000000000004671C" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">11.3 </span>The Global IP Internet</h1></header>
<p id="P700049702700000000000000004671D" data-uri="chapter11.xhtml#P700049702700000000000000004671D" class="pcalibre8 pcalibre1 pcalibre2">The global IP Internet is the most famous and successful implementation of an internet. It has existed in one form or another since 1969. While the internal architecture of the Internet is complex and constantly changing, the organization of client-server applications has remained remarkably stable since the early 1980s. <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP7000497027000000000000000007BB0.xhtml#P7000497027000000000000000007BF9"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">11.8</span></a> shows the basic hardware and software organization of an Internet client-server application.</p>
<p id="P700049702700000000000000004671E" data-uri="chapter11.xhtml#P700049702700000000000000004671E" class="pcalibre8 pcalibre1 pcalibre2">Each Internet host runs software that implements the <i class="pcalibre17 pcalibre2 pcalibre1">TCP/IP</i> protocol (<i class="pcalibre17 pcalibre2 pcalibre1">Transmission Control Protocol/Internet Protocol</i>), which is supported by almost every modern computer system. Internet clients and servers communicate using a mix of <i class="pcalibre17 pcalibre2 pcalibre1">sockets interface</i> functions and Unix I/O functions. (We will describe the sockets interface in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="fileP7000497027000000000000000007CC1.xhtml#P7000497027000000000000000007CC1"><span class="pcalibre1 pcalibre21 pcalibre2">Section </span><span class="pcalibre1 pcalibre21 pcalibre2">11.4</span></a>) The sockets functions are typically implemented as system calls that trap into the kernel and call various kernel-mode functions in TCP/IP.</p>
<p id="P700049702700000000000000004671F" data-uri="chapter11.xhtml#P700049702700000000000000004671F" class="pcalibre8 pcalibre1 pcalibre2">TCP/IP is actually a family of protocols, each of which contributes different capabilities. For example, IP provides the basic naming scheme and a delivery mechanism that can send packets, known as <i class="pcalibre17 pcalibre2 pcalibre1">datagrams</i>, from one Internet host to any other host. The IP mechanism is unreliable in the sense that it makes no effort to recover if datagrams are lost or duplicated in the network. UDP (Unreliable Datagram Protocol) extends IP slightly, so that datagrams can be transferred from process to process, rather than host to host. TCP is a complex protocol that builds on IP to provide reliable full duplex (bidirectional) <i class="pcalibre17 pcalibre2 pcalibre1">connections</i> between processes. To simplify our discussion, we will treat TCP/IP as a single monolithic protocol. We will not discuss its inner workings, and we will only discuss some of the basic capabilities that TCP and IP provide to application programs. We will not discuss UDP.</p>
<p id="P7000497027000000000000000046720" data-uri="chapter11.xhtml#P7000497027000000000000000046720" class="pcalibre8 pcalibre1 pcalibre2">From a programmer's perspective, we can think of the Internet as a worldwide collection of hosts with the following properties:</p>
<ul id="P7000497027000000000000000046721" data-uri="chapter11.xhtml#P7000497027000000000000000046721" class="pcalibre1 calibre9 pcalibre2">
<li id="P7000497027000000000000000046722" data-uri="chapter11.xhtml#P7000497027000000000000000046722" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000046723" data-uri="chapter11.xhtml#P7000497027000000000000000046723" class="pcalibre1 pcalibre2 pcalibre10">The set of hosts is mapped to a set of 32-bit <i class="pcalibre17 pcalibre2 pcalibre1">IP addresses.</i></p>
<aside class="pcalibre31 pcalibre32 pcalibre2" id="P7000497027000000000000000007C07" data-uri="chapter11.xhtml#P7000497027000000000000000007C07"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre33" id="P7000497027000000000000000046724" data-uri="chapter11.xhtml#P7000497027000000000000000046724" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007C09" title="925" data-uri="chapter11.xhtml#P7000497027000000000000000007C09" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre2 pcalibre34">Aside </span>IPv4 and IPv6</h1></header>
<p id="P7000497027000000000000000046725" data-uri="chapter11.xhtml#P7000497027000000000000000046725" class="pcalibre1 pcalibre2 pcalibre10">The original Internet protocol, with its 32-bit addresses, is known as Internet Protocol Version 4 (IPv4). In 1996, the Internet Engineering Task Force (IETF) proposed a new version of IP, called Internet Protocol Version 6 (IPv6), that uses 128-bit addresses and that was intended as the successor to IPv4. However, as of 2015, almost 20 years later, the vast majority of Internet traffic is still carried by IPv4 networks. For example, only 4 percent of users access Google services using IPv6 <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" href="fileP700049702700000000000000000B39D.xhtml#P700049702700000000000000000B3F6">[42]</a>.</p>
<p id="P7000497027000000000000000046726" data-uri="chapter11.xhtml#P7000497027000000000000000046726" class="pcalibre1 pcalibre2 pcalibre63">Because of its low adoption rate, we will not discuss IPv6 in any detail in this book and will focus exclusively on the concepts behind IPv4. When we talk about the Internet, what we mean is the Internet based on IPv4. Nonetheless, the techniques for writing clients and servers that we will teach you later in this chapter are based on modern interfaces that are independent of any particular protocol.</p>
</aside></li>
<li id="P7000497027000000000000000046727" data-uri="chapter11.xhtml#P7000497027000000000000000046727" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000046728" data-uri="chapter11.xhtml#P7000497027000000000000000046728" class="pcalibre1 pcalibre2 pcalibre10">The set of IP addresses is mapped to a set of identifiers called <i class="pcalibre17 pcalibre2 pcalibre1">Internet domain names.</i></p></li>
<li id="P7000497027000000000000000046729" data-uri="chapter11.xhtml#P7000497027000000000000000046729" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004672A" data-uri="chapter11.xhtml#P700049702700000000000000004672A" class="pcalibre1 pcalibre2 pcalibre10">A process on one Internet host can communicate with a process on any other Internet host over a <i class="pcalibre17 pcalibre2 pcalibre1">connection</i>.</p></li>
</ul>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P700049702700000000000000004672B" data-uri="chapter11.xhtml#P700049702700000000000000004672B">The following sections discuss these fundamental Internet ideas in more detail.</p>
<section id="P7000497027000000000000000007C11" data-uri="chapter11.xhtml#P7000497027000000000000000007C11" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P700049702700000000000000004672C" data-uri="chapter11.xhtml#P700049702700000000000000004672C" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">11.3.1 </span>IP Addresses</h1></header>
<p id="P700049702700000000000000004672D" data-uri="chapter11.xhtml#P700049702700000000000000004672D" class="pcalibre8 pcalibre1 pcalibre2">An IP address is an unsigned 32-bit integer. Network programs store IP addresses in the <i class="pcalibre17 pcalibre2 pcalibre1">IP address structure</i> shown in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007C16"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">11.9</span></a>.</p>
<p id="P700049702700000000000000004672E" data-uri="chapter11.xhtml#P700049702700000000000000004672E" class="pcalibre8 pcalibre1 pcalibre2">Storing a scalar address in a structure is an unfortunate artifact from the early implementations of the sockets interface. It would make more sense to define a scalar type for IP addresses, but it is too late to change now because of the enormous installed base of applications.</p>
<p id="P700049702700000000000000004672F" data-uri="chapter11.xhtml#P700049702700000000000000004672F" class="pcalibre8 pcalibre1 pcalibre2">Because Internet hosts can have different host byte orders, TCP/IP defines a uniform <i class="pcalibre17 pcalibre2 pcalibre1">network byte order</i> (big-endian byte order) for any integer data item, such as an IP address, that is carried across the network in a packet header. Addresses in IP address structures are always stored in (big-endian) network byte order, even if the host byte order is little-endian. Unix provides the following functions for converting between network and host byte order.</p>
<figure class="pcalibre2 pcalibre32 pcalibre35" id="P7000497027000000000000000007C16" data-uri="chapter11.xhtml#P7000497027000000000000000007C16">
<pre id="P7000497027000000000000000046730" data-uri="chapter11.xhtml#P7000497027000000000000000046730" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046731" data-uri="chapter11.xhtml#P7000497027000000000000000046731" class="calibre3 pcalibre1 pcalibre2">
/* IP address structure */
struct in_addr {
	uint32_t s_addr; /* Address in network byte order (big-endian) */
};
</code></pre>
<figcaption id="P7000497027000000000000000046732" data-uri="chapter11.xhtml#P7000497027000000000000000046732" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000046733" data-uri="chapter11.xhtml#P7000497027000000000000000046733" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">11.9 </span>IP address structure.</h1></header>
</figcaption>
</figure>
<p id="P7000497027000000000000000046734" data-uri="chapter11.xhtml#P7000497027000000000000000046734" class="pcalibre8 pcalibre1 pcalibre2"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007C1C" title="926" data-uri="chapter11.xhtml#P7000497027000000000000000007C1C" epub:type="pagebreak"></span></p>
<pre id="P7000497027000000000000000046735" data-uri="chapter11.xhtml#P7000497027000000000000000046735" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046736" data-uri="chapter11.xhtml#P7000497027000000000000000046736" class="calibre3 pcalibre1 pcalibre2">
#include &lt;arpa/inet.h&gt;
uint32_t htonl(uint32_t hostlong);
uint16_t htons(uint16_t hostshort);
					Returns: value in network byte order
uint32_t ntohl(uint32_t netlong);
uint16_t ntohs(unit16_t netshort);
					Returns: value in host byte order
</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P7000497027000000000000000046737" data-uri="chapter11.xhtml#P7000497027000000000000000046737">The <code id="P7000497027000000000000000046738" data-uri="chapter11.xhtml#P7000497027000000000000000046738" class="pcalibre1 calibre1 pcalibre2">htonl</code> function converts an unsigned 32-bit integer from host byte order to network byte order. The <code id="P7000497027000000000000000046739" data-uri="chapter11.xhtml#P7000497027000000000000000046739" class="pcalibre1 calibre1 pcalibre2">ntohl</code> function converts an unsigned 32-bit integer from network byte order to host byte order. The <code id="P700049702700000000000000004673A" data-uri="chapter11.xhtml#P700049702700000000000000004673A" class="pcalibre1 calibre1 pcalibre2">htons</code> and <code id="P700049702700000000000000004673B" data-uri="chapter11.xhtml#P700049702700000000000000004673B" class="pcalibre1 calibre1 pcalibre2">ntohs</code> functions perform corresponding conversions for unsigned 16-bit integers. Note that there are no equivalent functions for manipulating 64-bit values.</p>
<p id="P700049702700000000000000004673C" data-uri="chapter11.xhtml#P700049702700000000000000004673C" class="pcalibre8 pcalibre1 pcalibre2">IP addresses are typically presented to humans in a form known as <i class="pcalibre17 pcalibre2 pcalibre1">dotted-decimal notation</i>, where each byte is represented by its decimal value and separated from the other bytes by a period. For example, <code id="P700049702700000000000000004673D" data-uri="chapter11.xhtml#P700049702700000000000000004673D" class="pcalibre1 calibre1 pcalibre2">128.2.194.242</code> is the dotted-decimal representation of the address <code id="P700049702700000000000000004673E" data-uri="chapter11.xhtml#P700049702700000000000000004673E" class="pcalibre1 calibre1 pcalibre2">0x8002c2f2</code>. On Linux systems, you can use the <span class="pcalibre1 pcalibre29 pcalibre2">hostname </span>command to determine the dotted-decimal address of your own host:</p>
<pre id="P700049702700000000000000004673F" data-uri="chapter11.xhtml#P700049702700000000000000004673F" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046740" data-uri="chapter11.xhtml#P7000497027000000000000000046740" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">hostname -i</i>
128.2.210.175
</code></pre>
<p id="P7000497027000000000000000046741" data-uri="chapter11.xhtml#P7000497027000000000000000046741" class="pcalibre8 pcalibre1 pcalibre2">Application programs can convert back and forth between IP addresses and dotted-decimal strings using the functions <code id="P7000497027000000000000000046742" data-uri="chapter11.xhtml#P7000497027000000000000000046742" class="pcalibre1 calibre1 pcalibre2">inet_pton</code> and <code id="P7000497027000000000000000046743" data-uri="chapter11.xhtml#P7000497027000000000000000046743" class="pcalibre1 calibre1 pcalibre2">inet_ntop</code></p>
<pre id="P7000497027000000000000000046744" data-uri="chapter11.xhtml#P7000497027000000000000000046744" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046745" data-uri="chapter11.xhtml#P7000497027000000000000000046745" class="calibre3 pcalibre1 pcalibre2">
#include &lt;arpa/inet.h&gt;
int inet_pton(AF_INET, const char *src, void *dst);
				Returns: 1 if OK, 0 if src is invalid dotted decimal, −1 on error
const char *inet_ntop(AF_INET, const void *src, char *dst, socklen_t size);
				Returns: pointer to a dotted-decimal string if OK, NULL on error
</code></pre>
<p id="P7000497027000000000000000046746" data-uri="chapter11.xhtml#P7000497027000000000000000046746" class="pcalibre8 pcalibre1 pcalibre2">In these function names, the <code id="P7000497027000000000000000046747" data-uri="chapter11.xhtml#P7000497027000000000000000046747" class="pcalibre1 calibre1 pcalibre2">"n"</code> stands for <i class="pcalibre17 pcalibre2 pcalibre1">network</i> and the <code id="P7000497027000000000000000046748" data-uri="chapter11.xhtml#P7000497027000000000000000046748" class="pcalibre1 calibre1 pcalibre2">"p"</code> stands for <i class="pcalibre17 pcalibre2 pcalibre1">presentation</i>. They can manipulate either 32-bit IPv4 addresses (<code id="P7000497027000000000000000046749" data-uri="chapter11.xhtml#P7000497027000000000000000046749" class="pcalibre1 calibre1 pcalibre2">AF_INET</code>), as shown here, or 128-bit IPv6 addresses (<code id="P700049702700000000000000004674A" data-uri="chapter11.xhtml#P700049702700000000000000004674A" class="pcalibre1 calibre1 pcalibre2">AF_INET6</code>), which we do not cover.</p>
<p id="P700049702700000000000000004674B" data-uri="chapter11.xhtml#P700049702700000000000000004674B" class="pcalibre8 pcalibre1 pcalibre2">The <code id="P700049702700000000000000004674C" data-uri="chapter11.xhtml#P700049702700000000000000004674C" class="pcalibre1 calibre1 pcalibre2">inet_pton</code> function converts a dotted-decimal string (<code id="P700049702700000000000000004674D" data-uri="chapter11.xhtml#P700049702700000000000000004674D" class="pcalibre1 calibre1 pcalibre2">src</code>) to a binary IP address in network byte order (<code id="P700049702700000000000000004674E" data-uri="chapter11.xhtml#P700049702700000000000000004674E" class="pcalibre1 calibre1 pcalibre2">dst</code>).If <code id="P700049702700000000000000004674F" data-uri="chapter11.xhtml#P700049702700000000000000004674F" class="pcalibre1 calibre1 pcalibre2">src</code> does not point to a valid dotted-decimal string, then it returns 0. Any other error returns −1 and sets <code id="P7000497027000000000000000046750" data-uri="chapter11.xhtml#P7000497027000000000000000046750" class="pcalibre1 calibre1 pcalibre2">errno</code>. Similarly, the <code id="P7000497027000000000000000046751" data-uri="chapter11.xhtml#P7000497027000000000000000046751" class="pcalibre1 calibre1 pcalibre2">inet_ntop</code> function converts a binary IP address in network byte order (<code id="P7000497027000000000000000046752" data-uri="chapter11.xhtml#P7000497027000000000000000046752" class="pcalibre1 calibre1 pcalibre2">src</code>) to the corresponding dotted-decimal representation and copies at most <code id="P7000497027000000000000000046753" data-uri="chapter11.xhtml#P7000497027000000000000000046753" class="pcalibre1 calibre1 pcalibre2">size</code> bytes of the resulting null-terminated string to <code id="P7000497027000000000000000046754" data-uri="chapter11.xhtml#P7000497027000000000000000046754" class="pcalibre1 calibre1 pcalibre2">dst</code>.</p>
<section id="P7000497027000000000000000007C3D" data-uri="chapter11.xhtml#P7000497027000000000000000007C3D" epub:type="practice" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre65 pcalibre2" id="P7000497027000000000000000046755" data-uri="chapter11.xhtml#P7000497027000000000000000046755" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007C3F" title="927" data-uri="chapter11.xhtml#P7000497027000000000000000007C3F" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre21 pcalibre2">Practice Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">11.1 </span>(solution page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000007FF4.xhtml#P7000497027000000000000000008001">966</a>)</h1></header>
<ol class="pcalibre1 pcalibre2 pcalibre77" id="P7000497027000000000000000046756" data-uri="chapter11.xhtml#P7000497027000000000000000046756">
<li class="pcalibre1 pcalibre2 pcalibre78" id="P7000497027000000000000000046757" data-uri="chapter11.xhtml#P7000497027000000000000000046757">
<div class="pcalibre1 pcalibre2 pcalibre7" id="P7000497027000000000000000046758" data-uri="chapter11.xhtml#P7000497027000000000000000046758"><p id="P7000497027000000000000000046759" data-uri="chapter11.xhtml#P7000497027000000000000000046759" class="pcalibre1 pcalibre2 pcalibre10">Complete the following table:</p>
<table id="P700049702700000000000000004675A" data-uri="chapter11.xhtml#P700049702700000000000000004675A" class="pcalibre1 pcalibre2 pcalibre43">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P700049702700000000000000004675B" data-uri="chapter11.xhtml#P700049702700000000000000004675B" class="pcalibre1 pcalibre2 calibre5">Hex address</th>
<th id="P700049702700000000000000004675C" data-uri="chapter11.xhtml#P700049702700000000000000004675C" class="pcalibre1 pcalibre2 calibre5">Dotted-decimal address</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P700049702700000000000000004675D" data-uri="chapter11.xhtml#P700049702700000000000000004675D" class="pcalibre1 pcalibre2 calibre7"><code id="P700049702700000000000000004675E" data-uri="chapter11.xhtml#P700049702700000000000000004675E" class="calibre3 pcalibre1 pcalibre2">0x0</code></td>
<td id="P700049702700000000000000004675F" data-uri="chapter11.xhtml#P700049702700000000000000004675F" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000046760" data-uri="chapter11.xhtml#P7000497027000000000000000046760" class="pcalibre1 pcalibre2 calibre7"><code id="P7000497027000000000000000046761" data-uri="chapter11.xhtml#P7000497027000000000000000046761" class="calibre3 pcalibre1 pcalibre2">0xffffffff</code></td>
<td id="P7000497027000000000000000046762" data-uri="chapter11.xhtml#P7000497027000000000000000046762" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000046763" data-uri="chapter11.xhtml#P7000497027000000000000000046763" class="pcalibre1 pcalibre2 calibre7"><code id="P7000497027000000000000000046764" data-uri="chapter11.xhtml#P7000497027000000000000000046764" class="calibre3 pcalibre1 pcalibre2">0x7f000001</code></td>
<td id="P7000497027000000000000000046765" data-uri="chapter11.xhtml#P7000497027000000000000000046765" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000046766" data-uri="chapter11.xhtml#P7000497027000000000000000046766" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P7000497027000000000000000046767" data-uri="chapter11.xhtml#P7000497027000000000000000046767" class="pcalibre1 pcalibre2 calibre7"><code id="P7000497027000000000000000046768" data-uri="chapter11.xhtml#P7000497027000000000000000046768" class="calibre3 pcalibre1 pcalibre2">205.188.160.121</code></td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000046769" data-uri="chapter11.xhtml#P7000497027000000000000000046769" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P700049702700000000000000004676A" data-uri="chapter11.xhtml#P700049702700000000000000004676A" class="pcalibre1 pcalibre2 calibre7"><code id="P700049702700000000000000004676B" data-uri="chapter11.xhtml#P700049702700000000000000004676B" class="calibre3 pcalibre1 pcalibre2">64.12.149.13</code></td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P700049702700000000000000004676C" data-uri="chapter11.xhtml#P700049702700000000000000004676C" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P700049702700000000000000004676D" data-uri="chapter11.xhtml#P700049702700000000000000004676D" class="pcalibre1 pcalibre2 calibre7"><code id="P700049702700000000000000004676E" data-uri="chapter11.xhtml#P700049702700000000000000004676E" class="calibre3 pcalibre1 pcalibre2">205.188.146.23</code></td>
</tr>
</tbody>
</table>
</div></li>
</ol>
</section>
<section id="P7000497027000000000000000007C59" data-uri="chapter11.xhtml#P7000497027000000000000000007C59" epub:type="practice" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre65 pcalibre2" id="P700049702700000000000000004676F" data-uri="chapter11.xhtml#P700049702700000000000000004676F" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">Practice Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">11.2 </span>(solution page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000008021.xhtml#P700049702700000000000000000803A">967</a>)</h1></header>
<ol class="pcalibre1 pcalibre2 pcalibre77" id="P7000497027000000000000000046770" data-uri="chapter11.xhtml#P7000497027000000000000000046770">
<li class="pcalibre1 pcalibre2 pcalibre78" id="P7000497027000000000000000046771" data-uri="chapter11.xhtml#P7000497027000000000000000046771">
<div class="pcalibre1 pcalibre2 pcalibre7" id="P7000497027000000000000000046772" data-uri="chapter11.xhtml#P7000497027000000000000000046772"><p id="P7000497027000000000000000046773" data-uri="chapter11.xhtml#P7000497027000000000000000046773" class="pcalibre1 pcalibre2 pcalibre10">Write a program <code id="P7000497027000000000000000046774" data-uri="chapter11.xhtml#P7000497027000000000000000046774" class="pcalibre1 calibre1 pcalibre2">hex2dd.c</code> that converts its hex argument to a dotted-decimal string and prints the result. For example,</p>
<pre id="P7000497027000000000000000046775" data-uri="chapter11.xhtml#P7000497027000000000000000046775" class="calibre2 pcalibre2 pcalibre1"><code id="P7000497027000000000000000046776" data-uri="chapter11.xhtml#P7000497027000000000000000046776" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">./hex2dd 0x8002c2f2</i>
128.2.194.242
</code></pre>
</div></li>
</ol>
</section>
<section id="P7000497027000000000000000007C62" data-uri="chapter11.xhtml#P7000497027000000000000000007C62" epub:type="practice" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre65 pcalibre2" id="P7000497027000000000000000046777" data-uri="chapter11.xhtml#P7000497027000000000000000046777" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">Practice Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">11.3 </span>(solution page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP7000497027000000000000000008021.xhtml#P700049702700000000000000000803A">967</a>)</h1></header>
<ol class="pcalibre1 pcalibre2 pcalibre77" id="P7000497027000000000000000046778" data-uri="chapter11.xhtml#P7000497027000000000000000046778">
<li class="pcalibre1 pcalibre2 pcalibre78" id="P7000497027000000000000000046779" data-uri="chapter11.xhtml#P7000497027000000000000000046779">
<div class="pcalibre1 pcalibre2 pcalibre7" id="P700049702700000000000000004677A" data-uri="chapter11.xhtml#P700049702700000000000000004677A"><p id="P700049702700000000000000004677B" data-uri="chapter11.xhtml#P700049702700000000000000004677B" class="pcalibre1 pcalibre2 pcalibre10">Write a program <code id="P700049702700000000000000004677C" data-uri="chapter11.xhtml#P700049702700000000000000004677C" class="pcalibre1 calibre1 pcalibre2">dd2hex.c</code> that converts its dotted-decimal argument to a hex number and prints the result. For example,</p>
<pre id="P700049702700000000000000004677D" data-uri="chapter11.xhtml#P700049702700000000000000004677D" class="calibre2 pcalibre2 pcalibre1"><code id="P700049702700000000000000004677E" data-uri="chapter11.xhtml#P700049702700000000000000004677E" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">./dd2hex 128.2.194.242</i>
0x8002c2f2
</code></pre>
</div></li>
</ol>
</section>
</section>
<section id="P7000497027000000000000000007C6B" data-uri="chapter11.xhtml#P7000497027000000000000000007C6B" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P700049702700000000000000004677F" data-uri="chapter11.xhtml#P700049702700000000000000004677F" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">11.3.2 </span>Internet Domain Names</h1></header>
<p id="P7000497027000000000000000046780" data-uri="chapter11.xhtml#P7000497027000000000000000046780" class="pcalibre8 pcalibre1 pcalibre2">Internet clients and servers use IP addresses when they communicate with each other. However, large integers are difficult for people to remember, so the Internet also defines a separate set of more human-friendly <i class="pcalibre17 pcalibre2 pcalibre1">domain names</i>, as well as a mechanism that maps the set of domain names to the set of IP addresses. A domain name is a sequence of words (letters, numbers, and dashes) separated by periods, such as <code id="P7000497027000000000000000046781" data-uri="chapter11.xhtml#P7000497027000000000000000046781" class="pcalibre1 calibre1 pcalibre2">whaleshark.ics.cs.cmu.edu</code>.</p>
<p id="P7000497027000000000000000046782" data-uri="chapter11.xhtml#P7000497027000000000000000046782" class="pcalibre8 pcalibre1 pcalibre2">The set of domain names forms a hierarchy, and each domain name encodes its position in the hierarchy. An example is the easiest way to understand this. <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007C73"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">11.10</span></a> shows a portion of the domain name hierarchy.</p>
<p id="P7000497027000000000000000046783" data-uri="chapter11.xhtml#P7000497027000000000000000046783" class="pcalibre8 pcalibre1 pcalibre2">The hierarchy is represented as a tree. The nodes of the tree represent domain names that are formed by the path back to the root. Subtrees are referred to as <i class="pcalibre17 pcalibre2 pcalibre1">sub-domains</i>. The first level in the hierarchy is an unnamed root node. The next level is a collection of <i class="pcalibre17 pcalibre2 pcalibre1">first-level domain names</i> that are defined by a nonprofit organization called ICANN (Internet Corporation for Assigned Names and Numbers). Common first-level domains include <code id="P7000497027000000000000000046784" data-uri="chapter11.xhtml#P7000497027000000000000000046784" class="pcalibre1 calibre1 pcalibre2">com, edu, gov, org</code>, and <code id="P7000497027000000000000000046785" data-uri="chapter11.xhtml#P7000497027000000000000000046785" class="pcalibre1 calibre1 pcalibre2">net</code>.</p>
<figure class="pcalibre2 pcalibre32 pcalibre35" id="P7000497027000000000000000007C73" data-uri="chapter11.xhtml#P7000497027000000000000000007C73">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007C74" title="928" data-uri="chapter11.xhtml#P7000497027000000000000000007C74" epub:type="pagebreak"></span>
<img alt="A diagram illustrates a subset of the Internet domain name hierarchy." id="P7000497027000000000000000046786" data-uri="P700049702700000000000000000B7C2" src="../images/p928-1.png" class="pcalibre1 pcalibre2 pcalibre304"/>
<figcaption id="P7000497027000000000000000046787" data-uri="chapter11.xhtml#P7000497027000000000000000046787" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000046788" data-uri="chapter11.xhtml#P7000497027000000000000000046788" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">11.10 </span>Subset of the Internet domain name hierarchy.</h1></header>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000026AF3" data-uri="chapter11.xhtml#P7000497027000000000000000026AF3">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000046789" data-uri="chapter11.xhtml#P7000497027000000000000000046789" class="pcalibre8 pcalibre1 pcalibre2">A diagram shows domain name hierarchy branching from unnamed root to first-level, second-level, and third level, domain names, one of each is further broken down, as organized in the following list.</p>
<ul id="P700049702700000000000000004678A" data-uri="chapter11.xhtml#P700049702700000000000000004678A" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P700049702700000000000000004678B" data-uri="chapter11.xhtml#P700049702700000000000000004678B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004678C" data-uri="chapter11.xhtml#P700049702700000000000000004678C" class="pcalibre1 pcalibre2 pcalibre10">Unnamed root</p>
<ul id="P700049702700000000000000004678D" data-uri="chapter11.xhtml#P700049702700000000000000004678D" class="pcalibre1 pcalibre2 pcalibre69">
<li id="P700049702700000000000000004678E" data-uri="chapter11.xhtml#P700049702700000000000000004678E" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004678F" data-uri="chapter11.xhtml#P700049702700000000000000004678F" class="pcalibre1 pcalibre2 pcalibre10">Mil</p></li>
<li id="P7000497027000000000000000046790" data-uri="chapter11.xhtml#P7000497027000000000000000046790" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000046791" data-uri="chapter11.xhtml#P7000497027000000000000000046791" class="pcalibre1 pcalibre2 pcalibre10">Edu</p>
<ul id="P7000497027000000000000000046792" data-uri="chapter11.xhtml#P7000497027000000000000000046792" class="pcalibre146 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000046793" data-uri="chapter11.xhtml#P7000497027000000000000000046793" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000046794" data-uri="chapter11.xhtml#P7000497027000000000000000046794" class="pcalibre1 pcalibre2 pcalibre10">Mit</p></li>
<li id="P7000497027000000000000000046795" data-uri="chapter11.xhtml#P7000497027000000000000000046795" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000046796" data-uri="chapter11.xhtml#P7000497027000000000000000046796" class="pcalibre1 pcalibre2 pcalibre10">Cmu</p>
<ul id="P7000497027000000000000000046797" data-uri="chapter11.xhtml#P7000497027000000000000000046797" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P7000497027000000000000000046798" data-uri="chapter11.xhtml#P7000497027000000000000000046798" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000046799" data-uri="chapter11.xhtml#P7000497027000000000000000046799" class="pcalibre1 pcalibre2 pcalibre10">Cs</p>
<ul id="P700049702700000000000000004679A" data-uri="chapter11.xhtml#P700049702700000000000000004679A" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P700049702700000000000000004679B" data-uri="chapter11.xhtml#P700049702700000000000000004679B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004679C" data-uri="chapter11.xhtml#P700049702700000000000000004679C" class="pcalibre1 pcalibre2 pcalibre10">Ics</p>
<ul id="P700049702700000000000000004679D" data-uri="chapter11.xhtml#P700049702700000000000000004679D" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P700049702700000000000000004679E" data-uri="chapter11.xhtml#P700049702700000000000000004679E" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004679F" data-uri="chapter11.xhtml#P700049702700000000000000004679F" class="pcalibre1 pcalibre2 pcalibre10">Whaleshark 128.2.210.175</p></li>
</ul></li>
<li id="P70004970270000000000000000467A0" data-uri="chapter11.xhtml#P70004970270000000000000000467A0" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467A1" data-uri="chapter11.xhtml#P70004970270000000000000000467A1" class="pcalibre1 pcalibre2 pcalibre10">Pdl</p>
<ul id="P70004970270000000000000000467A2" data-uri="chapter11.xhtml#P70004970270000000000000000467A2" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P70004970270000000000000000467A3" data-uri="chapter11.xhtml#P70004970270000000000000000467A3" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467A4" data-uri="chapter11.xhtml#P70004970270000000000000000467A4" class="pcalibre1 pcalibre2 pcalibre10">www 128.2.131.66</p>
<ul id="P70004970270000000000000000467A5" data-uri="chapter11.xhtml#P70004970270000000000000000467A5" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P70004970270000000000000000467A6" data-uri="chapter11.xhtml#P70004970270000000000000000467A6" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467A7" data-uri="chapter11.xhtml#P70004970270000000000000000467A7" class="pcalibre1 pcalibre2 pcalibre10">ece</p></li>
</ul></li>
<li id="P70004970270000000000000000467A8" data-uri="chapter11.xhtml#P70004970270000000000000000467A8" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467A9" data-uri="chapter11.xhtml#P70004970270000000000000000467A9" class="pcalibre1 pcalibre2 pcalibre10">berkeley</p></li>
</ul></li>
<li id="P70004970270000000000000000467AA" data-uri="chapter11.xhtml#P70004970270000000000000000467AA" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467AB" data-uri="chapter11.xhtml#P70004970270000000000000000467AB" class="pcalibre1 pcalibre2 pcalibre10">Gov</p></li>
<li id="P70004970270000000000000000467AC" data-uri="chapter11.xhtml#P70004970270000000000000000467AC" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467AD" data-uri="chapter11.xhtml#P70004970270000000000000000467AD" class="pcalibre1 pcalibre2 pcalibre10">Com</p>
<ul id="P70004970270000000000000000467AE" data-uri="chapter11.xhtml#P70004970270000000000000000467AE" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P70004970270000000000000000467AF" data-uri="chapter11.xhtml#P70004970270000000000000000467AF" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467B0" data-uri="chapter11.xhtml#P70004970270000000000000000467B0" class="pcalibre1 pcalibre2 pcalibre10">Amazon</p></li>
<li id="P70004970270000000000000000467B1" data-uri="chapter11.xhtml#P70004970270000000000000000467B1" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467B2" data-uri="chapter11.xhtml#P70004970270000000000000000467B2" class="pcalibre1 pcalibre2 pcalibre10">www 176.32.98.166</p></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li></ul></li></ul>
</details>
</figcaption>
</figure>
<p id="P70004970270000000000000000467B3" data-uri="chapter11.xhtml#P70004970270000000000000000467B3" class="pcalibre8 pcalibre1 pcalibre2">At the next level are <i class="pcalibre17 pcalibre2 pcalibre1">second-level</i> domain names such as <code id="P70004970270000000000000000467B4" data-uri="chapter11.xhtml#P70004970270000000000000000467B4" class="pcalibre1 calibre1 pcalibre2">cmu.edu</code>, which are assigned on a first-come first-serve basis by various authorized agents of ICANN. Once an organization has received a second-level domain name, then it is free to create any other new domain name within its subdomain, such as <code id="P70004970270000000000000000467B5" data-uri="chapter11.xhtml#P70004970270000000000000000467B5" class="pcalibre1 calibre1 pcalibre2">cs.cmu.edu.</code></p>
<p id="P70004970270000000000000000467B6" data-uri="chapter11.xhtml#P70004970270000000000000000467B6" class="pcalibre8 pcalibre1 pcalibre2">The Internet defines a mapping between the set of domain names and the set of IP addresses. Until 1988, this mapping was maintained manually in a single text file called <code id="P70004970270000000000000000467B7" data-uri="chapter11.xhtml#P70004970270000000000000000467B7" class="pcalibre1 calibre1 pcalibre2">HOSTS.TXT.</code> Since then, the mapping has been maintained in a distributed worldwide database known as <i class="pcalibre17 pcalibre2 pcalibre1">DNS (Domain Name System)</i>. Conceptually, the DNS database consists of millions of <i class="pcalibre17 pcalibre2 pcalibre1">host entries</i>, each of which defines the mapping between a set of domain names and a set of IP addresses. In a mathematical sense, think of each host entry as an equivalence class of domain names and IP addresses. We can explore some of the properties of the DNS mappings with the Linux <span class="pcalibre1 pcalibre29 pcalibre2">nslookup </span>program, which displays the IP addresses associated with a domain name.<a class="pcalibre1 pcalibre2 pcalibre56 pcalibre16 pcalibre14 pcalibre15" id="r__P7000497027000000000000000008056" epub:type="noteref" href="#P7000497027000000000000000008056">1</a></p><aside class="pcalibre2 pcalibre32 pcalibre57" id="P7000497027000000000000000008056" data-uri="chapter11.xhtml#P7000497027000000000000000008056" epub:type="footnote"><p class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre58 pcalibre2"><a href="#r__P7000497027000000000000000008056" class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13">1. </a></span>We've reformatted the output of <span class="pcalibre1 pcalibre29 pcalibre2">nslookup </span>to improve readability.</p></aside>
<p id="P70004970270000000000000000467B8" data-uri="chapter11.xhtml#P70004970270000000000000000467B8" class="pcalibre8 pcalibre1 pcalibre2">Each Internet host has the locally defined domain name <code id="P70004970270000000000000000467B9" data-uri="chapter11.xhtml#P70004970270000000000000000467B9" class="pcalibre1 calibre1 pcalibre2">localhost</code>, which always maps to the <i class="pcalibre17 pcalibre2 pcalibre1">loopback address</i> <code id="P70004970270000000000000000467BA" data-uri="chapter11.xhtml#P70004970270000000000000000467BA" class="pcalibre1 calibre1 pcalibre2">127.0.0.1</code>:</p>
<pre id="P70004970270000000000000000467BB" data-uri="chapter11.xhtml#P70004970270000000000000000467BB" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467BC" data-uri="chapter11.xhtml#P70004970270000000000000000467BC" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup localhost</i>
Address: 127.0.0.1
</code></pre>
<p id="P70004970270000000000000000467BD" data-uri="chapter11.xhtml#P70004970270000000000000000467BD" class="pcalibre8 pcalibre1 pcalibre2">The <code id="P70004970270000000000000000467BE" data-uri="chapter11.xhtml#P70004970270000000000000000467BE" class="pcalibre1 calibre1 pcalibre2">localhost</code> name provides a convenient and portable way to reference clients and servers that are running on the same machine, which can be especially useful <span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007C84" title="929" data-uri="chapter11.xhtml#P7000497027000000000000000007C84" epub:type="pagebreak"></span>for debugging. We can use <span class="pcalibre1 pcalibre29 pcalibre2">hostname </span>to determine the real domain name of our local host:</p>
<pre id="P70004970270000000000000000467BF" data-uri="chapter11.xhtml#P70004970270000000000000000467BF" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467C0" data-uri="chapter11.xhtml#P70004970270000000000000000467C0" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">hostname</i>
whaleshark.ics.cs.cmu.edu
</code></pre>
<p id="P70004970270000000000000000467C1" data-uri="chapter11.xhtml#P70004970270000000000000000467C1" class="pcalibre8 pcalibre1 pcalibre2">In the simplest case, there is a one-to-one mapping between a domain name and an IP address:</p>
<pre id="P70004970270000000000000000467C2" data-uri="chapter11.xhtml#P70004970270000000000000000467C2" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467C3" data-uri="chapter11.xhtml#P70004970270000000000000000467C3" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup whaleshark.ics.cs.cmu.edu</i>
Address: 128.2.210.175
</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P70004970270000000000000000467C4" data-uri="chapter11.xhtml#P70004970270000000000000000467C4">However, in some cases, multiple domain names are mapped to the same IP address:</p>
<pre id="P70004970270000000000000000467C5" data-uri="chapter11.xhtml#P70004970270000000000000000467C5" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467C6" data-uri="chapter11.xhtml#P70004970270000000000000000467C6" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup cs.mit.edu</i>
Address: 18.62.1.6
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup eecs.mit.edu</i>
Address: 18.62.1.6
</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P70004970270000000000000000467C7" data-uri="chapter11.xhtml#P70004970270000000000000000467C7">In the most general case, multiple domain names are mapped to the same set of multiple IP addresses:</p>
<pre id="P70004970270000000000000000467C8" data-uri="chapter11.xhtml#P70004970270000000000000000467C8" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467C9" data-uri="chapter11.xhtml#P70004970270000000000000000467C9" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup www.twitter.com</i>
Address: 199.16.156.6
Address: 199.16.156.70
Address: 199.16.156.102
Address: 199.16.156.230
</code></pre>
<pre id="P70004970270000000000000000467CA" data-uri="chapter11.xhtml#P70004970270000000000000000467CA" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467CB" data-uri="chapter11.xhtml#P70004970270000000000000000467CB" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup twitter.com</i>
Address: 199.16.156.102
Address: 199.16.156.230
Address: 199.16.156.6
Address: 199.16.156.70
</code></pre>
<p id="P70004970270000000000000000467CC" data-uri="chapter11.xhtml#P70004970270000000000000000467CC" class="pcalibre8 pcalibre1 pcalibre2">Finally, we notice that some valid domain names are not mapped to any IP address:</p>
<pre id="P70004970270000000000000000467CD" data-uri="chapter11.xhtml#P70004970270000000000000000467CD" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467CE" data-uri="chapter11.xhtml#P70004970270000000000000000467CE" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup edu</i>
*** Can't find edu: No answer
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">nslookup ics.cs.cmu.edu</i>
*** Can't find ics.cs.cmu.edu: No answer
</code></pre>
</section>
<section id="P7000497027000000000000000007C95" data-uri="chapter11.xhtml#P7000497027000000000000000007C95" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P70004970270000000000000000467CF" data-uri="chapter11.xhtml#P70004970270000000000000000467CF" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">11.3.3 </span>Internet Connections</h1></header>
<p id="P70004970270000000000000000467D0" data-uri="chapter11.xhtml#P70004970270000000000000000467D0" class="pcalibre8 pcalibre1 pcalibre2">Internet clients and servers communicate by sending and receiving streams of bytes over <i class="pcalibre17 pcalibre2 pcalibre1">connections</i>. A connection is <i class="pcalibre17 pcalibre2 pcalibre1">point-to-point</i> in the sense that it connects a pair of processes. It is <i class="pcalibre17 pcalibre2 pcalibre1">full duplex</i> in the sense that data can flow in both directions</p>
<aside class="pcalibre31 pcalibre32 pcalibre2" id="P7000497027000000000000000007C98" data-uri="chapter11.xhtml#P7000497027000000000000000007C98"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre33" id="P70004970270000000000000000467D1" data-uri="chapter11.xhtml#P70004970270000000000000000467D1" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007C9A" title="930" data-uri="chapter11.xhtml#P7000497027000000000000000007C9A" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre2 pcalibre34">Aside </span>How many Internet hosts are there?</h1></header>
<p id="P70004970270000000000000000467D2" data-uri="chapter11.xhtml#P70004970270000000000000000467D2" class="pcalibre1 pcalibre2 pcalibre10">Twice a year since 1987, the Internet Systems Consortium conducts the <i class="pcalibre17 pcalibre2 pcalibre1">Internet Domain Survey.</i> The survey, which estimates the number of Internet hosts by counting the number of IP addresses that have been assigned a domain name, reveals an amazing trend. Since 1987, when there were about 20,000 Internet hosts, the number of hosts has been increasing exponentially. By 2015, there were over 1,000,000,000 Internet hosts!</p>
</aside>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P70004970270000000000000000467D3" data-uri="chapter11.xhtml#P70004970270000000000000000467D3">at the same time. And it is <i class="pcalibre17 pcalibre2 pcalibre1">reliable</i> in the sense that—barring some catastrophic failure such as a cable cut by the proverbial careless backhoe operator—the stream of bytes sent by the source process is eventually received by the destination process in the same order it was sent.</p>
<p id="P70004970270000000000000000467D4" data-uri="chapter11.xhtml#P70004970270000000000000000467D4" class="pcalibre8 pcalibre1 pcalibre2">A <i class="pcalibre17 pcalibre2 pcalibre1">socket</i> is an end point of a connection. Each socket has a corresponding <i class="pcalibre17 pcalibre2 pcalibre1">socket address</i> that consists of an Internet address and a 16-bit integer <i class="pcalibre17 pcalibre2 pcalibre1">port</i><a class="pcalibre1 pcalibre2 pcalibre56 pcalibre16 pcalibre14 pcalibre15" id="r__P7000497027000000000000000008058" epub:type="noteref" href="#P7000497027000000000000000008058">2</a> and is denoted by the notation <code id="P70004970270000000000000000467D5" data-uri="chapter11.xhtml#P70004970270000000000000000467D5" class="pcalibre1 calibre1 pcalibre2">address:port.</code></p><aside class="pcalibre2 pcalibre32 pcalibre57" id="P7000497027000000000000000008058" data-uri="chapter11.xhtml#P7000497027000000000000000008058" epub:type="footnote"><p class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre58 pcalibre2"><a href="#r__P7000497027000000000000000008058" class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13">2. </a></span>These software ports have no relation to the hardware ports in network switches and routers.</p></aside>
<p id="P70004970270000000000000000467D6" data-uri="chapter11.xhtml#P70004970270000000000000000467D6" class="pcalibre8 pcalibre1 pcalibre2">The port in the client's socket address is assigned automatically by the kernel when the client makes a connection request and is known as an <i class="pcalibre17 pcalibre2 pcalibre1">ephemeral port.</i> However, the port in the server's socket address is typically some <i class="pcalibre17 pcalibre2 pcalibre1">well-known port</i> that is permanently associated with the service. For example, Web servers typically use port 80, and email servers use port 25. Associated with each service with a well-known port is a corresponding <i class="pcalibre17 pcalibre2 pcalibre1">well-known service name.</i> For example, the well-known name for the Web service is <code id="P70004970270000000000000000467D7" data-uri="chapter11.xhtml#P70004970270000000000000000467D7" class="pcalibre1 calibre1 pcalibre2">http</code>, and the well-known name for email is <code id="P70004970270000000000000000467D8" data-uri="chapter11.xhtml#P70004970270000000000000000467D8" class="pcalibre1 calibre1 pcalibre2">smtp</code>. The mapping between well-known names and well-known ports is contained in a file called <code id="P70004970270000000000000000467D9" data-uri="chapter11.xhtml#P70004970270000000000000000467D9" class="pcalibre1 calibre1 pcalibre2">/etc/services.</code></p>
<p id="P70004970270000000000000000467DA" data-uri="chapter11.xhtml#P70004970270000000000000000467DA" class="pcalibre8 pcalibre1 pcalibre2">A connection is uniquely identified by the socket addresses of its two end points. This pair of socket addresses is known as a <i class="pcalibre17 pcalibre2 pcalibre1">socket pair</i> and is denoted by the tuple</p>
<pre id="P70004970270000000000000000467DB" data-uri="chapter11.xhtml#P70004970270000000000000000467DB" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467DC" data-uri="chapter11.xhtml#P70004970270000000000000000467DC" class="calibre3 pcalibre1 pcalibre2"><i class="pcalibre17 pcalibre2 pcalibre1">(cliaddr : cliport, servaddr</i> :<i class="pcalibre17 pcalibre2 pcalibre1">servport)</i></code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P70004970270000000000000000467DD" data-uri="chapter11.xhtml#P70004970270000000000000000467DD">where <i class="pcalibre17 pcalibre2 pcalibre1">cliaddr</i> is the client's IP address, <i class="pcalibre17 pcalibre2 pcalibre1">cliport</i> is the client's port, <i class="pcalibre17 pcalibre2 pcalibre1">servaddr</i> is the server's IP address, and <i class="pcalibre17 pcalibre2 pcalibre1">servport</i> is the server's port. For example, <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007CB5"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">11.11</span></a> shows a connection between a Web client and a Web server.</p>
<p id="P70004970270000000000000000467DE" data-uri="chapter11.xhtml#P70004970270000000000000000467DE" class="pcalibre8 pcalibre1 pcalibre2">In this example, the Web client's socket address is</p>
<pre id="P70004970270000000000000000467DF" data-uri="chapter11.xhtml#P70004970270000000000000000467DF" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467E0" data-uri="chapter11.xhtml#P70004970270000000000000000467E0" class="calibre3 pcalibre1 pcalibre2">128.2.194.242:51213</code></pre>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P70004970270000000000000000467E1" data-uri="chapter11.xhtml#P70004970270000000000000000467E1">where port <code id="P70004970270000000000000000467E2" data-uri="chapter11.xhtml#P70004970270000000000000000467E2" class="pcalibre1 calibre1 pcalibre2">51213</code> is an ephemeral port assigned by the kernel. The Web server's socket address is</p>
<pre id="P70004970270000000000000000467E3" data-uri="chapter11.xhtml#P70004970270000000000000000467E3" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467E4" data-uri="chapter11.xhtml#P70004970270000000000000000467E4" class="calibre3 pcalibre1 pcalibre2">208.216.181.15:80</code></pre>
<aside class="pcalibre31 pcalibre32 pcalibre2" id="P7000497027000000000000000007CAE" data-uri="chapter11.xhtml#P7000497027000000000000000007CAE"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre33" id="P70004970270000000000000000467E5" data-uri="chapter11.xhtml#P70004970270000000000000000467E5" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007CB0" title="931" data-uri="chapter11.xhtml#P7000497027000000000000000007CB0" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre2 pcalibre34">Aside </span>Origins of the Internet</h1></header>
<p id="P70004970270000000000000000467E6" data-uri="chapter11.xhtml#P70004970270000000000000000467E6" class="pcalibre1 pcalibre2 pcalibre40">The Internet is one of the most successful examples of government, university, and industry partnership. Many factors contributed to its success, but we think two are particularly important: a sustained 30-year investment by the United States government and a commitment by passionate researchers to what Dave Clarke at MIT has dubbed "rough consensus and working code."</p>
<p id="P70004970270000000000000000467E7" data-uri="chapter11.xhtml#P70004970270000000000000000467E7" class="pcalibre1 pcalibre2 pcalibre40">The seeds of the Internet were sown in 1957, when, at the height of the Cold War, the Soviet Union shocked the world by launching Sputnik, the first artificial earth satellite. In response, the United States government created the Advanced Research Projects Agency (ARPA), whose charter was to reestablish the US lead in science and technology. In 1967, Lawrence Roberts at ARPA published plans for a new network called the ARPANET. The first ARPANET nodes were up and running by 1969. By 1971, there were 13 ARPANET nodes, and email had emerged as the first important network application.</p>
<p id="P70004970270000000000000000467E8" data-uri="chapter11.xhtml#P70004970270000000000000000467E8" class="pcalibre1 pcalibre2 pcalibre40">In 1972, Robert Kahn outlined the general principles of internetworking: a collection of interconnected networks, with communication between the networks handled independently on a "best-effort basis" by black boxes called "routers." In 1974, Kahn and Vinton Cerf published the first details of TCP/IP, which by 1982 had become the standard internetworking protocol for ARPANET. On January 1, 1983, every node on the ARPANET switched to TCP/IP, marking the birth of the global IP Internet.</p>
<p id="P70004970270000000000000000467E9" data-uri="chapter11.xhtml#P70004970270000000000000000467E9" class="pcalibre1 pcalibre2 pcalibre10">In 1985, Paul Mockapetris invented DNS, and there were over 1,000 Internet hosts. The next year, the National Science Foundation (NSF) built the NSFNET backbone connecting 13 sites with 56 Kb/s phone lines. It was upgraded to 1.5 Mb/s T1 links in 1988 and 45 Mb/s T3 links in 1991. By 1988, there were more than 50,000 hosts. In 1989, the original ARPANET was officially retired. In 1995, when there were almost 10,000,000 Internet hosts, NSF retired NSFNET and replaced it with the modern Internet architecture based on private commercial backbones connected by public network access points.</p>
</aside>
<figure class="pcalibre2 pcalibre32 pcalibre35" id="P7000497027000000000000000007CB5" data-uri="chapter11.xhtml#P7000497027000000000000000007CB5">
<img alt="A diagram illustrates the anatomy of an Internet connection." id="P70004970270000000000000000467EA" data-uri="P700049702700000000000000000B7C4" src="../images/p931-1.png" class="pcalibre1 pcalibre2 pcalibre305"/>
<figcaption id="P70004970270000000000000000467EB" data-uri="chapter11.xhtml#P70004970270000000000000000467EB" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P70004970270000000000000000467EC" data-uri="chapter11.xhtml#P70004970270000000000000000467EC" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">11.11 </span>Anatomy of an Internet connection.</h1></header>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000026B58" data-uri="chapter11.xhtml#P7000497027000000000000000026B58">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P70004970270000000000000000467ED" data-uri="chapter11.xhtml#P70004970270000000000000000467ED" class="pcalibre8 pcalibre1 pcalibre2">A diagram illustrates a connection between client and server, with parts summarized below.</p>
<ul id="P70004970270000000000000000467EE" data-uri="chapter11.xhtml#P70004970270000000000000000467EE" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P70004970270000000000000000467EF" data-uri="chapter11.xhtml#P70004970270000000000000000467EF" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467F0" data-uri="chapter11.xhtml#P70004970270000000000000000467F0" class="pcalibre1 pcalibre2 pcalibre10">Client: Client host address 128.2.194.242</p></li>
<li id="P70004970270000000000000000467F1" data-uri="chapter11.xhtml#P70004970270000000000000000467F1" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467F2" data-uri="chapter11.xhtml#P70004970270000000000000000467F2" class="pcalibre1 pcalibre2 pcalibre10">Client socket address (connection at client): 128.2.194.242:51213</p></li>
<li id="P70004970270000000000000000467F3" data-uri="chapter11.xhtml#P70004970270000000000000000467F3" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467F4" data-uri="chapter11.xhtml#P70004970270000000000000000467F4" class="pcalibre1 pcalibre2 pcalibre10">Server (post 80): Server host address 208.216.181.15</p></li>
<li id="P70004970270000000000000000467F5" data-uri="chapter11.xhtml#P70004970270000000000000000467F5" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467F6" data-uri="chapter11.xhtml#P70004970270000000000000000467F6" class="pcalibre1 pcalibre2 pcalibre10">Server socket address (connection at server): 208.216.181.15:80</p></li>
<li id="P70004970270000000000000000467F7" data-uri="chapter11.xhtml#P70004970270000000000000000467F7" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000467F8" data-uri="chapter11.xhtml#P70004970270000000000000000467F8" class="pcalibre1 pcalibre2 pcalibre10">Connection socket pair (between client and host): (128.2.194.242:51213, 208.216.181.15:80)</p></li>
</ul>
</details>
</figcaption>
</figure>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P70004970270000000000000000467F9" data-uri="chapter11.xhtml#P70004970270000000000000000467F9">where port <code id="P70004970270000000000000000467FA" data-uri="chapter11.xhtml#P70004970270000000000000000467FA" class="pcalibre1 calibre1 pcalibre2">80</code> is the well-known port associated with Web services. Given these client and server socket addresses, the connection between the client and server is uniquely identified by the socket pair</p>
<pre id="P70004970270000000000000000467FB" data-uri="chapter11.xhtml#P70004970270000000000000000467FB" class="calibre2 pcalibre2 pcalibre1"><code id="P70004970270000000000000000467FC" data-uri="chapter11.xhtml#P70004970270000000000000000467FC" class="calibre3 pcalibre1 pcalibre2">(128.2.194.242:51213, 208.216.181.15:80)</code></pre>
<aside class="pcalibre31 pcalibre32 pcalibre2" id="P7000497027000000000000000007CBD" data-uri="chapter11.xhtml#P7000497027000000000000000007CBD"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre33" id="P70004970270000000000000000467FD" data-uri="chapter11.xhtml#P70004970270000000000000000467FD" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007CBF" title="932" data-uri="chapter11.xhtml#P7000497027000000000000000007CBF" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre2 pcalibre34">Aside </span>Origins of the sockets interface</h1></header>
<p id="P70004970270000000000000000467FE" data-uri="chapter11.xhtml#P70004970270000000000000000467FE" class="pcalibre1 pcalibre2 pcalibre10">The original sockets interface was developed by researchers at University of California, Berkeley, in the early 1980s. For this reason, it is often referred to as <i class="pcalibre17 pcalibre2 pcalibre1">Berkeley sockets</i>. The Berkeley researchers developed the sockets interface to work with any underlying protocol. The first implementation was for TCP/IP, which they included in the Unix 4.2BSD kernel and distributed to numerous universities and labs. This was an important event in Internet history. Almost overnight, thousands of people had access to TCP/IP and its source codes. It generated tremendous excitement and sparked a flurry of new research in networking and internetworking.</p>
</aside>
</section>
</section></body></html>
