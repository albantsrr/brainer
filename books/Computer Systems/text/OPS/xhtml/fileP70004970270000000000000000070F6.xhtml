<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>9.6 Address Translation</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="pcalibre1 pcalibre2 pcalibre">
<section id="P70004970270000000000000000070F6" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre2 pcalibre4" id="P700049702700000000000000004594C" data-uri="chapter09.xhtml#P700049702700000000000000004594C" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">9.6 </span>Address Translation</h1></header>
<p id="P700049702700000000000000004594D" data-uri="chapter09.xhtml#P700049702700000000000000004594D" class="pcalibre8 pcalibre1 pcalibre2">This section covers the basics of address translation. Our aim is to give you an appreciation of the hardware's role in supporting virtual memory, with enough detail so that you can work through some concrete examples by hand. However, keep in mind that we are omitting a number of details, especially related to timing,</p>
<figure id="P70004970270000000000000000070F9" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P70004970270000000000000000070F9">
<table class="pcalibre1 pcalibre2 pcalibre43" id="P700049702700000000000000004594E" data-uri="chapter09.xhtml#P700049702700000000000000004594E">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P700049702700000000000000004594F" data-uri="chapter09.xhtml#P700049702700000000000000004594F" class="pcalibre1 pcalibre2 calibre5"><span class="pcalibre1 pcalibre2 pcalibre123" id="P70004970270000000000000000070FC" title="814" data-uri="chapter09.xhtml#P70004970270000000000000000070FC" epub:type="pagebreak"></span>Symbol</th>
<th id="P7000497027000000000000000045950" data-uri="chapter09.xhtml#P7000497027000000000000000045950" class="pcalibre1 pcalibre2 calibre5">Description</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td colspan="2" id="P7000497027000000000000000045951" data-uri="chapter09.xhtml#P7000497027000000000000000045951" class="pcalibre1 pcalibre2 calibre7">Basic parameters</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045952" data-uri="chapter09.xhtml#P7000497027000000000000000045952" class="pcalibre1 pcalibre2 calibre7"><var class="pcalibre17 pcalibre2 pcalibre1">N</var> = 2<sup class="pcalibre1 pcalibre2 calibre8"><var class="pcalibre17 pcalibre2 pcalibre1">n</var></sup></td>
<td id="P7000497027000000000000000045953" data-uri="chapter09.xhtml#P7000497027000000000000000045953" class="pcalibre1 pcalibre2 calibre7">Number of addresses in virtual address space</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045954" data-uri="chapter09.xhtml#P7000497027000000000000000045954" class="pcalibre1 pcalibre2 calibre7"><var class="pcalibre17 pcalibre2 pcalibre1">M</var> = 2<sup class="pcalibre1 pcalibre2 calibre8"><var class="pcalibre17 pcalibre2 pcalibre1">m</var></sup></td>
<td id="P7000497027000000000000000045955" data-uri="chapter09.xhtml#P7000497027000000000000000045955" class="pcalibre1 pcalibre2 calibre7">Number of addresses in physical address space</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045956" data-uri="chapter09.xhtml#P7000497027000000000000000045956" class="pcalibre1 pcalibre2 calibre7"><var class="pcalibre17 pcalibre2 pcalibre1">P</var> = 2<i class="pcalibre17 pcalibre2 pcalibre1"><sup class="pcalibre1 pcalibre2 calibre8">p</sup></i></td>
<td id="P7000497027000000000000000045957" data-uri="chapter09.xhtml#P7000497027000000000000000045957" class="pcalibre1 pcalibre2 calibre7">Page size (bytes)</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td colspan="2" id="P7000497027000000000000000045958" data-uri="chapter09.xhtml#P7000497027000000000000000045958" class="pcalibre1 pcalibre2 calibre7">Components of a virtual address (VA)</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045959" data-uri="chapter09.xhtml#P7000497027000000000000000045959" class="pcalibre1 pcalibre2 calibre7">VPO</td>
<td id="P700049702700000000000000004595A" data-uri="chapter09.xhtml#P700049702700000000000000004595A" class="pcalibre1 pcalibre2 calibre7">Virtual page offset (bytes)</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P700049702700000000000000004595B" data-uri="chapter09.xhtml#P700049702700000000000000004595B" class="pcalibre1 pcalibre2 calibre7">VPN</td>
<td id="P700049702700000000000000004595C" data-uri="chapter09.xhtml#P700049702700000000000000004595C" class="pcalibre1 pcalibre2 calibre7">Virtual page number</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P700049702700000000000000004595D" data-uri="chapter09.xhtml#P700049702700000000000000004595D" class="pcalibre1 pcalibre2 calibre7">TLBI</td>
<td id="P700049702700000000000000004595E" data-uri="chapter09.xhtml#P700049702700000000000000004595E" class="pcalibre1 pcalibre2 calibre7">TLB index</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P700049702700000000000000004595F" data-uri="chapter09.xhtml#P700049702700000000000000004595F" class="pcalibre1 pcalibre2 calibre7">TLBT</td>
<td id="P7000497027000000000000000045960" data-uri="chapter09.xhtml#P7000497027000000000000000045960" class="pcalibre1 pcalibre2 calibre7">TLB tag</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td colspan="2" id="P7000497027000000000000000045961" data-uri="chapter09.xhtml#P7000497027000000000000000045961" class="pcalibre1 pcalibre2 calibre7">Components of a physical address (PA)</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045962" data-uri="chapter09.xhtml#P7000497027000000000000000045962" class="pcalibre1 pcalibre2 calibre7">PPO</td>
<td id="P7000497027000000000000000045963" data-uri="chapter09.xhtml#P7000497027000000000000000045963" class="pcalibre1 pcalibre2 calibre7">Physical page offset (bytes)</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045964" data-uri="chapter09.xhtml#P7000497027000000000000000045964" class="pcalibre1 pcalibre2 calibre7">PPN</td>
<td id="P7000497027000000000000000045965" data-uri="chapter09.xhtml#P7000497027000000000000000045965" class="pcalibre1 pcalibre2 calibre7">Physical page number</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045966" data-uri="chapter09.xhtml#P7000497027000000000000000045966" class="pcalibre1 pcalibre2 calibre7">CO</td>
<td id="P7000497027000000000000000045967" data-uri="chapter09.xhtml#P7000497027000000000000000045967" class="pcalibre1 pcalibre2 calibre7">Byte offset within cache block</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045968" data-uri="chapter09.xhtml#P7000497027000000000000000045968" class="pcalibre1 pcalibre2 calibre7">CI</td>
<td id="P7000497027000000000000000045969" data-uri="chapter09.xhtml#P7000497027000000000000000045969" class="pcalibre1 pcalibre2 calibre7">Cache index</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P700049702700000000000000004596A" data-uri="chapter09.xhtml#P700049702700000000000000004596A" class="pcalibre1 pcalibre2 calibre7">CT</td>
<td id="P700049702700000000000000004596B" data-uri="chapter09.xhtml#P700049702700000000000000004596B" class="pcalibre1 pcalibre2 calibre7">Cache tag</td>
</tr>
</tbody>
</table>
<figcaption id="P700049702700000000000000004596C" data-uri="chapter09.xhtml#P700049702700000000000000004596C" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P700049702700000000000000004596D" data-uri="chapter09.xhtml#P700049702700000000000000004596D" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.11 </span>Summary of address translation symbols.</h1></header></figcaption>
</figure>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P700049702700000000000000004596E" data-uri="chapter09.xhtml#P700049702700000000000000004596E">that are important to hardware designers but are beyond our scope. For your reference, <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000070F9"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.11</span></a> summarizes the symbols that we will be using throughout this section.</p>
<p id="P700049702700000000000000004596F" data-uri="chapter09.xhtml#P700049702700000000000000004596F" class="pcalibre8 pcalibre1 pcalibre2">Formally, address translation is a mapping between the elements of an <var class="pcalibre17 pcalibre2 pcalibre1">N</var>-element virtual address space (VAS) and an M-element physical address space (PAS),</p>
<div class="pcalibre1 pcalibre2 informalequation" id="P7000497027000000000000000045970" data-uri="chapter09.xhtml#P7000497027000000000000000045970"><m:math display="block" alttext="" data-uri="" altimg-width="206" altimg-height="16" altimg="../images/ch09-eq4.png"><m:mrow><m:mtext>MAP</m:mtext><m:mo>:</m:mo><m:mtext> </m:mtext><m:mi>V</m:mi><m:mi>A</m:mi><m:mi>S</m:mi><m:mo>→</m:mo><m:mi>P</m:mi><m:mi>A</m:mi><m:mi>S</m:mi><m:mo>∪</m:mo><m:mi>ϕ</m:mi></m:mrow></m:math></div>
<p class="pcalibre8 pcalibre1 pcalibre2" id="P7000497027000000000000000045971" data-uri="chapter09.xhtml#P7000497027000000000000000045971">where</p>
<div class="pcalibre1 pcalibre2 informalequation" id="P7000497027000000000000000045972" data-uri="chapter09.xhtml#P7000497027000000000000000045972"><m:math display="block" alttext="" data-uri="" altimg-width="728" altimg-height="50" altimg="../images/ch09-eq5.png"><m:mrow><m:mtext>MAP</m:mtext><m:mo stretchy="false">(</m:mo><m:mi>A</m:mi><m:mo stretchy="false">)</m:mo><m:mo>=</m:mo><m:mrow><m:mo>{</m:mo> <m:mrow><m:mtable columnalign="left"><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>A</m:mi><m:mo>'</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mtext>if data at virtual addr</m:mtext><m:mtext>. </m:mtext><m:mi>A</m:mi><m:mtext> are present at physical addr</m:mtext><m:mtext>. </m:mtext><m:mi>A</m:mi><m:mo>'</m:mo><m:mtext> in PAS</m:mtext></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mi>ϕ</m:mi></m:mtd><m:mtd columnalign="left"><m:mrow><m:mtext>if data at virtual addr</m:mtext><m:mtext>. </m:mtext><m:mi>A</m:mi><m:mtext> are not present in physical memory</m:mtext></m:mrow></m:mtd></m:mtr></m:mtable></m:mrow> </m:mrow></m:mrow></m:math></div>
<p id="P7000497027000000000000000045973" data-uri="chapter09.xhtml#P7000497027000000000000000045973" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007121"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.12</span></a> shows how the MMU uses the page table to perform this mapping. A control register in the CPU, the <i class="pcalibre17 pcalibre2 pcalibre1">page table base register (PTBR)</i> points to the current page table. The <var class="pcalibre17 pcalibre2 pcalibre1">n</var>-bit virtual address has two components: a <var class="pcalibre17 pcalibre2 pcalibre1">p</var>-bit <i class="pcalibre17 pcalibre2 pcalibre1">virtual page offset (VPO)</i> and an <i class="pcalibre17 pcalibre2 pcalibre1">(n -- p)</i>-bit <i class="pcalibre17 pcalibre2 pcalibre1">virtual page number (VPN).</i> The MMU uses the VPN to select the appropriate PTE. For example, VPN 0 selects PTE 0, VPN 1 selects PTE 1, and so on. The corresponding physical address is the concatenation of the <i class="pcalibre17 pcalibre2 pcalibre1">physical page number (PPN)</i> from the page table entry and the VPO from the virtual address. Notice that since the physical and virtual pages are both <var class="pcalibre17 pcalibre2 pcalibre1">P</var> bytes, the <i class="pcalibre17 pcalibre2 pcalibre1">physical page offset (PPO)</i> is identical to the VPO.</p>
<figure id="P7000497027000000000000000007121" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P7000497027000000000000000007121">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007122" title="815" data-uri="chapter09.xhtml#P7000497027000000000000000007122" epub:type="pagebreak"></span>
<img alt="A diagram illustrates address translation with a page table." id="P7000497027000000000000000045974" data-uri="P700049702700000000000000000B783" src="../images/p815-1.png" class="pcalibre1 pcalibre2 calibre68"/>
<figcaption id="P7000497027000000000000000045975" data-uri="chapter09.xhtml#P7000497027000000000000000045975" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000045976" data-uri="chapter09.xhtml#P7000497027000000000000000045976" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.12 </span>Address translation with a page table.</h1></header>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025CB2" data-uri="chapter09.xhtml#P7000497027000000000000000025CB2">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000045977" data-uri="chapter09.xhtml#P7000497027000000000000000045977" class="pcalibre8 pcalibre1 pcalibre2">A diagram shows a page table with four registers, each with columns for Valid and Physical page number (PPN). The first register is the page table base register (PTBR). The second register is highlighted, with details summarized below.</p>
<ul id="P7000497027000000000000000045978" data-uri="chapter09.xhtml#P7000497027000000000000000045978" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P7000497027000000000000000045979" data-uri="chapter09.xhtml#P7000497027000000000000000045979" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004597A" data-uri="chapter09.xhtml#P700049702700000000000000004597A" class="pcalibre1 pcalibre2 pcalibre10">Valid: if valid = 0, then page not in memory (page fault)</p></li>
<li id="P700049702700000000000000004597B" data-uri="chapter09.xhtml#P700049702700000000000000004597B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004597C" data-uri="chapter09.xhtml#P700049702700000000000000004597C" class="pcalibre1 pcalibre2 pcalibre10">Virtual address:</p>
<ul id="P700049702700000000000000004597D" data-uri="chapter09.xhtml#P700049702700000000000000004597D" class="pcalibre1 pcalibre2 pcalibre69">
<li id="P700049702700000000000000004597E" data-uri="chapter09.xhtml#P700049702700000000000000004597E" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000004597F" data-uri="chapter09.xhtml#P700049702700000000000000004597F" class="pcalibre1 pcalibre2 pcalibre10">From n minus 1 to p is virtual page number (VPN). The VPN acts as an index into the page table.</p></li>
<li id="P7000497027000000000000000045980" data-uri="chapter09.xhtml#P7000497027000000000000000045980" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045981" data-uri="chapter09.xhtml#P7000497027000000000000000045981" class="pcalibre1 pcalibre2 pcalibre10">From p minus 1 to 0 is virtual page offset (VPO).</p></li>
</ul></li>
<li id="P7000497027000000000000000045982" data-uri="chapter09.xhtml#P7000497027000000000000000045982" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045983" data-uri="chapter09.xhtml#P7000497027000000000000000045983" class="pcalibre1 pcalibre2 pcalibre10">Physical address:</p>
<ul id="P7000497027000000000000000045984" data-uri="chapter09.xhtml#P7000497027000000000000000045984" class="pcalibre1 pcalibre2 pcalibre69">
<li id="P7000497027000000000000000045985" data-uri="chapter09.xhtml#P7000497027000000000000000045985" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045986" data-uri="chapter09.xhtml#P7000497027000000000000000045986" class="pcalibre1 pcalibre2 pcalibre10">From m minus 1 to p is physical page number (PPN), from page table</p></li>
<li id="P7000497027000000000000000045987" data-uri="chapter09.xhtml#P7000497027000000000000000045987" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045988" data-uri="chapter09.xhtml#P7000497027000000000000000045988" class="pcalibre1 pcalibre2 pcalibre10">From p minus 1 to 0 is physical page offset (PPO), from VPO in virtual address</p></li>
</ul></li>
</ul></details>
</figcaption>
</figure>
<p id="P7000497027000000000000000045989" data-uri="chapter09.xhtml#P7000497027000000000000000045989" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P700049702700000000000000000713C"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.13(a)</span></a> shows the steps that the CPU hardware performs when there is a page hit.</p>
<ol class="pcalibre1 pcalibre2 pcalibre235" id="P700049702700000000000000004598A" data-uri="chapter09.xhtml#P700049702700000000000000004598A">
<li class="pcalibre39 pcalibre2 pcalibre1" id="P700049702700000000000000004598B" data-uri="chapter09.xhtml#P700049702700000000000000004598B"><p id="P700049702700000000000000004598C" data-uri="chapter09.xhtml#P700049702700000000000000004598C" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">1. </span>The processor generates a virtual address and sends it to the MMU.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P700049702700000000000000004598D" data-uri="chapter09.xhtml#P700049702700000000000000004598D"><p id="P700049702700000000000000004598E" data-uri="chapter09.xhtml#P700049702700000000000000004598E" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">2. </span>The MMU generates the PTE address and requests it from the cache/main memory.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P700049702700000000000000004598F" data-uri="chapter09.xhtml#P700049702700000000000000004598F"><p id="P7000497027000000000000000045990" data-uri="chapter09.xhtml#P7000497027000000000000000045990" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">3. </span>The cache/main memory returns the PTE to the MMU.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045991" data-uri="chapter09.xhtml#P7000497027000000000000000045991"><p id="P7000497027000000000000000045992" data-uri="chapter09.xhtml#P7000497027000000000000000045992" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">4. </span>The MMU constructs the physical address and sends it to the cache/main memory.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045993" data-uri="chapter09.xhtml#P7000497027000000000000000045993"><p id="P7000497027000000000000000045994" data-uri="chapter09.xhtml#P7000497027000000000000000045994" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">5. </span>The cache/main memory returns the requested data word to the processor.</p></li>
</ol>
<p id="P7000497027000000000000000045995" data-uri="chapter09.xhtml#P7000497027000000000000000045995" class="pcalibre8 pcalibre1 pcalibre2">Unlike a page hit, which is handled entirely by hardware, handling a page fault requires cooperation between hardware and the operating system kernel (<a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P700049702700000000000000000713C"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.13(b)</span></a>).</p>
<ol class="pcalibre1 pcalibre2 pcalibre235" id="P7000497027000000000000000045996" data-uri="chapter09.xhtml#P7000497027000000000000000045996">
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045997" data-uri="chapter09.xhtml#P7000497027000000000000000045997"><p id="P7000497027000000000000000045998" data-uri="chapter09.xhtml#P7000497027000000000000000045998" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Steps </span><span class="pcalibre1 pcalibre21 pcalibre2">1 to 3. </span>The same as steps 1 to 3 in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P700049702700000000000000000713C"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.13(a)</span></a>.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045999" data-uri="chapter09.xhtml#P7000497027000000000000000045999"><p id="P700049702700000000000000004599A" data-uri="chapter09.xhtml#P700049702700000000000000004599A" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">4. </span>The valid bit in the PTE is zero, so the MMU triggers an exception, which transfers control in the CPU to a page fault exception handler in the operating system kernel.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P700049702700000000000000004599B" data-uri="chapter09.xhtml#P700049702700000000000000004599B"><p id="P700049702700000000000000004599C" data-uri="chapter09.xhtml#P700049702700000000000000004599C" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">5. </span>The fault handler identifies a victim page in physical memory, and if that page has been modified, pages it out to disk.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P700049702700000000000000004599D" data-uri="chapter09.xhtml#P700049702700000000000000004599D"><p id="P700049702700000000000000004599E" data-uri="chapter09.xhtml#P700049702700000000000000004599E" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">6. </span>The fault handler pages in the new page and updates the PTE in memory.</p>
<figure id="P700049702700000000000000000713C" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P700049702700000000000000000713C">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P700049702700000000000000000713D" title="816" data-uri="chapter09.xhtml#P700049702700000000000000000713D" epub:type="pagebreak"></span>
<img alt="Diagrams illustrate page hit and page fault." id="P700049702700000000000000004599F" data-uri="P700049702700000000000000000B784" src="../images/p816-1.png" class="pcalibre1 pcalibre2 pcalibre265"/>
<figcaption id="P70004970270000000000000000459A0" data-uri="chapter09.xhtml#P70004970270000000000000000459A0" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P70004970270000000000000000459A1" data-uri="chapter09.xhtml#P70004970270000000000000000459A1" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.13 </span>Operational view of page hits and page faults.</h1></header><div class="pcalibre1 pcalibre2 pcalibre7" id="P70004970270000000000000000459A2" data-uri="chapter09.xhtml#P70004970270000000000000000459A2"><p id="P70004970270000000000000000459A3" data-uri="chapter09.xhtml#P70004970270000000000000000459A3" class="pcalibre1 pcalibre2 pcalibre10">VA: virtual address. PTEA: page table entry address. PTE: page table entry. PA: physical address.</p></div>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025CE0" data-uri="chapter09.xhtml#P7000497027000000000000000025CE0">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<ol class="pcalibre1 pcalibre2 pcalibre141" id="P70004970270000000000000000459A4" data-uri="chapter09.xhtml#P70004970270000000000000000459A4">
<li id="P70004970270000000000000000459A5" data-uri="chapter09.xhtml#P70004970270000000000000000459A5" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459A6" data-uri="chapter09.xhtml#P70004970270000000000000000459A6" class="pcalibre1 pcalibre2 pcalibre10">Page hit:</p>
<ol id="P70004970270000000000000000459A7" data-uri="chapter09.xhtml#P70004970270000000000000000459A7" class="pcalibre75 pcalibre2 pcalibre1">
<li id="P70004970270000000000000000459A8" data-uri="chapter09.xhtml#P70004970270000000000000000459A8" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459A9" data-uri="chapter09.xhtml#P70004970270000000000000000459A9" class="pcalibre1 pcalibre2 pcalibre10">VA from processor to MMU within CPU chip</p></li>
<li id="P70004970270000000000000000459AA" data-uri="chapter09.xhtml#P70004970270000000000000000459AA" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459AB" data-uri="chapter09.xhtml#P70004970270000000000000000459AB" class="pcalibre1 pcalibre2 pcalibre10">PTEA from MMU to cache/memory</p></li>
<li id="P70004970270000000000000000459AC" data-uri="chapter09.xhtml#P70004970270000000000000000459AC" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459AD" data-uri="chapter09.xhtml#P70004970270000000000000000459AD" class="pcalibre1 pcalibre2 pcalibre10">PTE from cache/memory to MMU</p></li>
<li id="P70004970270000000000000000459AE" data-uri="chapter09.xhtml#P70004970270000000000000000459AE" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459AF" data-uri="chapter09.xhtml#P70004970270000000000000000459AF" class="pcalibre1 pcalibre2 pcalibre10">PA from MMU to cache/memory</p></li>
<li id="P70004970270000000000000000459B0" data-uri="chapter09.xhtml#P70004970270000000000000000459B0" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459B1" data-uri="chapter09.xhtml#P70004970270000000000000000459B1" class="pcalibre1 pcalibre2 pcalibre10">Data from cache/memory to processor</p></li>
</ol></li>
<li id="P70004970270000000000000000459B2" data-uri="chapter09.xhtml#P70004970270000000000000000459B2" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459B3" data-uri="chapter09.xhtml#P70004970270000000000000000459B3" class="pcalibre1 pcalibre2 pcalibre10">Page fault:</p>
<ol id="P70004970270000000000000000459B4" data-uri="chapter09.xhtml#P70004970270000000000000000459B4" class="pcalibre75 pcalibre2 pcalibre1">
<li id="P70004970270000000000000000459B5" data-uri="chapter09.xhtml#P70004970270000000000000000459B5" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459B6" data-uri="chapter09.xhtml#P70004970270000000000000000459B6" class="pcalibre1 pcalibre2 pcalibre10">VA from processor to MMU within CPU chip</p></li>
<li id="P70004970270000000000000000459B7" data-uri="chapter09.xhtml#P70004970270000000000000000459B7" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459B8" data-uri="chapter09.xhtml#P70004970270000000000000000459B8" class="pcalibre1 pcalibre2 pcalibre10">PTEA from MMU to cache/memory</p></li>
<li id="P70004970270000000000000000459B9" data-uri="chapter09.xhtml#P70004970270000000000000000459B9" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459BA" data-uri="chapter09.xhtml#P70004970270000000000000000459BA" class="pcalibre1 pcalibre2 pcalibre10">PTE from cache/memory to MMU</p></li>
<li id="P70004970270000000000000000459BB" data-uri="chapter09.xhtml#P70004970270000000000000000459BB" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459BC" data-uri="chapter09.xhtml#P70004970270000000000000000459BC" class="pcalibre1 pcalibre2 pcalibre10">Exception from MMU to page fault exception handler (to victim page below)</p></li>
<li id="P70004970270000000000000000459BD" data-uri="chapter09.xhtml#P70004970270000000000000000459BD" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459BE" data-uri="chapter09.xhtml#P70004970270000000000000000459BE" class="pcalibre1 pcalibre2 pcalibre10">Victim page from cache/memory to disk</p></li>
<li id="P70004970270000000000000000459BF" data-uri="chapter09.xhtml#P70004970270000000000000000459BF" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459C0" data-uri="chapter09.xhtml#P70004970270000000000000000459C0" class="pcalibre1 pcalibre2 pcalibre10">New page from disk to cache/memory</p></li>
<li id="P70004970270000000000000000459C1" data-uri="chapter09.xhtml#P70004970270000000000000000459C1" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459C2" data-uri="chapter09.xhtml#P70004970270000000000000000459C2" class="pcalibre1 pcalibre2 pcalibre10">VA from processor to MMU</p></li>
</ol></li></ol>
</details>
</figcaption>
</figure></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P70004970270000000000000000459C3" data-uri="chapter09.xhtml#P70004970270000000000000000459C3"><p id="P70004970270000000000000000459C4" data-uri="chapter09.xhtml#P70004970270000000000000000459C4" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step </span><span class="pcalibre1 pcalibre21 pcalibre2">7. </span>The fault handler returns to the original process, causing the faulting instruction to be restarted. The CPU resends the offending virtual address to the MMU. Because the virtual page is now cached in physical memory, there is a hit, and after the MMU performs the steps in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P700049702700000000000000000713C"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.13(a)</span></a>, the main memory returns the requested word to the processor.</p></li>
</ol>
<section id="P7000497027000000000000000007145" data-uri="chapter09.xhtml#P7000497027000000000000000007145" epub:type="practice" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P70004970270000000000000000459C5" data-uri="chapter09.xhtml#P70004970270000000000000000459C5" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">Practice Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">9.3 </span>(solution page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP700049702700000000000000000777C.xhtml#P7000497027000000000000000007785">881</a>)</h1></header>
<ol class="pcalibre1 pcalibre2 pcalibre77" id="P70004970270000000000000000459C6" data-uri="chapter09.xhtml#P70004970270000000000000000459C6">
<li class="pcalibre1 pcalibre2 pcalibre78" id="P70004970270000000000000000459C7" data-uri="chapter09.xhtml#P70004970270000000000000000459C7">
<div class="pcalibre1 pcalibre2 pcalibre7" id="P70004970270000000000000000459C8" data-uri="chapter09.xhtml#P70004970270000000000000000459C8"><p id="P70004970270000000000000000459C9" data-uri="chapter09.xhtml#P70004970270000000000000000459C9" class="pcalibre1 pcalibre2 pcalibre10">Given a 32-bit virtual address space and a 24-bit physical address, determine the number of bits in the VPN, VPO, PPN, and PPO for the following page sizes <i class="pcalibre17 pcalibre2 pcalibre1">P:</i></p>
<table id="P70004970270000000000000000459CA" data-uri="chapter09.xhtml#P70004970270000000000000000459CA" class="pcalibre1 pcalibre2 pcalibre43">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th rowspan="2" id="P70004970270000000000000000459CB" data-uri="chapter09.xhtml#P70004970270000000000000000459CB" class="pcalibre1 pcalibre2 calibre5"><var class="pcalibre17 pcalibre2 pcalibre1">P</var></th>
<th colspan="4" id="P70004970270000000000000000459CC" data-uri="chapter09.xhtml#P70004970270000000000000000459CC" class="pcalibre1 pcalibre2 calibre5">Number of</th>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P70004970270000000000000000459CD" data-uri="chapter09.xhtml#P70004970270000000000000000459CD" class="pcalibre1 pcalibre2 calibre5">VPN bits</th>
<th id="P70004970270000000000000000459CE" data-uri="chapter09.xhtml#P70004970270000000000000000459CE" class="pcalibre1 pcalibre2 calibre5">VPO bits</th>
<th id="P70004970270000000000000000459CF" data-uri="chapter09.xhtml#P70004970270000000000000000459CF" class="pcalibre1 pcalibre2 calibre5">PPN bits</th>
<th id="P70004970270000000000000000459D0" data-uri="chapter09.xhtml#P70004970270000000000000000459D0" class="pcalibre1 pcalibre2 calibre5">PPO bits</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P70004970270000000000000000459D1" data-uri="chapter09.xhtml#P70004970270000000000000000459D1" class="pcalibre1 pcalibre2 calibre7">1 KB</td>
<td id="P70004970270000000000000000459D2" data-uri="chapter09.xhtml#P70004970270000000000000000459D2" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459D3" data-uri="chapter09.xhtml#P70004970270000000000000000459D3" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459D4" data-uri="chapter09.xhtml#P70004970270000000000000000459D4" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459D5" data-uri="chapter09.xhtml#P70004970270000000000000000459D5" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P70004970270000000000000000459D6" data-uri="chapter09.xhtml#P70004970270000000000000000459D6" class="pcalibre1 pcalibre2 calibre7">2 KB</td>
<td id="P70004970270000000000000000459D7" data-uri="chapter09.xhtml#P70004970270000000000000000459D7" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459D8" data-uri="chapter09.xhtml#P70004970270000000000000000459D8" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459D9" data-uri="chapter09.xhtml#P70004970270000000000000000459D9" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459DA" data-uri="chapter09.xhtml#P70004970270000000000000000459DA" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P70004970270000000000000000459DB" data-uri="chapter09.xhtml#P70004970270000000000000000459DB" class="pcalibre1 pcalibre2 calibre7">4 KB</td>
<td id="P70004970270000000000000000459DC" data-uri="chapter09.xhtml#P70004970270000000000000000459DC" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459DD" data-uri="chapter09.xhtml#P70004970270000000000000000459DD" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459DE" data-uri="chapter09.xhtml#P70004970270000000000000000459DE" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459DF" data-uri="chapter09.xhtml#P70004970270000000000000000459DF" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P70004970270000000000000000459E0" data-uri="chapter09.xhtml#P70004970270000000000000000459E0" class="pcalibre1 pcalibre2 calibre7">8 KB</td>
<td id="P70004970270000000000000000459E1" data-uri="chapter09.xhtml#P70004970270000000000000000459E1" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459E2" data-uri="chapter09.xhtml#P70004970270000000000000000459E2" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459E3" data-uri="chapter09.xhtml#P70004970270000000000000000459E3" class="pcalibre1 pcalibre2 calibre7">_____</td>
<td id="P70004970270000000000000000459E4" data-uri="chapter09.xhtml#P70004970270000000000000000459E4" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
</tbody>
</table>
</div></li></ol>
</section>
<figure id="P7000497027000000000000000007166" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P7000497027000000000000000007166">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007167" title="817" data-uri="chapter09.xhtml#P7000497027000000000000000007167" epub:type="pagebreak"></span>
<img alt="A diagram illustrates integrating VM with a physically addressed cache." id="P70004970270000000000000000459E5" data-uri="P700049702700000000000000000B785" src="../images/p817-1.png" class="pcalibre266 pcalibre1 pcalibre2"/>
<figcaption id="P70004970270000000000000000459E6" data-uri="chapter09.xhtml#P70004970270000000000000000459E6" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P70004970270000000000000000459E7" data-uri="chapter09.xhtml#P70004970270000000000000000459E7" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.14 </span>Integrating VM with a physically addressed cache.</h1></header><div class="pcalibre1 pcalibre2 pcalibre7" id="P70004970270000000000000000459E8" data-uri="chapter09.xhtml#P70004970270000000000000000459E8"><p id="P70004970270000000000000000459E9" data-uri="chapter09.xhtml#P70004970270000000000000000459E9" class="pcalibre1 pcalibre2 pcalibre10">VA: virtual address. PTEA: page table entry address. PTE: page table entry. PA: physical address.</p></div>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025D27" data-uri="chapter09.xhtml#P7000497027000000000000000025D27">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P70004970270000000000000000459EA" data-uri="chapter09.xhtml#P70004970270000000000000000459EA" class="pcalibre8 pcalibre1 pcalibre2">A diagram shows paths, as summarized below.</p>
<ul id="P70004970270000000000000000459EB" data-uri="chapter09.xhtml#P70004970270000000000000000459EB" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P70004970270000000000000000459EC" data-uri="chapter09.xhtml#P70004970270000000000000000459EC" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459ED" data-uri="chapter09.xhtml#P70004970270000000000000000459ED" class="pcalibre1 pcalibre2 pcalibre10">VA from processor to MMU within CPU chip</p></li>
<li id="P70004970270000000000000000459EE" data-uri="chapter09.xhtml#P70004970270000000000000000459EE" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459EF" data-uri="chapter09.xhtml#P70004970270000000000000000459EF" class="pcalibre1 pcalibre2 pcalibre10">PTEA and PA from MMU to L1 cache</p></li>
<li id="P70004970270000000000000000459F0" data-uri="chapter09.xhtml#P70004970270000000000000000459F0" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459F1" data-uri="chapter09.xhtml#P70004970270000000000000000459F1" class="pcalibre1 pcalibre2 pcalibre10">From L1 cache, PTEA miss and PA miss to Memory, which sends back PTE and Data, respectively</p></li>
<li id="P70004970270000000000000000459F2" data-uri="chapter09.xhtml#P70004970270000000000000000459F2" class="pcalibre39 pcalibre2 pcalibre1"><p id="P70004970270000000000000000459F3" data-uri="chapter09.xhtml#P70004970270000000000000000459F3" class="pcalibre1 pcalibre2 pcalibre10">From L1 cache, PTE from PTEA hit to MMU and Data from PA hit to processor</p></li>
</ul>
</details>
</figcaption>
</figure>
<section id="P700049702700000000000000000716D" data-uri="chapter09.xhtml#P700049702700000000000000000716D" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P70004970270000000000000000459F4" data-uri="chapter09.xhtml#P70004970270000000000000000459F4" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">9.6.1 </span>Integrating Caches and VM</h1></header>
<p id="P70004970270000000000000000459F5" data-uri="chapter09.xhtml#P70004970270000000000000000459F5" class="pcalibre8 pcalibre1 pcalibre2">In any system that uses both virtual memory and SRAM caches, there is the issue of whether to use virtual or physical addresses to access the SRAM cache. Although a detailed discussion of the trade-offs is beyond our scope here, most systems opt for physical addressing. With physical addressing, it is straightforward for multiple processes to have blocks in the cache at the same time and to share blocks from the same virtual pages. Further, the cache does not have to deal with protection issues, because access rights are checked as part of the address translation process.</p>
<p id="P70004970270000000000000000459F6" data-uri="chapter09.xhtml#P70004970270000000000000000459F6" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007166"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.14</span></a> shows how a physically addressed cache might be integrated with virtual memory. The main idea is that the address translation occurs before the cache lookup. Notice that page table entries can be cached, just like any other data words.</p>
</section>
<section id="P7000497027000000000000000007171" data-uri="chapter09.xhtml#P7000497027000000000000000007171" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P70004970270000000000000000459F7" data-uri="chapter09.xhtml#P70004970270000000000000000459F7" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">9.6.2 </span>Speeding Up Address Translation with a TLB</h1></header>
<p id="P70004970270000000000000000459F8" data-uri="chapter09.xhtml#P70004970270000000000000000459F8" class="pcalibre8 pcalibre1 pcalibre2">As we have seen, every time the CPU generates a virtual address, the MMU must refer to a PTE in order to translate the virtual address into a physical address. In the worst case, this requires an additional fetch from memory, at a cost of tens to hundreds of cycles. If the PTE happens to be cached in L1, then the cost goes down to a handful of cycles. However, many systems try to eliminate even this cost by including a small cache of PTEs in the MMU called a <i class="pcalibre17 pcalibre2 pcalibre1">translation lookaside buffer (TLB).</i></p>
<p id="P70004970270000000000000000459F9" data-uri="chapter09.xhtml#P70004970270000000000000000459F9" class="pcalibre8 pcalibre1 pcalibre2">A TLB is a small, virtually addressed cache where each line holds a block consisting of a single PTE. A TLB usually has a high degree of associativity. As shown in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007175"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.15</span></a>, the index and tag fields that are used for set selection and line matching are extracted from the virtual page number in the virtual address. If the TLB has <var class="pcalibre17 pcalibre2 pcalibre1">T</var> = 2<i class="pcalibre17 pcalibre2 pcalibre1"><sup class="pcalibre1 pcalibre2 pcalibre85">t</sup></i> sets, then the <i class="pcalibre17 pcalibre2 pcalibre1">TLB index (TLBI)</i> consists of the <var class="pcalibre17 pcalibre2 pcalibre1">t</var> least significant bits of the VPN, and the <i class="pcalibre17 pcalibre2 pcalibre1">TLB tag (TLBT)</i> consists of the remaining bits in the VPN.</p>
<figure id="P7000497027000000000000000007175" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P7000497027000000000000000007175">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007176" title="818" data-uri="chapter09.xhtml#P7000497027000000000000000007176" epub:type="pagebreak"></span>
<img alt="Virtual address components include: VPN, divided into TLB tag (TLBT) from n minus 1 to p+t and TLB index (TLBI) from p+t minus 1 to p; and VPO from p minus 1 to 0." id="P70004970270000000000000000459FA" data-uri="P700049702700000000000000000B786" src="../images/p818-1.png" class="pcalibre1 pcalibre2 calibre69"/>
<figcaption id="P70004970270000000000000000459FB" data-uri="chapter09.xhtml#P70004970270000000000000000459FB" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P70004970270000000000000000459FC" data-uri="chapter09.xhtml#P70004970270000000000000000459FC" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.15 </span>Components of a virtual address that are used to access the TLB.</h1></header></figcaption>
</figure>
<figure id="P700049702700000000000000000717A" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P700049702700000000000000000717A">
<img alt="Diagrams illustrate TLB hit and TLB miss." id="P70004970270000000000000000459FD" data-uri="P700049702700000000000000000B787" src="../images/p818-2.png" class="calibre70 pcalibre2 pcalibre1"/>
<figcaption id="P70004970270000000000000000459FE" data-uri="chapter09.xhtml#P70004970270000000000000000459FE" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P70004970270000000000000000459FF" data-uri="chapter09.xhtml#P70004970270000000000000000459FF" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.16 </span>Operational view of a TLB hit and miss.</h1></header>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025D3E" data-uri="chapter09.xhtml#P7000497027000000000000000025D3E">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<ol class="pcalibre1 pcalibre2 pcalibre141" id="P7000497027000000000000000045A00" data-uri="chapter09.xhtml#P7000497027000000000000000045A00">
<li id="P7000497027000000000000000045A01" data-uri="chapter09.xhtml#P7000497027000000000000000045A01" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A02" data-uri="chapter09.xhtml#P7000497027000000000000000045A02" class="pcalibre1 pcalibre2 pcalibre10">TLB hit:</p>
<ol id="P7000497027000000000000000045A03" data-uri="chapter09.xhtml#P7000497027000000000000000045A03" class="pcalibre75 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000045A04" data-uri="chapter09.xhtml#P7000497027000000000000000045A04" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A05" data-uri="chapter09.xhtml#P7000497027000000000000000045A05" class="pcalibre1 pcalibre2 pcalibre10">VA from processor to translation within CPU chip</p></li>
<li id="P7000497027000000000000000045A06" data-uri="chapter09.xhtml#P7000497027000000000000000045A06" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A07" data-uri="chapter09.xhtml#P7000497027000000000000000045A07" class="pcalibre1 pcalibre2 pcalibre10">VPN from translation to TLB in CPU chip</p></li>
<li id="P7000497027000000000000000045A08" data-uri="chapter09.xhtml#P7000497027000000000000000045A08" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A09" data-uri="chapter09.xhtml#P7000497027000000000000000045A09" class="pcalibre1 pcalibre2 pcalibre10">PTE from TLB to translation</p></li>
<li id="P7000497027000000000000000045A0A" data-uri="chapter09.xhtml#P7000497027000000000000000045A0A" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A0B" data-uri="chapter09.xhtml#P7000497027000000000000000045A0B" class="pcalibre1 pcalibre2 pcalibre10">PA from translation to cache/memory</p></li>
<li id="P7000497027000000000000000045A0C" data-uri="chapter09.xhtml#P7000497027000000000000000045A0C" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A0D" data-uri="chapter09.xhtml#P7000497027000000000000000045A0D" class="pcalibre1 pcalibre2 pcalibre10">Data from cache/memory to processor</p></li>
</ol></li>
<li id="P7000497027000000000000000045A0E" data-uri="chapter09.xhtml#P7000497027000000000000000045A0E" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A0F" data-uri="chapter09.xhtml#P7000497027000000000000000045A0F" class="pcalibre1 pcalibre2 pcalibre10">TLB miss</p>
<ol id="P7000497027000000000000000045A10" data-uri="chapter09.xhtml#P7000497027000000000000000045A10" class="pcalibre75 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000045A11" data-uri="chapter09.xhtml#P7000497027000000000000000045A11" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A12" data-uri="chapter09.xhtml#P7000497027000000000000000045A12" class="pcalibre1 pcalibre2 pcalibre10">VA from processor to translation within CPU chip</p></li>
<li id="P7000497027000000000000000045A13" data-uri="chapter09.xhtml#P7000497027000000000000000045A13" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A14" data-uri="chapter09.xhtml#P7000497027000000000000000045A14" class="pcalibre1 pcalibre2 pcalibre10">VPN from translation to TLB in CPU chip</p></li>
<li id="P7000497027000000000000000045A15" data-uri="chapter09.xhtml#P7000497027000000000000000045A15" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A16" data-uri="chapter09.xhtml#P7000497027000000000000000045A16" class="pcalibre1 pcalibre2 pcalibre10">PTEA from translation to cache/memory</p></li>
<li id="P7000497027000000000000000045A17" data-uri="chapter09.xhtml#P7000497027000000000000000045A17" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A18" data-uri="chapter09.xhtml#P7000497027000000000000000045A18" class="pcalibre1 pcalibre2 pcalibre10">PTE from cache/memory to between TLB and translation</p></li>
<li id="P7000497027000000000000000045A19" data-uri="chapter09.xhtml#P7000497027000000000000000045A19" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A1A" data-uri="chapter09.xhtml#P7000497027000000000000000045A1A" class="pcalibre1 pcalibre2 pcalibre10">PA from translation to cache/memory</p></li>
<li id="P7000497027000000000000000045A1B" data-uri="chapter09.xhtml#P7000497027000000000000000045A1B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A1C" data-uri="chapter09.xhtml#P7000497027000000000000000045A1C" class="pcalibre1 pcalibre2 pcalibre10">Data from cache/memory to processor</p></li>
</ol></li>
</ol>
</details>
</figcaption>
</figure>
<p id="P7000497027000000000000000045A1D" data-uri="chapter09.xhtml#P7000497027000000000000000045A1D" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P700049702700000000000000000717A"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.16(a)</span></a> shows the steps involved when there is a TLB hit (the usual case). The key point here is that all of the address translation steps are performed inside the on-chip MMU and thus are fast.</p>
<ol class="pcalibre1 pcalibre2 pcalibre235" id="P7000497027000000000000000045A1E" data-uri="chapter09.xhtml#P7000497027000000000000000045A1E">
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045A1F" data-uri="chapter09.xhtml#P7000497027000000000000000045A1F"><p id="P7000497027000000000000000045A20" data-uri="chapter09.xhtml#P7000497027000000000000000045A20" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step 1. </span>The CPU generates a virtual address.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045A21" data-uri="chapter09.xhtml#P7000497027000000000000000045A21"><p id="P7000497027000000000000000045A22" data-uri="chapter09.xhtml#P7000497027000000000000000045A22" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Steps 2 and 3. </span>The MMU fetches the appropriate PTE from the TLB.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045A23" data-uri="chapter09.xhtml#P7000497027000000000000000045A23"><p id="P7000497027000000000000000045A24" data-uri="chapter09.xhtml#P7000497027000000000000000045A24" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007186" title="819" data-uri="chapter09.xhtml#P7000497027000000000000000007186" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre21 pcalibre2">Step 4. </span>The MMU translates the virtual address to a physical address and sends it to the cache/main memory.</p></li>
<li class="pcalibre39 pcalibre2 pcalibre1" id="P7000497027000000000000000045A25" data-uri="chapter09.xhtml#P7000497027000000000000000045A25"><p id="P7000497027000000000000000045A26" data-uri="chapter09.xhtml#P7000497027000000000000000045A26" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre21 pcalibre2">Step 5. </span>The cache/main memory returns the requested data word to the CPU.</p></li>
</ol>
<p id="P7000497027000000000000000045A27" data-uri="chapter09.xhtml#P7000497027000000000000000045A27" class="pcalibre8 pcalibre1 pcalibre2">When there is a TLB miss, then the MMU must fetch the PTE from the L1 cache, as shown in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P700049702700000000000000000717A"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.16(b)</span></a>. The newly fetched PTE is stored in the TLB, possibly overwriting an existing entry.</p>
</section>
<section id="P700049702700000000000000000718A" data-uri="chapter09.xhtml#P700049702700000000000000000718A" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P7000497027000000000000000045A28" data-uri="chapter09.xhtml#P7000497027000000000000000045A28" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">9.6.3 </span>Multi-Level Page Tables</h1></header>
<p id="P7000497027000000000000000045A29" data-uri="chapter09.xhtml#P7000497027000000000000000045A29" class="pcalibre8 pcalibre1 pcalibre2">Thus far, we have assumed that the system uses a single page table to do address translation. But if we had a 32-bit address space, 4 KB pages, and a 4-byte PTE, then we would need a 4 MB page table resident in memory at all times, even if the application referenced only a small chunk of the virtual address space. The problem is compounded for systems with 64-bit address spaces.</p>
<p id="P7000497027000000000000000045A2A" data-uri="chapter09.xhtml#P7000497027000000000000000045A2A" class="pcalibre8 pcalibre1 pcalibre2">The common approach for compacting the page table is to use a hierarchy of page tables instead. The idea is easiest to understand with a concrete example. Consider a 32-bit virtual address space partitioned into 4 KB pages, with page table entries that are 4 bytes each. Suppose also that at this point in time the virtual address space has the following form: The first 2 K pages of memory are allocated for code and data, the next 6 K pages are unallocated, the next 1,023 pages are also unallocated, and the next page is allocated for the user stack. <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007192"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.17</span></a> shows how we might construct a two-level page table hierarchy for this virtual address space.</p>
<p id="P7000497027000000000000000045A2B" data-uri="chapter09.xhtml#P7000497027000000000000000045A2B" class="pcalibre8 pcalibre1 pcalibre2">Each PTE in the level 1 table is responsible for mapping a 4 MB chunk of the virtual address space, where each chunk consists of 1,024 contiguous pages. For example, PTE 0 maps the first chunk, PTE 1 the next chunk, and so on. Given that the address space is 4 GB, 1,024 PTEs are sufficient to cover the entire space.</p>
<p id="P7000497027000000000000000045A2C" data-uri="chapter09.xhtml#P7000497027000000000000000045A2C" class="pcalibre8 pcalibre1 pcalibre2">If every page in chunk <var class="pcalibre17 pcalibre2 pcalibre1">i</var> is unallocated, then level 1 PTE <var class="pcalibre17 pcalibre2 pcalibre1">i</var> is null. For example, in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007192"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.17</span></a>, chunks 2--7 are unallocated. However, if at least one page in chunk <var class="pcalibre17 pcalibre2 pcalibre1">i</var> is allocated, then level 1 PTE <var class="pcalibre17 pcalibre2 pcalibre1">i</var> points to the base of a level 2 page table. For example, in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007192"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.17</span></a>, all or portions of chunks 0,1, and 8 are allocated, so their level 1 PTEs point to level 2 page tables.</p>
<p id="P7000497027000000000000000045A2D" data-uri="chapter09.xhtml#P7000497027000000000000000045A2D" class="pcalibre8 pcalibre1 pcalibre2">Each PTE in a level 2 page table is responsible for mapping a 4-KB page of virtual memory, just as before when we looked at single-level page tables. Notice that with 4-byte PTEs, each level 1 and level 2 page table is 4 kilobytes, which conveniently is the same size as a page.</p>
<p id="P7000497027000000000000000045A2E" data-uri="chapter09.xhtml#P7000497027000000000000000045A2E" class="pcalibre8 pcalibre1 pcalibre2">This scheme reduces memory requirements in two ways. First, if a PTE in the level 1 table is null, then the corresponding level 2 page table does not even have to exist. This represents a significant potential savings, since most of the 4 GB virtual address space for a typical program is unallocated. Second, only the level 1 table needs to be in main memory at all times. The level 2 page tables can be created and paged in and out by the VM system as they are needed, which reduces pressure on main memory. Only the most heavily used level 2 page tables need to be cached in main memory.</p>
<figure id="P7000497027000000000000000007192" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P7000497027000000000000000007192">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007193" title="820" data-uri="chapter09.xhtml#P7000497027000000000000000007193" epub:type="pagebreak"></span>
<img alt="A diagram illustrates a two-level page table hierarchy." id="P7000497027000000000000000045A2F" data-uri="P700049702700000000000000000B788" src="../images/p820-1.png" class="pcalibre267 pcalibre2 pcalibre1"/>
<figcaption id="P7000497027000000000000000045A30" data-uri="chapter09.xhtml#P7000497027000000000000000045A30" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000045A31" data-uri="chapter09.xhtml#P7000497027000000000000000045A31" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.17 </span>A two-level page table hierarchy.</h1></header><div class="pcalibre1 pcalibre2 pcalibre7" id="P7000497027000000000000000045A32" data-uri="chapter09.xhtml#P7000497027000000000000000045A32"><p id="P7000497027000000000000000045A33" data-uri="chapter09.xhtml#P7000497027000000000000000045A33" class="pcalibre1 pcalibre2 pcalibre10">Notice that addresses increase from top to bottom.</p></div>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025D73" data-uri="chapter09.xhtml#P7000497027000000000000000025D73">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000045A34" data-uri="chapter09.xhtml#P7000497027000000000000000045A34" class="pcalibre8 pcalibre1 pcalibre2">A diagram illustrates connections from level 1 page table to level 2 page tables to virtual memory, as summarized below.</p>
<ul id="P7000497027000000000000000045A35" data-uri="chapter09.xhtml#P7000497027000000000000000045A35" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P7000497027000000000000000045A36" data-uri="chapter09.xhtml#P7000497027000000000000000045A36" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A37" data-uri="chapter09.xhtml#P7000497027000000000000000045A37" class="pcalibre1 pcalibre2 pcalibre10">Level 1 page table, registers from top to bottom:</p>
<ul id="P7000497027000000000000000045A38" data-uri="chapter09.xhtml#P7000497027000000000000000045A38" class="pcalibre1 pcalibre2 pcalibre69">
<li id="P7000497027000000000000000045A39" data-uri="chapter09.xhtml#P7000497027000000000000000045A39" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A3A" data-uri="chapter09.xhtml#P7000497027000000000000000045A3A" class="pcalibre1 pcalibre2 pcalibre10">PTE 0, to PTE 0 in first table of level 2</p></li>
<li id="P7000497027000000000000000045A3B" data-uri="chapter09.xhtml#P7000497027000000000000000045A3B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A3C" data-uri="chapter09.xhtml#P7000497027000000000000000045A3C" class="pcalibre1 pcalibre2 pcalibre10">PTE 1, to PTE 0 in second table of level 2</p></li>
<li id="P7000497027000000000000000045A3D" data-uri="chapter09.xhtml#P7000497027000000000000000045A3D" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A3E" data-uri="chapter09.xhtml#P7000497027000000000000000045A3E" class="pcalibre1 pcalibre2 pcalibre10">PTE 2 (null) through PTE 7 (null)</p></li>
<li id="P7000497027000000000000000045A3F" data-uri="chapter09.xhtml#P7000497027000000000000000045A3F" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A40" data-uri="chapter09.xhtml#P7000497027000000000000000045A40" class="pcalibre1 pcalibre2 pcalibre10">PTE 8 to 1,023 null PTEs in third table of level 2</p></li>
<li id="P7000497027000000000000000045A41" data-uri="chapter09.xhtml#P7000497027000000000000000045A41" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A42" data-uri="chapter09.xhtml#P7000497027000000000000000045A42" class="pcalibre1 pcalibre2 pcalibre10">(1 K minus 9) null PTEs</p></li>
</ul></li>
<li id="P7000497027000000000000000045A43" data-uri="chapter09.xhtml#P7000497027000000000000000045A43" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A44" data-uri="chapter09.xhtml#P7000497027000000000000000045A44" class="pcalibre1 pcalibre2 pcalibre10">Level 2 page tables:</p>
<ul id="P7000497027000000000000000045A45" data-uri="chapter09.xhtml#P7000497027000000000000000045A45" class="pcalibre1 pcalibre2 pcalibre69">
<li id="P7000497027000000000000000045A46" data-uri="chapter09.xhtml#P7000497027000000000000000045A46" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A47" data-uri="chapter09.xhtml#P7000497027000000000000000045A47" class="pcalibre1 pcalibre2 pcalibre10">First:</p>
<ul id="P7000497027000000000000000045A48" data-uri="chapter09.xhtml#P7000497027000000000000000045A48" class="pcalibre146 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000045A49" data-uri="chapter09.xhtml#P7000497027000000000000000045A49" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A4A" data-uri="chapter09.xhtml#P7000497027000000000000000045A4A" class="pcalibre1 pcalibre2 pcalibre10">PTE 0, to VP 0</p></li>
<li id="P7000497027000000000000000045A4B" data-uri="chapter09.xhtml#P7000497027000000000000000045A4B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A4C" data-uri="chapter09.xhtml#P7000497027000000000000000045A4C" class="pcalibre1 pcalibre2 pcalibre10">…</p></li>
<li id="P7000497027000000000000000045A4D" data-uri="chapter09.xhtml#P7000497027000000000000000045A4D" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A4E" data-uri="chapter09.xhtml#P7000497027000000000000000045A4E" class="pcalibre1 pcalibre2 pcalibre10">PTE 1,023, to VP 1,023</p></li>
</ul></li>
<li id="P7000497027000000000000000045A4F" data-uri="chapter09.xhtml#P7000497027000000000000000045A4F" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A50" data-uri="chapter09.xhtml#P7000497027000000000000000045A50" class="pcalibre1 pcalibre2 pcalibre10">Second:</p>
<ul id="P7000497027000000000000000045A51" data-uri="chapter09.xhtml#P7000497027000000000000000045A51" class="pcalibre146 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000045A52" data-uri="chapter09.xhtml#P7000497027000000000000000045A52" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A53" data-uri="chapter09.xhtml#P7000497027000000000000000045A53" class="pcalibre1 pcalibre2 pcalibre10">PTE 0, to VP 1,024</p></li>
<li id="P7000497027000000000000000045A54" data-uri="chapter09.xhtml#P7000497027000000000000000045A54" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A55" data-uri="chapter09.xhtml#P7000497027000000000000000045A55" class="pcalibre1 pcalibre2 pcalibre10">…</p></li>
<li id="P7000497027000000000000000045A56" data-uri="chapter09.xhtml#P7000497027000000000000000045A56" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A57" data-uri="chapter09.xhtml#P7000497027000000000000000045A57" class="pcalibre1 pcalibre2 pcalibre10">PTE 1,023 to VP 2,047</p></li>
</ul></li>
<li id="P7000497027000000000000000045A58" data-uri="chapter09.xhtml#P7000497027000000000000000045A58" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A59" data-uri="chapter09.xhtml#P7000497027000000000000000045A59" class="pcalibre1 pcalibre2 pcalibre10">Third:</p>
<ul id="P7000497027000000000000000045A5A" data-uri="chapter09.xhtml#P7000497027000000000000000045A5A" class="pcalibre146 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000045A5B" data-uri="chapter09.xhtml#P7000497027000000000000000045A5B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A5C" data-uri="chapter09.xhtml#P7000497027000000000000000045A5C" class="pcalibre1 pcalibre2 pcalibre10">1,023 null PTEs</p></li>
<li id="P7000497027000000000000000045A5D" data-uri="chapter09.xhtml#P7000497027000000000000000045A5D" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A5E" data-uri="chapter09.xhtml#P7000497027000000000000000045A5E" class="pcalibre1 pcalibre2 pcalibre10">PTE 1,023, to VP 9,215</p></li>
</ul></li>
</ul></li>
<li id="P7000497027000000000000000045A5F" data-uri="chapter09.xhtml#P7000497027000000000000000045A5F" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A60" data-uri="chapter09.xhtml#P7000497027000000000000000045A60" class="pcalibre1 pcalibre2 pcalibre10">Virtual memory:</p>
<ul id="P7000497027000000000000000045A61" data-uri="chapter09.xhtml#P7000497027000000000000000045A61" class="pcalibre1 pcalibre2 pcalibre69">
<li id="P7000497027000000000000000045A62" data-uri="chapter09.xhtml#P7000497027000000000000000045A62" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A63" data-uri="chapter09.xhtml#P7000497027000000000000000045A63" class="pcalibre1 pcalibre2 pcalibre10">VP 0, from 0</p></li>
<li id="P7000497027000000000000000045A64" data-uri="chapter09.xhtml#P7000497027000000000000000045A64" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A65" data-uri="chapter09.xhtml#P7000497027000000000000000045A65" class="pcalibre1 pcalibre2 pcalibre10">…</p></li>
<li id="P7000497027000000000000000045A66" data-uri="chapter09.xhtml#P7000497027000000000000000045A66" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A67" data-uri="chapter09.xhtml#P7000497027000000000000000045A67" class="pcalibre1 pcalibre2 pcalibre10">VP 1,023</p></li>
<li id="P7000497027000000000000000045A68" data-uri="chapter09.xhtml#P7000497027000000000000000045A68" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A69" data-uri="chapter09.xhtml#P7000497027000000000000000045A69" class="pcalibre1 pcalibre2 pcalibre10">VP 1,024</p></li>
<li id="P7000497027000000000000000045A6A" data-uri="chapter09.xhtml#P7000497027000000000000000045A6A" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A6B" data-uri="chapter09.xhtml#P7000497027000000000000000045A6B" class="pcalibre1 pcalibre2 pcalibre10">…</p></li>
<li id="P7000497027000000000000000045A6C" data-uri="chapter09.xhtml#P7000497027000000000000000045A6C" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A6D" data-uri="chapter09.xhtml#P7000497027000000000000000045A6D" class="pcalibre1 pcalibre2 pcalibre10">VP 2,047 (2 K allocated VM pages, from VP 0 to VP 2,047, for code and data)</p></li>
<li id="P7000497027000000000000000045A6E" data-uri="chapter09.xhtml#P7000497027000000000000000045A6E" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A6F" data-uri="chapter09.xhtml#P7000497027000000000000000045A6F" class="pcalibre1 pcalibre2 pcalibre10">Gap (6 K allocated VM pages)</p></li>
<li id="P7000497027000000000000000045A70" data-uri="chapter09.xhtml#P7000497027000000000000000045A70" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A71" data-uri="chapter09.xhtml#P7000497027000000000000000045A71" class="pcalibre1 pcalibre2 pcalibre10">1,023 unallocated pages</p></li>
<li id="P7000497027000000000000000045A72" data-uri="chapter09.xhtml#P7000497027000000000000000045A72" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A73" data-uri="chapter09.xhtml#P7000497027000000000000000045A73" class="pcalibre1 pcalibre2 pcalibre10">VP 9,215 (1 allocated VM page for the stack)</p></li>
</ul></li>
</ul>
</details>
</figcaption>
</figure>
<figure id="P7000497027000000000000000007199" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P7000497027000000000000000007199">
<img alt="A diagram illustrates address translation with a k-level page table." id="P7000497027000000000000000045A74" data-uri="P700049702700000000000000000B789" src="../images/p820-2.png" class="pcalibre1 pcalibre2 pcalibre268"/>
<figcaption id="P7000497027000000000000000045A75" data-uri="chapter09.xhtml#P7000497027000000000000000045A75" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000045A76" data-uri="chapter09.xhtml#P7000497027000000000000000045A76" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.18 </span>Address translation with a <var class="pcalibre17 pcalibre2 pcalibre1">k</var>-level page table.</h1></header>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025DB7" data-uri="chapter09.xhtml#P7000497027000000000000000025DB7">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000045A77" data-uri="chapter09.xhtml#P7000497027000000000000000045A77" class="pcalibre8 pcalibre1 pcalibre2">A diagram shows connections between pages in virtual address and physical address, as summarized below.</p>
<ul id="P7000497027000000000000000045A78" data-uri="chapter09.xhtml#P7000497027000000000000000045A78" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P7000497027000000000000000045A79" data-uri="chapter09.xhtml#P7000497027000000000000000045A79" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A7A" data-uri="chapter09.xhtml#P7000497027000000000000000045A7A" class="pcalibre1 pcalibre2 pcalibre10">VPN 1 (extending to n minus 1), to second register in level 1 page table, which then moves to first register in level 2 page table</p></li>
<li id="P7000497027000000000000000045A7B" data-uri="chapter09.xhtml#P7000497027000000000000000045A7B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A7C" data-uri="chapter09.xhtml#P7000497027000000000000000045A7C" class="pcalibre1 pcalibre2 pcalibre10">VPN 2 to second register in level 2 page table, which then moves to first register in level k page table</p></li>
<li id="P7000497027000000000000000045A7D" data-uri="chapter09.xhtml#P7000497027000000000000000045A7D" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A7E" data-uri="chapter09.xhtml#P7000497027000000000000000045A7E" class="pcalibre1 pcalibre2 pcalibre10">VPN k to PPN in level k page table, which then translates to PPN (m minus 1 to p) in physical address</p></li>
<li id="P7000497027000000000000000045A7F" data-uri="chapter09.xhtml#P7000497027000000000000000045A7F" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A80" data-uri="chapter09.xhtml#P7000497027000000000000000045A80" class="pcalibre1 pcalibre2 pcalibre10">VPO (p minus 1 to 0) to PPO in physical address (p minus 1 to 0)</p></li>
</ul>
</details>
</figcaption>
</figure>
<p id="P7000497027000000000000000045A81" data-uri="chapter09.xhtml#P7000497027000000000000000045A81" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P7000497027000000000000000007199"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.18</span></a> summarizes address translation with a <var class="pcalibre17 pcalibre2 pcalibre1">k</var>-level page table hierarchy. The virtual address is partitioned into <var class="pcalibre17 pcalibre2 pcalibre1">k</var> VPNs and a VPO. Each VPN <var class="pcalibre17 pcalibre2 pcalibre1">i</var>, 1 ≤ <var class="pcalibre17 pcalibre2 pcalibre1">i</var> ≤ <var class="pcalibre17 pcalibre2 pcalibre1">k</var>, is an index into a page table at level <i class="pcalibre17 pcalibre2 pcalibre1">i.</i> Each PTE in a level <var class="pcalibre17 pcalibre2 pcalibre1">j</var> table, 1 ≤ <var class="pcalibre17 pcalibre2 pcalibre1">j</var> ≤ <var class="pcalibre17 pcalibre2 pcalibre1">k</var> − 1, points to the base of some page table at level <var class="pcalibre17 pcalibre2 pcalibre1">j</var> + 1. Each PTE in a level <var class="pcalibre17 pcalibre2 pcalibre1">k</var> table contains either the PPN of some physical page or the address of a disk block. To construct the physical address, the MMU must access <var class="pcalibre17 pcalibre2 pcalibre1">k</var> PTEs before it can <span class="pcalibre1 pcalibre2 pcalibre5" id="P700049702700000000000000000719E" title="821" data-uri="chapter09.xhtml#P700049702700000000000000000719E" epub:type="pagebreak"></span>determine the PPN. As with a single-level hierarchy, the PPO is identical to the VPO.</p>
<p id="P7000497027000000000000000045A82" data-uri="chapter09.xhtml#P7000497027000000000000000045A82" class="pcalibre8 pcalibre1 pcalibre2">Accessing <var class="pcalibre17 pcalibre2 pcalibre1">k</var> PTEs may seem expensive and impractical at first glance. However, the TLB comes to the rescue here by caching PTEs from the page tables at the different levels. In practice, address translation with multi-level page tables is not significantly slower than with single-level page tables.</p>
</section>
<section id="P70004970270000000000000000071A0" data-uri="chapter09.xhtml#P70004970270000000000000000071A0" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre30 pcalibre1 pcalibre2" id="P7000497027000000000000000045A83" data-uri="chapter09.xhtml#P7000497027000000000000000045A83" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">9.6.4 </span>Putting It Together: End-to-End Address Translation</h1></header>
<p id="P7000497027000000000000000045A84" data-uri="chapter09.xhtml#P7000497027000000000000000045A84" class="pcalibre8 pcalibre1 pcalibre2">In this section, we put it all together with a concrete example of end-to-end address translation on a small system with a TLB and L1 d-cache. To keep things manageable, we make the following assumptions:</p>
<ul id="P7000497027000000000000000045A85" data-uri="chapter09.xhtml#P7000497027000000000000000045A85" class="pcalibre1 calibre9 pcalibre2">
<li id="P7000497027000000000000000045A86" data-uri="chapter09.xhtml#P7000497027000000000000000045A86" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A87" data-uri="chapter09.xhtml#P7000497027000000000000000045A87" class="pcalibre1 pcalibre2 pcalibre10">The memory is byte addressable.</p></li>
<li id="P7000497027000000000000000045A88" data-uri="chapter09.xhtml#P7000497027000000000000000045A88" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A89" data-uri="chapter09.xhtml#P7000497027000000000000000045A89" class="pcalibre1 pcalibre2 pcalibre10">Memory accesses are to <i class="pcalibre17 pcalibre2 pcalibre1">1-byte words</i> (not 4-byte words).</p></li>
<li id="P7000497027000000000000000045A8A" data-uri="chapter09.xhtml#P7000497027000000000000000045A8A" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A8B" data-uri="chapter09.xhtml#P7000497027000000000000000045A8B" class="pcalibre1 pcalibre2 pcalibre10">Virtual addresses are 14 bits wide (<var class="pcalibre17 pcalibre2 pcalibre1">n</var> = 14).</p></li>
<li id="P7000497027000000000000000045A8C" data-uri="chapter09.xhtml#P7000497027000000000000000045A8C" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A8D" data-uri="chapter09.xhtml#P7000497027000000000000000045A8D" class="pcalibre1 pcalibre2 pcalibre10">Physical addresses are 12 bits wide (<var class="pcalibre17 pcalibre2 pcalibre1">m</var> = 12).</p></li>
<li id="P7000497027000000000000000045A8E" data-uri="chapter09.xhtml#P7000497027000000000000000045A8E" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A8F" data-uri="chapter09.xhtml#P7000497027000000000000000045A8F" class="pcalibre1 pcalibre2 pcalibre10">The page size is 64 bytes (<var class="pcalibre17 pcalibre2 pcalibre1">P</var> = 64).</p></li>
<li id="P7000497027000000000000000045A90" data-uri="chapter09.xhtml#P7000497027000000000000000045A90" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A91" data-uri="chapter09.xhtml#P7000497027000000000000000045A91" class="pcalibre1 pcalibre2 pcalibre10">The TLB is 4-way set associative with 16 total entries.</p></li>
<li id="P7000497027000000000000000045A92" data-uri="chapter09.xhtml#P7000497027000000000000000045A92" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045A93" data-uri="chapter09.xhtml#P7000497027000000000000000045A93" class="pcalibre1 pcalibre2 pcalibre10">The L1 d-cache is physically addressed and direct mapped, with a 4-byte line size and 16 total sets.</p></li>
</ul>
<p id="P7000497027000000000000000045A94" data-uri="chapter09.xhtml#P7000497027000000000000000045A94" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000071B4"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.19</span></a> shows the formats of the virtual and physical addresses. Since each page is 2<sup class="pcalibre1 pcalibre2 pcalibre85">6</sup> = 64 bytes, the low-order 6 bits of the virtual and physical addresses serve as the VPO and PPO, respectively. The high-order 8 bits of the virtual address serve as the VPN. The high-order 6 bits of the physical address serve as the PPN.</p>
<p id="P7000497027000000000000000045A95" data-uri="chapter09.xhtml#P7000497027000000000000000045A95" class="pcalibre8 pcalibre1 pcalibre2"><a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000071BA"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.20</span></a> shows a snapshot of our little memory system, including the TLB (<a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000071BA"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.20</span>(a)</a>), a portion of the page table (<a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000071BA"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.20(b)</span></a>), and the L1 cache (<a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000071BA"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">9.20(c)</span></a>). Above the figures of the TLB and cache, we have also shown how the bits of the virtual and physical addresses are partitioned by the hardware as it accesses these devices.</p>
<figure id="P70004970270000000000000000071B4" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P70004970270000000000000000071B4">
<img alt="A diagram illustrates bits in virtual address and physical address." id="P7000497027000000000000000045A96" data-uri="P700049702700000000000000000B78A" src="../images/p821-1.png" class="pcalibre1 pcalibre2 pcalibre269"/>
<figcaption id="P7000497027000000000000000045A97" data-uri="chapter09.xhtml#P7000497027000000000000000045A97" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000045A98" data-uri="chapter09.xhtml#P7000497027000000000000000045A98" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.19 </span>Addressing for small memory system.</h1></header><div class="pcalibre1 pcalibre2 pcalibre7" id="P7000497027000000000000000045A99" data-uri="chapter09.xhtml#P7000497027000000000000000045A99"><p id="P7000497027000000000000000045A9A" data-uri="chapter09.xhtml#P7000497027000000000000000045A9A" class="pcalibre1 pcalibre2 pcalibre10">Assume 14-bit virtual addresses (<var class="pcalibre17 pcalibre2 pcalibre1">n</var> = 14), 12-bit physical addresses (<var class="pcalibre17 pcalibre2 pcalibre1">m</var> = 12), and 64-byte pages (<var class="pcalibre17 pcalibre2 pcalibre1">P</var> = 64).</p></div>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025DDC" data-uri="chapter09.xhtml#P7000497027000000000000000025DDC">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000045A9B" data-uri="chapter09.xhtml#P7000497027000000000000000045A9B" class="pcalibre1 pcalibre2 pcalibre10">A diagram shows bits in the virtual address divided into VPN (virtual page number) for bits 13 to 6 and VPO (virtual page offset) from 5 to 0. Physical address is divided into PPN (physical page number) from bit 11 to 6, and PPO (physical page offset) from 5 to 0.</p>
</details>
</figcaption>
</figure>
<figure id="P70004970270000000000000000071BA" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P70004970270000000000000000071BA">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P70004970270000000000000000071BB" title="822" data-uri="chapter09.xhtml#P70004970270000000000000000071BB" epub:type="pagebreak"></span>
<img alt="Diagrams illustrate TLB, page table, and cache." id="P7000497027000000000000000045A9C" data-uri="P700049702700000000000000000B78B" src="../images/p822-1.png" class="pcalibre1 pcalibre2 pcalibre270"/>
<figcaption id="P7000497027000000000000000045A9D" data-uri="chapter09.xhtml#P7000497027000000000000000045A9D" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P7000497027000000000000000045A9E" data-uri="chapter09.xhtml#P7000497027000000000000000045A9E" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">9.20 </span>TLB, page table, and cache for small memory system.</h1></header><div class="pcalibre1 pcalibre2 pcalibre7" id="P7000497027000000000000000045A9F" data-uri="chapter09.xhtml#P7000497027000000000000000045A9F"><p id="P7000497027000000000000000045AA0" data-uri="chapter09.xhtml#P7000497027000000000000000045AA0" class="pcalibre1 pcalibre2 pcalibre10">All values in the TLB, page table, and cache are in hexadecimal notation.</p></div>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025DE3" data-uri="chapter09.xhtml#P7000497027000000000000000025DE3">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<ol id="P7000497027000000000000000045AA1" data-uri="chapter09.xhtml#P7000497027000000000000000045AA1" class="pcalibre75 pcalibre2 pcalibre1">
<li id="P7000497027000000000000000045AA2" data-uri="chapter09.xhtml#P7000497027000000000000000045AA2" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045AA3" data-uri="chapter09.xhtml#P7000497027000000000000000045AA3" class="pcalibre1 pcalibre2 pcalibre10">TLB: 4 sets, 16 entries, 4-way set associative: virtual address has bits 13 to 6 as VPN, with TLBT from 13 to 8 and TLBI from 7 to 6. VPO is bits 5 to 0. Sets 0 through 3 each have entries within four sets of tag, PPN, and valid, as reproduced in the following table:</p>
<table class="pcalibre1 pcalibre2 pcalibre43" id="P7000497027000000000000000045AA4" data-uri="chapter09.xhtml#P7000497027000000000000000045AA4">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P7000497027000000000000000045AA5" data-uri="chapter09.xhtml#P7000497027000000000000000045AA5" class="pcalibre1 pcalibre2 calibre5">Set</th>
<th id="P7000497027000000000000000045AA6" data-uri="chapter09.xhtml#P7000497027000000000000000045AA6" class="pcalibre1 pcalibre2 calibre5">Tag</th>
<th id="P7000497027000000000000000045AA7" data-uri="chapter09.xhtml#P7000497027000000000000000045AA7" class="pcalibre1 pcalibre2 calibre5">PPN</th>
<th id="P7000497027000000000000000045AA8" data-uri="chapter09.xhtml#P7000497027000000000000000045AA8" class="pcalibre1 pcalibre2 calibre5">Valid</th>
<th id="P7000497027000000000000000045AA9" data-uri="chapter09.xhtml#P7000497027000000000000000045AA9" class="pcalibre1 pcalibre2 calibre5">Tag</th>
<th id="P7000497027000000000000000045AAA" data-uri="chapter09.xhtml#P7000497027000000000000000045AAA" class="pcalibre1 pcalibre2 calibre5">PPN</th>
<th id="P7000497027000000000000000045AAB" data-uri="chapter09.xhtml#P7000497027000000000000000045AAB" class="pcalibre1 pcalibre2 calibre5">Valid</th>
<th id="P7000497027000000000000000045AAC" data-uri="chapter09.xhtml#P7000497027000000000000000045AAC" class="pcalibre1 pcalibre2 calibre5">Tag</th>
<th id="P7000497027000000000000000045AAD" data-uri="chapter09.xhtml#P7000497027000000000000000045AAD" class="pcalibre1 pcalibre2 calibre5">PPN</th>
<th id="P7000497027000000000000000045AAE" data-uri="chapter09.xhtml#P7000497027000000000000000045AAE" class="pcalibre1 pcalibre2 calibre5">Valid</th>
<th id="P7000497027000000000000000045AAF" data-uri="chapter09.xhtml#P7000497027000000000000000045AAF" class="pcalibre1 pcalibre2 calibre5">Tag</th>
<th id="P7000497027000000000000000045AB0" data-uri="chapter09.xhtml#P7000497027000000000000000045AB0" class="pcalibre1 pcalibre2 calibre5">PPN</th>
<th id="P7000497027000000000000000045AB1" data-uri="chapter09.xhtml#P7000497027000000000000000045AB1" class="pcalibre1 pcalibre2 calibre5">Valid</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AB2" data-uri="chapter09.xhtml#P7000497027000000000000000045AB2" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AB3" data-uri="chapter09.xhtml#P7000497027000000000000000045AB3" class="pcalibre1 pcalibre2 calibre7">03</td>
<td id="P7000497027000000000000000045AB4" data-uri="chapter09.xhtml#P7000497027000000000000000045AB4" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AB5" data-uri="chapter09.xhtml#P7000497027000000000000000045AB5" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AB6" data-uri="chapter09.xhtml#P7000497027000000000000000045AB6" class="pcalibre1 pcalibre2 calibre7">09</td>
<td id="P7000497027000000000000000045AB7" data-uri="chapter09.xhtml#P7000497027000000000000000045AB7" class="pcalibre1 pcalibre2 calibre7">0D</td>
<td id="P7000497027000000000000000045AB8" data-uri="chapter09.xhtml#P7000497027000000000000000045AB8" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045AB9" data-uri="chapter09.xhtml#P7000497027000000000000000045AB9" class="pcalibre1 pcalibre2 calibre7">00</td>
<td id="P7000497027000000000000000045ABA" data-uri="chapter09.xhtml#P7000497027000000000000000045ABA" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045ABB" data-uri="chapter09.xhtml#P7000497027000000000000000045ABB" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045ABC" data-uri="chapter09.xhtml#P7000497027000000000000000045ABC" class="pcalibre1 pcalibre2 calibre7">07</td>
<td id="P7000497027000000000000000045ABD" data-uri="chapter09.xhtml#P7000497027000000000000000045ABD" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045ABE" data-uri="chapter09.xhtml#P7000497027000000000000000045ABE" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045ABF" data-uri="chapter09.xhtml#P7000497027000000000000000045ABF" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045AC0" data-uri="chapter09.xhtml#P7000497027000000000000000045AC0" class="pcalibre1 pcalibre2 calibre7">03</td>
<td id="P7000497027000000000000000045AC1" data-uri="chapter09.xhtml#P7000497027000000000000000045AC1" class="pcalibre1 pcalibre2 calibre7">2D</td>
<td id="P7000497027000000000000000045AC2" data-uri="chapter09.xhtml#P7000497027000000000000000045AC2" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045AC3" data-uri="chapter09.xhtml#P7000497027000000000000000045AC3" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045AC4" data-uri="chapter09.xhtml#P7000497027000000000000000045AC4" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AC5" data-uri="chapter09.xhtml#P7000497027000000000000000045AC5" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AC6" data-uri="chapter09.xhtml#P7000497027000000000000000045AC6" class="pcalibre1 pcalibre2 calibre7">04</td>
<td id="P7000497027000000000000000045AC7" data-uri="chapter09.xhtml#P7000497027000000000000000045AC7" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AC8" data-uri="chapter09.xhtml#P7000497027000000000000000045AC8" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AC9" data-uri="chapter09.xhtml#P7000497027000000000000000045AC9" class="pcalibre1 pcalibre2 calibre7">0A</td>
<td id="P7000497027000000000000000045ACA" data-uri="chapter09.xhtml#P7000497027000000000000000045ACA" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045ACB" data-uri="chapter09.xhtml#P7000497027000000000000000045ACB" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045ACC" data-uri="chapter09.xhtml#P7000497027000000000000000045ACC" class="pcalibre1 pcalibre2 calibre7">2</td>
<td id="P7000497027000000000000000045ACD" data-uri="chapter09.xhtml#P7000497027000000000000000045ACD" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045ACE" data-uri="chapter09.xhtml#P7000497027000000000000000045ACE" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045ACF" data-uri="chapter09.xhtml#P7000497027000000000000000045ACF" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AD0" data-uri="chapter09.xhtml#P7000497027000000000000000045AD0" class="pcalibre1 pcalibre2 calibre7">08</td>
<td id="P7000497027000000000000000045AD1" data-uri="chapter09.xhtml#P7000497027000000000000000045AD1" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AD2" data-uri="chapter09.xhtml#P7000497027000000000000000045AD2" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AD3" data-uri="chapter09.xhtml#P7000497027000000000000000045AD3" class="pcalibre1 pcalibre2 calibre7">06</td>
<td id="P7000497027000000000000000045AD4" data-uri="chapter09.xhtml#P7000497027000000000000000045AD4" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AD5" data-uri="chapter09.xhtml#P7000497027000000000000000045AD5" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045AD6" data-uri="chapter09.xhtml#P7000497027000000000000000045AD6" class="pcalibre1 pcalibre2 calibre7">03</td>
<td id="P7000497027000000000000000045AD7" data-uri="chapter09.xhtml#P7000497027000000000000000045AD7" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AD8" data-uri="chapter09.xhtml#P7000497027000000000000000045AD8" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AD9" data-uri="chapter09.xhtml#P7000497027000000000000000045AD9" class="pcalibre1 pcalibre2 calibre7">3</td>
<td id="P7000497027000000000000000045ADA" data-uri="chapter09.xhtml#P7000497027000000000000000045ADA" class="pcalibre1 pcalibre2 calibre7">07</td>
<td id="P7000497027000000000000000045ADB" data-uri="chapter09.xhtml#P7000497027000000000000000045ADB" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045ADC" data-uri="chapter09.xhtml#P7000497027000000000000000045ADC" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045ADD" data-uri="chapter09.xhtml#P7000497027000000000000000045ADD" class="pcalibre1 pcalibre2 calibre7">03</td>
<td id="P7000497027000000000000000045ADE" data-uri="chapter09.xhtml#P7000497027000000000000000045ADE" class="pcalibre1 pcalibre2 calibre7">0D</td>
<td id="P7000497027000000000000000045ADF" data-uri="chapter09.xhtml#P7000497027000000000000000045ADF" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045AE0" data-uri="chapter09.xhtml#P7000497027000000000000000045AE0" class="pcalibre1 pcalibre2 calibre7">0A</td>
<td id="P7000497027000000000000000045AE1" data-uri="chapter09.xhtml#P7000497027000000000000000045AE1" class="pcalibre1 pcalibre2 calibre7">34</td>
<td id="P7000497027000000000000000045AE2" data-uri="chapter09.xhtml#P7000497027000000000000000045AE2" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045AE3" data-uri="chapter09.xhtml#P7000497027000000000000000045AE3" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045AE4" data-uri="chapter09.xhtml#P7000497027000000000000000045AE4" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AE5" data-uri="chapter09.xhtml#P7000497027000000000000000045AE5" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
</tbody>
</table></li>
<li id="P7000497027000000000000000045AE6" data-uri="chapter09.xhtml#P7000497027000000000000000045AE6" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045AE7" data-uri="chapter09.xhtml#P7000497027000000000000000045AE7" class="pcalibre1 pcalibre2 pcalibre10">Page table: only the first 16 PTEs are shown: PPN and Valid are listed for VPN 00 through 0F, as reproduced in the following table:</p>
<table class="pcalibre1 pcalibre2 pcalibre43" id="P7000497027000000000000000045AE8" data-uri="chapter09.xhtml#P7000497027000000000000000045AE8">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P7000497027000000000000000045AE9" data-uri="chapter09.xhtml#P7000497027000000000000000045AE9" class="pcalibre1 pcalibre2 calibre5">VPN</th>
<th id="P7000497027000000000000000045AEA" data-uri="chapter09.xhtml#P7000497027000000000000000045AEA" class="pcalibre1 pcalibre2 calibre5">PPN</th>
<th id="P7000497027000000000000000045AEB" data-uri="chapter09.xhtml#P7000497027000000000000000045AEB" class="pcalibre1 pcalibre2 calibre5">Valid</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AEC" data-uri="chapter09.xhtml#P7000497027000000000000000045AEC" class="pcalibre1 pcalibre2 calibre7">00</td>
<td id="P7000497027000000000000000045AED" data-uri="chapter09.xhtml#P7000497027000000000000000045AED" class="pcalibre1 pcalibre2 calibre7">28</td>
<td id="P7000497027000000000000000045AEE" data-uri="chapter09.xhtml#P7000497027000000000000000045AEE" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AEF" data-uri="chapter09.xhtml#P7000497027000000000000000045AEF" class="pcalibre1 pcalibre2 calibre7">01</td>
<td id="P7000497027000000000000000045AF0" data-uri="chapter09.xhtml#P7000497027000000000000000045AF0" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AF1" data-uri="chapter09.xhtml#P7000497027000000000000000045AF1" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AF2" data-uri="chapter09.xhtml#P7000497027000000000000000045AF2" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045AF3" data-uri="chapter09.xhtml#P7000497027000000000000000045AF3" class="pcalibre1 pcalibre2 calibre7">33</td>
<td id="P7000497027000000000000000045AF4" data-uri="chapter09.xhtml#P7000497027000000000000000045AF4" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AF5" data-uri="chapter09.xhtml#P7000497027000000000000000045AF5" class="pcalibre1 pcalibre2 calibre7">03</td>
<td id="P7000497027000000000000000045AF6" data-uri="chapter09.xhtml#P7000497027000000000000000045AF6" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045AF7" data-uri="chapter09.xhtml#P7000497027000000000000000045AF7" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AF8" data-uri="chapter09.xhtml#P7000497027000000000000000045AF8" class="pcalibre1 pcalibre2 calibre7">04</td>
<td id="P7000497027000000000000000045AF9" data-uri="chapter09.xhtml#P7000497027000000000000000045AF9" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045AFA" data-uri="chapter09.xhtml#P7000497027000000000000000045AFA" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AFB" data-uri="chapter09.xhtml#P7000497027000000000000000045AFB" class="pcalibre1 pcalibre2 calibre7">05</td>
<td id="P7000497027000000000000000045AFC" data-uri="chapter09.xhtml#P7000497027000000000000000045AFC" class="pcalibre1 pcalibre2 calibre7">16</td>
<td id="P7000497027000000000000000045AFD" data-uri="chapter09.xhtml#P7000497027000000000000000045AFD" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045AFE" data-uri="chapter09.xhtml#P7000497027000000000000000045AFE" class="pcalibre1 pcalibre2 calibre7">06</td>
<td id="P7000497027000000000000000045AFF" data-uri="chapter09.xhtml#P7000497027000000000000000045AFF" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B00" data-uri="chapter09.xhtml#P7000497027000000000000000045B00" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B01" data-uri="chapter09.xhtml#P7000497027000000000000000045B01" class="pcalibre1 pcalibre2 calibre7">07</td>
<td id="P7000497027000000000000000045B02" data-uri="chapter09.xhtml#P7000497027000000000000000045B02" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B03" data-uri="chapter09.xhtml#P7000497027000000000000000045B03" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B04" data-uri="chapter09.xhtml#P7000497027000000000000000045B04" class="pcalibre1 pcalibre2 calibre7">08</td>
<td id="P7000497027000000000000000045B05" data-uri="chapter09.xhtml#P7000497027000000000000000045B05" class="pcalibre1 pcalibre2 calibre7">13</td>
<td id="P7000497027000000000000000045B06" data-uri="chapter09.xhtml#P7000497027000000000000000045B06" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B07" data-uri="chapter09.xhtml#P7000497027000000000000000045B07" class="pcalibre1 pcalibre2 calibre7">09</td>
<td id="P7000497027000000000000000045B08" data-uri="chapter09.xhtml#P7000497027000000000000000045B08" class="pcalibre1 pcalibre2 calibre7">17</td>
<td id="P7000497027000000000000000045B09" data-uri="chapter09.xhtml#P7000497027000000000000000045B09" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B0A" data-uri="chapter09.xhtml#P7000497027000000000000000045B0A" class="pcalibre1 pcalibre2 calibre7">0A</td>
<td id="P7000497027000000000000000045B0B" data-uri="chapter09.xhtml#P7000497027000000000000000045B0B" class="pcalibre1 pcalibre2 calibre7">09</td>
<td id="P7000497027000000000000000045B0C" data-uri="chapter09.xhtml#P7000497027000000000000000045B0C" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B0D" data-uri="chapter09.xhtml#P7000497027000000000000000045B0D" class="pcalibre1 pcalibre2 calibre7">0B</td>
<td id="P7000497027000000000000000045B0E" data-uri="chapter09.xhtml#P7000497027000000000000000045B0E" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B0F" data-uri="chapter09.xhtml#P7000497027000000000000000045B0F" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B10" data-uri="chapter09.xhtml#P7000497027000000000000000045B10" class="pcalibre1 pcalibre2 calibre7">0C</td>
<td id="P7000497027000000000000000045B11" data-uri="chapter09.xhtml#P7000497027000000000000000045B11" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B12" data-uri="chapter09.xhtml#P7000497027000000000000000045B12" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B13" data-uri="chapter09.xhtml#P7000497027000000000000000045B13" class="pcalibre1 pcalibre2 calibre7">0D</td>
<td id="P7000497027000000000000000045B14" data-uri="chapter09.xhtml#P7000497027000000000000000045B14" class="pcalibre1 pcalibre2 calibre7">2D</td>
<td id="P7000497027000000000000000045B15" data-uri="chapter09.xhtml#P7000497027000000000000000045B15" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B16" data-uri="chapter09.xhtml#P7000497027000000000000000045B16" class="pcalibre1 pcalibre2 calibre7">0E</td>
<td id="P7000497027000000000000000045B17" data-uri="chapter09.xhtml#P7000497027000000000000000045B17" class="pcalibre1 pcalibre2 calibre7">11</td>
<td id="P7000497027000000000000000045B18" data-uri="chapter09.xhtml#P7000497027000000000000000045B18" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B19" data-uri="chapter09.xhtml#P7000497027000000000000000045B19" class="pcalibre1 pcalibre2 calibre7">0F</td>
<td id="P7000497027000000000000000045B1A" data-uri="chapter09.xhtml#P7000497027000000000000000045B1A" class="pcalibre1 pcalibre2 calibre7">0D</td>
<td id="P7000497027000000000000000045B1B" data-uri="chapter09.xhtml#P7000497027000000000000000045B1B" class="pcalibre1 pcalibre2 calibre7">1</td>
</tr>
</tbody>
</table>
</li>
<li id="P7000497027000000000000000045B1C" data-uri="chapter09.xhtml#P7000497027000000000000000045B1C" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045B1D" data-uri="chapter09.xhtml#P7000497027000000000000000045B1D" class="pcalibre1 pcalibre2 pcalibre10">Cache: 16 sets, 4-byte blocks, direct mapped: physical address has bits 11 to 6 as PPN (and CT) and PPO from 5 to 0, with CI from 5 to 2 and CO from 1 to 0. Idx 0 through F has Tag, Valid, Blk 0, Blk 1, Blk 2, and Blk3 listed, as reproduced in the following table:</p>
<table class="pcalibre1 pcalibre2 pcalibre43" id="P7000497027000000000000000045B1E" data-uri="chapter09.xhtml#P7000497027000000000000000045B1E">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P7000497027000000000000000045B1F" data-uri="chapter09.xhtml#P7000497027000000000000000045B1F" class="pcalibre1 pcalibre2 calibre5">Idk</th>
<th id="P7000497027000000000000000045B20" data-uri="chapter09.xhtml#P7000497027000000000000000045B20" class="pcalibre1 pcalibre2 calibre5">Tag</th>
<th id="P7000497027000000000000000045B21" data-uri="chapter09.xhtml#P7000497027000000000000000045B21" class="pcalibre1 pcalibre2 calibre5">Valid</th>
<th id="P7000497027000000000000000045B22" data-uri="chapter09.xhtml#P7000497027000000000000000045B22" class="pcalibre1 pcalibre2 calibre5">Blk 0</th>
<th id="P7000497027000000000000000045B23" data-uri="chapter09.xhtml#P7000497027000000000000000045B23" class="pcalibre1 pcalibre2 calibre5">Blk 1</th>
<th id="P7000497027000000000000000045B24" data-uri="chapter09.xhtml#P7000497027000000000000000045B24" class="pcalibre1 pcalibre2 calibre5">Blk 2</th>
<th id="P7000497027000000000000000045B25" data-uri="chapter09.xhtml#P7000497027000000000000000045B25" class="pcalibre1 pcalibre2 calibre5">Blk 3</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B26" data-uri="chapter09.xhtml#P7000497027000000000000000045B26" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B27" data-uri="chapter09.xhtml#P7000497027000000000000000045B27" class="pcalibre1 pcalibre2 calibre7">19</td>
<td id="P7000497027000000000000000045B28" data-uri="chapter09.xhtml#P7000497027000000000000000045B28" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B29" data-uri="chapter09.xhtml#P7000497027000000000000000045B29" class="pcalibre1 pcalibre2 calibre7">99</td>
<td id="P7000497027000000000000000045B2A" data-uri="chapter09.xhtml#P7000497027000000000000000045B2A" class="pcalibre1 pcalibre2 calibre7">11</td>
<td id="P7000497027000000000000000045B2B" data-uri="chapter09.xhtml#P7000497027000000000000000045B2B" class="pcalibre1 pcalibre2 calibre7">23</td>
<td id="P7000497027000000000000000045B2C" data-uri="chapter09.xhtml#P7000497027000000000000000045B2C" class="pcalibre1 pcalibre2 calibre7">11</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B2D" data-uri="chapter09.xhtml#P7000497027000000000000000045B2D" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B2E" data-uri="chapter09.xhtml#P7000497027000000000000000045B2E" class="pcalibre1 pcalibre2 calibre7">15</td>
<td id="P7000497027000000000000000045B2F" data-uri="chapter09.xhtml#P7000497027000000000000000045B2F" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B30" data-uri="chapter09.xhtml#P7000497027000000000000000045B30" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B31" data-uri="chapter09.xhtml#P7000497027000000000000000045B31" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B32" data-uri="chapter09.xhtml#P7000497027000000000000000045B32" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B33" data-uri="chapter09.xhtml#P7000497027000000000000000045B33" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B34" data-uri="chapter09.xhtml#P7000497027000000000000000045B34" class="pcalibre1 pcalibre2 calibre7">2</td>
<td id="P7000497027000000000000000045B35" data-uri="chapter09.xhtml#P7000497027000000000000000045B35" class="pcalibre1 pcalibre2 calibre7">1B</td>
<td id="P7000497027000000000000000045B36" data-uri="chapter09.xhtml#P7000497027000000000000000045B36" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B37" data-uri="chapter09.xhtml#P7000497027000000000000000045B37" class="pcalibre1 pcalibre2 calibre7">00</td>
<td id="P7000497027000000000000000045B38" data-uri="chapter09.xhtml#P7000497027000000000000000045B38" class="pcalibre1 pcalibre2 calibre7">02</td>
<td id="P7000497027000000000000000045B39" data-uri="chapter09.xhtml#P7000497027000000000000000045B39" class="pcalibre1 pcalibre2 calibre7">04</td>
<td id="P7000497027000000000000000045B3A" data-uri="chapter09.xhtml#P7000497027000000000000000045B3A" class="pcalibre1 pcalibre2 calibre7">08</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B3B" data-uri="chapter09.xhtml#P7000497027000000000000000045B3B" class="pcalibre1 pcalibre2 calibre7">3</td>
<td id="P7000497027000000000000000045B3C" data-uri="chapter09.xhtml#P7000497027000000000000000045B3C" class="pcalibre1 pcalibre2 calibre7">36</td>
<td id="P7000497027000000000000000045B3D" data-uri="chapter09.xhtml#P7000497027000000000000000045B3D" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B3E" data-uri="chapter09.xhtml#P7000497027000000000000000045B3E" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B3F" data-uri="chapter09.xhtml#P7000497027000000000000000045B3F" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B40" data-uri="chapter09.xhtml#P7000497027000000000000000045B40" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B41" data-uri="chapter09.xhtml#P7000497027000000000000000045B41" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B42" data-uri="chapter09.xhtml#P7000497027000000000000000045B42" class="pcalibre1 pcalibre2 calibre7">4</td>
<td id="P7000497027000000000000000045B43" data-uri="chapter09.xhtml#P7000497027000000000000000045B43" class="pcalibre1 pcalibre2 calibre7">32</td>
<td id="P7000497027000000000000000045B44" data-uri="chapter09.xhtml#P7000497027000000000000000045B44" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B45" data-uri="chapter09.xhtml#P7000497027000000000000000045B45" class="pcalibre1 pcalibre2 calibre7">43</td>
<td id="P7000497027000000000000000045B46" data-uri="chapter09.xhtml#P7000497027000000000000000045B46" class="pcalibre1 pcalibre2 calibre7">6D</td>
<td id="P7000497027000000000000000045B47" data-uri="chapter09.xhtml#P7000497027000000000000000045B47" class="pcalibre1 pcalibre2 calibre7">8F</td>
<td id="P7000497027000000000000000045B48" data-uri="chapter09.xhtml#P7000497027000000000000000045B48" class="pcalibre1 pcalibre2 calibre7">09</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B49" data-uri="chapter09.xhtml#P7000497027000000000000000045B49" class="pcalibre1 pcalibre2 calibre7">5</td>
<td id="P7000497027000000000000000045B4A" data-uri="chapter09.xhtml#P7000497027000000000000000045B4A" class="pcalibre1 pcalibre2 calibre7">0D</td>
<td id="P7000497027000000000000000045B4B" data-uri="chapter09.xhtml#P7000497027000000000000000045B4B" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B4C" data-uri="chapter09.xhtml#P7000497027000000000000000045B4C" class="pcalibre1 pcalibre2 calibre7">36</td>
<td id="P7000497027000000000000000045B4D" data-uri="chapter09.xhtml#P7000497027000000000000000045B4D" class="pcalibre1 pcalibre2 calibre7">72</td>
<td id="P7000497027000000000000000045B4E" data-uri="chapter09.xhtml#P7000497027000000000000000045B4E" class="pcalibre1 pcalibre2 calibre7">F0</td>
<td id="P7000497027000000000000000045B4F" data-uri="chapter09.xhtml#P7000497027000000000000000045B4F" class="pcalibre1 pcalibre2 calibre7">1D</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B50" data-uri="chapter09.xhtml#P7000497027000000000000000045B50" class="pcalibre1 pcalibre2 calibre7">6</td>
<td id="P7000497027000000000000000045B51" data-uri="chapter09.xhtml#P7000497027000000000000000045B51" class="pcalibre1 pcalibre2 calibre7">31</td>
<td id="P7000497027000000000000000045B52" data-uri="chapter09.xhtml#P7000497027000000000000000045B52" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B53" data-uri="chapter09.xhtml#P7000497027000000000000000045B53" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B54" data-uri="chapter09.xhtml#P7000497027000000000000000045B54" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B55" data-uri="chapter09.xhtml#P7000497027000000000000000045B55" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B56" data-uri="chapter09.xhtml#P7000497027000000000000000045B56" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B57" data-uri="chapter09.xhtml#P7000497027000000000000000045B57" class="pcalibre1 pcalibre2 calibre7">7</td>
<td id="P7000497027000000000000000045B58" data-uri="chapter09.xhtml#P7000497027000000000000000045B58" class="pcalibre1 pcalibre2 calibre7">16</td>
<td id="P7000497027000000000000000045B59" data-uri="chapter09.xhtml#P7000497027000000000000000045B59" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B5A" data-uri="chapter09.xhtml#P7000497027000000000000000045B5A" class="pcalibre1 pcalibre2 calibre7">11</td>
<td id="P7000497027000000000000000045B5B" data-uri="chapter09.xhtml#P7000497027000000000000000045B5B" class="pcalibre1 pcalibre2 calibre7">C2</td>
<td id="P7000497027000000000000000045B5C" data-uri="chapter09.xhtml#P7000497027000000000000000045B5C" class="pcalibre1 pcalibre2 calibre7">DF</td>
<td id="P7000497027000000000000000045B5D" data-uri="chapter09.xhtml#P7000497027000000000000000045B5D" class="pcalibre1 pcalibre2 calibre7">03</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B5E" data-uri="chapter09.xhtml#P7000497027000000000000000045B5E" class="pcalibre1 pcalibre2 calibre7">8</td>
<td id="P7000497027000000000000000045B5F" data-uri="chapter09.xhtml#P7000497027000000000000000045B5F" class="pcalibre1 pcalibre2 calibre7">24</td>
<td id="P7000497027000000000000000045B60" data-uri="chapter09.xhtml#P7000497027000000000000000045B60" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B61" data-uri="chapter09.xhtml#P7000497027000000000000000045B61" class="pcalibre1 pcalibre2 calibre7">3A</td>
<td id="P7000497027000000000000000045B62" data-uri="chapter09.xhtml#P7000497027000000000000000045B62" class="pcalibre1 pcalibre2 calibre7">00</td>
<td id="P7000497027000000000000000045B63" data-uri="chapter09.xhtml#P7000497027000000000000000045B63" class="pcalibre1 pcalibre2 calibre7">51</td>
<td id="P7000497027000000000000000045B64" data-uri="chapter09.xhtml#P7000497027000000000000000045B64" class="pcalibre1 pcalibre2 calibre7">89</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B65" data-uri="chapter09.xhtml#P7000497027000000000000000045B65" class="pcalibre1 pcalibre2 calibre7">9</td>
<td id="P7000497027000000000000000045B66" data-uri="chapter09.xhtml#P7000497027000000000000000045B66" class="pcalibre1 pcalibre2 calibre7">2D</td>
<td id="P7000497027000000000000000045B67" data-uri="chapter09.xhtml#P7000497027000000000000000045B67" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B68" data-uri="chapter09.xhtml#P7000497027000000000000000045B68" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B69" data-uri="chapter09.xhtml#P7000497027000000000000000045B69" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B6A" data-uri="chapter09.xhtml#P7000497027000000000000000045B6A" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B6B" data-uri="chapter09.xhtml#P7000497027000000000000000045B6B" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B6C" data-uri="chapter09.xhtml#P7000497027000000000000000045B6C" class="pcalibre1 pcalibre2 calibre7">A</td>
<td id="P7000497027000000000000000045B6D" data-uri="chapter09.xhtml#P7000497027000000000000000045B6D" class="pcalibre1 pcalibre2 calibre7">2D</td>
<td id="P7000497027000000000000000045B6E" data-uri="chapter09.xhtml#P7000497027000000000000000045B6E" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B6F" data-uri="chapter09.xhtml#P7000497027000000000000000045B6F" class="pcalibre1 pcalibre2 calibre7">93</td>
<td id="P7000497027000000000000000045B70" data-uri="chapter09.xhtml#P7000497027000000000000000045B70" class="pcalibre1 pcalibre2 calibre7">15</td>
<td id="P7000497027000000000000000045B71" data-uri="chapter09.xhtml#P7000497027000000000000000045B71" class="pcalibre1 pcalibre2 calibre7">DA</td>
<td id="P7000497027000000000000000045B72" data-uri="chapter09.xhtml#P7000497027000000000000000045B72" class="pcalibre1 pcalibre2 calibre7">3B</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B73" data-uri="chapter09.xhtml#P7000497027000000000000000045B73" class="pcalibre1 pcalibre2 calibre7">B</td>
<td id="P7000497027000000000000000045B74" data-uri="chapter09.xhtml#P7000497027000000000000000045B74" class="pcalibre1 pcalibre2 calibre7">0B</td>
<td id="P7000497027000000000000000045B75" data-uri="chapter09.xhtml#P7000497027000000000000000045B75" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B76" data-uri="chapter09.xhtml#P7000497027000000000000000045B76" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B77" data-uri="chapter09.xhtml#P7000497027000000000000000045B77" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B78" data-uri="chapter09.xhtml#P7000497027000000000000000045B78" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B79" data-uri="chapter09.xhtml#P7000497027000000000000000045B79" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B7A" data-uri="chapter09.xhtml#P7000497027000000000000000045B7A" class="pcalibre1 pcalibre2 calibre7">C</td>
<td id="P7000497027000000000000000045B7B" data-uri="chapter09.xhtml#P7000497027000000000000000045B7B" class="pcalibre1 pcalibre2 calibre7">12</td>
<td id="P7000497027000000000000000045B7C" data-uri="chapter09.xhtml#P7000497027000000000000000045B7C" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B7D" data-uri="chapter09.xhtml#P7000497027000000000000000045B7D" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B7E" data-uri="chapter09.xhtml#P7000497027000000000000000045B7E" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B7F" data-uri="chapter09.xhtml#P7000497027000000000000000045B7F" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B80" data-uri="chapter09.xhtml#P7000497027000000000000000045B80" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B81" data-uri="chapter09.xhtml#P7000497027000000000000000045B81" class="pcalibre1 pcalibre2 calibre7">D</td>
<td id="P7000497027000000000000000045B82" data-uri="chapter09.xhtml#P7000497027000000000000000045B82" class="pcalibre1 pcalibre2 calibre7">16</td>
<td id="P7000497027000000000000000045B83" data-uri="chapter09.xhtml#P7000497027000000000000000045B83" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B84" data-uri="chapter09.xhtml#P7000497027000000000000000045B84" class="pcalibre1 pcalibre2 calibre7">04</td>
<td id="P7000497027000000000000000045B85" data-uri="chapter09.xhtml#P7000497027000000000000000045B85" class="pcalibre1 pcalibre2 calibre7">96</td>
<td id="P7000497027000000000000000045B86" data-uri="chapter09.xhtml#P7000497027000000000000000045B86" class="pcalibre1 pcalibre2 calibre7">34</td>
<td id="P7000497027000000000000000045B87" data-uri="chapter09.xhtml#P7000497027000000000000000045B87" class="pcalibre1 pcalibre2 calibre7">15</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B88" data-uri="chapter09.xhtml#P7000497027000000000000000045B88" class="pcalibre1 pcalibre2 calibre7">E</td>
<td id="P7000497027000000000000000045B89" data-uri="chapter09.xhtml#P7000497027000000000000000045B89" class="pcalibre1 pcalibre2 calibre7">13</td>
<td id="P7000497027000000000000000045B8A" data-uri="chapter09.xhtml#P7000497027000000000000000045B8A" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045B8B" data-uri="chapter09.xhtml#P7000497027000000000000000045B8B" class="pcalibre1 pcalibre2 calibre7">83</td>
<td id="P7000497027000000000000000045B8C" data-uri="chapter09.xhtml#P7000497027000000000000000045B8C" class="pcalibre1 pcalibre2 calibre7">77</td>
<td id="P7000497027000000000000000045B8D" data-uri="chapter09.xhtml#P7000497027000000000000000045B8D" class="pcalibre1 pcalibre2 calibre7">1B</td>
<td id="P7000497027000000000000000045B8E" data-uri="chapter09.xhtml#P7000497027000000000000000045B8E" class="pcalibre1 pcalibre2 calibre7">D3</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045B8F" data-uri="chapter09.xhtml#P7000497027000000000000000045B8F" class="pcalibre1 pcalibre2 calibre7">f</td>
<td id="P7000497027000000000000000045B90" data-uri="chapter09.xhtml#P7000497027000000000000000045B90" class="pcalibre1 pcalibre2 calibre7">14</td>
<td id="P7000497027000000000000000045B91" data-uri="chapter09.xhtml#P7000497027000000000000000045B91" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045B92" data-uri="chapter09.xhtml#P7000497027000000000000000045B92" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B93" data-uri="chapter09.xhtml#P7000497027000000000000000045B93" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B94" data-uri="chapter09.xhtml#P7000497027000000000000000045B94" class="pcalibre1 pcalibre2 calibre7">-</td>
<td id="P7000497027000000000000000045B95" data-uri="chapter09.xhtml#P7000497027000000000000000045B95" class="pcalibre1 pcalibre2 calibre7">-</td>
</tr>
</tbody>
</table>
</li>
</ol>
</details>
</figcaption>
</figure>
<ul class="pcalibre38 pcalibre1 pcalibre2" id="P7000497027000000000000000045B96" data-uri="chapter09.xhtml#P7000497027000000000000000045B96">
<li id="P7000497027000000000000000045B97" data-uri="chapter09.xhtml#P7000497027000000000000000045B97" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045B98" data-uri="chapter09.xhtml#P7000497027000000000000000045B98" class="pcalibre1 pcalibre2 pcalibre40"><span class="pcalibre1 pcalibre2 pcalibre5" id="P70004970270000000000000000071C4" title="823" data-uri="chapter09.xhtml#P70004970270000000000000000071C4" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre2 pcalibre41">TLB. </span>The TLB is virtually addressed using the bits of the VPN. Since the TLB has four sets, the 2 low-order bits of the VPN serve as the set index (TLBI). The remaining 6 high-order bits serve as the tag (TLBT) that distinguishes the different VPNs that might map to the same TLB set.</p></li>
<li id="P7000497027000000000000000045B99" data-uri="chapter09.xhtml#P7000497027000000000000000045B99" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045B9A" data-uri="chapter09.xhtml#P7000497027000000000000000045B9A" class="pcalibre1 pcalibre2 pcalibre40"><span class="pcalibre1 pcalibre2 pcalibre41">Page table. </span>The page table is a single-level design with a total of 2<sup class="pcalibre1 pcalibre2 pcalibre85">8</sup> = 256 page table entries (PTEs). However, we are only interested in the first 16 of these. For convenience, we have labeled each PTE with the VPN that indexes it; but keep in mind that these VPNs are not part of the page table and not stored in memory. Also, notice that the PPN of each invalid PTE is denoted with a dash to reinforce the idea that whatever bit values might happen to be stored there are not meaningful.</p></li>
<li id="P7000497027000000000000000045B9B" data-uri="chapter09.xhtml#P7000497027000000000000000045B9B" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045B9C" data-uri="chapter09.xhtml#P7000497027000000000000000045B9C" class="pcalibre1 pcalibre2 pcalibre40"><span class="pcalibre1 pcalibre2 pcalibre41">Cache. </span>The direct-mapped cache is addressed by the fields in the physical address. Since each block is 4 bytes, the low-order 2 bits of the physical address serve as the block offset (CO). Since there are 16 sets, the next 4 bits serve as the set index (CI). The remaining 6 bits serve as the tag (CT).</p></li>
</ul>
<p id="P7000497027000000000000000045B9D" data-uri="chapter09.xhtml#P7000497027000000000000000045B9D" class="pcalibre8 pcalibre1 pcalibre2">Given this initial setup, let's see what happens when the CPU executes a load instruction that reads the byte at address <code id="P7000497027000000000000000045B9E" data-uri="chapter09.xhtml#P7000497027000000000000000045B9E" class="pcalibre1 calibre1 pcalibre2">0x03d4</code>. (Recall that our hypothetical CPU reads 1-byte words rather than 4-byte words.) To begin this kind of manual simulation, we find it helpful to write down the bits in the virtual address, identify the various fields we will need, and determine their hex values. The hardware performs a similar task when it decodes the address.</p>
<figure id="P70004970270000000000000000071CB" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P70004970270000000000000000071CB">
<img alt="A diagram has virtual address values listed in bit positions 13 through 0." id="P7000497027000000000000000045B9F" data-uri="P700049702700000000000000000B78C" src="../images/p823-1.png" class="pcalibre1 pcalibre2 pcalibre271"/>
<figcaption id="P7000497027000000000000000045BA0" data-uri="chapter09.xhtml#P7000497027000000000000000045BA0" class="pcalibre1 pcalibre2 calibre4">
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025EE4" data-uri="chapter09.xhtml#P7000497027000000000000000025EE4">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000045BA1" data-uri="chapter09.xhtml#P7000497027000000000000000045BA1" class="pcalibre8 pcalibre1 pcalibre2">A diagram has bit positions 13 through 6 labeled VPN 0x0f, with 13 through 8 as TLBT 0x03 and 7 and 6 as 0x03. Positions 5 through 0 are labeled VPO 0x14. The values listed in the positions are reproduced in the following table:</p>
<table class="pcalibre1 pcalibre2 pcalibre43" id="P7000497027000000000000000045BA2" data-uri="chapter09.xhtml#P7000497027000000000000000045BA2">
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045BA3" data-uri="chapter09.xhtml#P7000497027000000000000000045BA3" class="pcalibre1 pcalibre2 calibre7">Bit position</td>
<td id="P7000497027000000000000000045BA4" data-uri="chapter09.xhtml#P7000497027000000000000000045BA4" class="pcalibre1 pcalibre2 calibre7">13</td>
<td id="P7000497027000000000000000045BA5" data-uri="chapter09.xhtml#P7000497027000000000000000045BA5" class="pcalibre1 pcalibre2 calibre7">12</td>
<td id="P7000497027000000000000000045BA6" data-uri="chapter09.xhtml#P7000497027000000000000000045BA6" class="pcalibre1 pcalibre2 calibre7">11</td>
<td id="P7000497027000000000000000045BA7" data-uri="chapter09.xhtml#P7000497027000000000000000045BA7" class="pcalibre1 pcalibre2 calibre7">10</td>
<td id="P7000497027000000000000000045BA8" data-uri="chapter09.xhtml#P7000497027000000000000000045BA8" class="pcalibre1 pcalibre2 calibre7">9</td>
<td id="P7000497027000000000000000045BA9" data-uri="chapter09.xhtml#P7000497027000000000000000045BA9" class="pcalibre1 pcalibre2 calibre7">8</td>
<td id="P7000497027000000000000000045BAA" data-uri="chapter09.xhtml#P7000497027000000000000000045BAA" class="pcalibre1 pcalibre2 calibre7">7</td>
<td id="P7000497027000000000000000045BAB" data-uri="chapter09.xhtml#P7000497027000000000000000045BAB" class="pcalibre1 pcalibre2 calibre7">6</td>
<td id="P7000497027000000000000000045BAC" data-uri="chapter09.xhtml#P7000497027000000000000000045BAC" class="pcalibre1 pcalibre2 calibre7">5</td>
<td id="P7000497027000000000000000045BAD" data-uri="chapter09.xhtml#P7000497027000000000000000045BAD" class="pcalibre1 pcalibre2 calibre7">4</td>
<td id="P7000497027000000000000000045BAE" data-uri="chapter09.xhtml#P7000497027000000000000000045BAE" class="pcalibre1 pcalibre2 calibre7">3</td>
<td id="P7000497027000000000000000045BAF" data-uri="chapter09.xhtml#P7000497027000000000000000045BAF" class="pcalibre1 pcalibre2 calibre7">2</td>
<td id="P7000497027000000000000000045BB0" data-uri="chapter09.xhtml#P7000497027000000000000000045BB0" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BB1" data-uri="chapter09.xhtml#P7000497027000000000000000045BB1" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045BB2" data-uri="chapter09.xhtml#P7000497027000000000000000045BB2" class="pcalibre1 pcalibre2 calibre7">VA = 0x03d4</td>
<td id="P7000497027000000000000000045BB3" data-uri="chapter09.xhtml#P7000497027000000000000000045BB3" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BB4" data-uri="chapter09.xhtml#P7000497027000000000000000045BB4" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BB5" data-uri="chapter09.xhtml#P7000497027000000000000000045BB5" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BB6" data-uri="chapter09.xhtml#P7000497027000000000000000045BB6" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BB7" data-uri="chapter09.xhtml#P7000497027000000000000000045BB7" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BB8" data-uri="chapter09.xhtml#P7000497027000000000000000045BB8" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BB9" data-uri="chapter09.xhtml#P7000497027000000000000000045BB9" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BBA" data-uri="chapter09.xhtml#P7000497027000000000000000045BBA" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BBB" data-uri="chapter09.xhtml#P7000497027000000000000000045BBB" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BBC" data-uri="chapter09.xhtml#P7000497027000000000000000045BBC" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BBD" data-uri="chapter09.xhtml#P7000497027000000000000000045BBD" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BBE" data-uri="chapter09.xhtml#P7000497027000000000000000045BBE" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BBF" data-uri="chapter09.xhtml#P7000497027000000000000000045BBF" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BC0" data-uri="chapter09.xhtml#P7000497027000000000000000045BC0" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
</tbody>
</table>
</details>
</figcaption>
</figure>
<p id="P7000497027000000000000000045BC1" data-uri="chapter09.xhtml#P7000497027000000000000000045BC1" class="pcalibre8 pcalibre1 pcalibre2">To begin, the MMU extracts the VPN (<code id="P7000497027000000000000000045BC2" data-uri="chapter09.xhtml#P7000497027000000000000000045BC2" class="pcalibre1 calibre1 pcalibre2">0x0F</code>) from the virtual address and checks with the TLB to see if it has cached a copy of PTE <code id="P7000497027000000000000000045BC3" data-uri="chapter09.xhtml#P7000497027000000000000000045BC3" class="pcalibre1 calibre1 pcalibre2">0x0F</code> from some previous memory reference. The TLB extracts the TLB index (<code id="P7000497027000000000000000045BC4" data-uri="chapter09.xhtml#P7000497027000000000000000045BC4" class="pcalibre1 calibre1 pcalibre2">0x03</code>) and the TLB tag (<code id="P7000497027000000000000000045BC5" data-uri="chapter09.xhtml#P7000497027000000000000000045BC5" class="pcalibre1 calibre1 pcalibre2">0x3</code>) from the VPN, hits on a valid match in the second entry of set <code id="P7000497027000000000000000045BC6" data-uri="chapter09.xhtml#P7000497027000000000000000045BC6" class="pcalibre1 calibre1 pcalibre2">0x3</code>, and returns the cached PPN (<code id="P7000497027000000000000000045BC7" data-uri="chapter09.xhtml#P7000497027000000000000000045BC7" class="pcalibre1 calibre1 pcalibre2">0x0D</code>) to the MMU.</p>
<p id="P7000497027000000000000000045BC8" data-uri="chapter09.xhtml#P7000497027000000000000000045BC8" class="pcalibre8 pcalibre1 pcalibre2">If the TLB had missed, then the MMU would need to fetch the PTE from main memory. However, in this case, we got lucky and had a TLB hit. The MMU now has everything it needs to form the physical address. It does this by concatenating the PPN (<code id="P7000497027000000000000000045BC9" data-uri="chapter09.xhtml#P7000497027000000000000000045BC9" class="pcalibre1 calibre1 pcalibre2">0x0D</code>) from the PTE with the VPO (<code id="P7000497027000000000000000045BCA" data-uri="chapter09.xhtml#P7000497027000000000000000045BCA" class="pcalibre1 calibre1 pcalibre2">0x14</code>) from the virtual address, which forms the physical address (<code id="P7000497027000000000000000045BCB" data-uri="chapter09.xhtml#P7000497027000000000000000045BCB" class="pcalibre1 calibre1 pcalibre2">0x354</code>).</p>
<p id="P7000497027000000000000000045BCC" data-uri="chapter09.xhtml#P7000497027000000000000000045BCC" class="pcalibre8 pcalibre1 pcalibre2">Next, the MMU sends the physical address to the cache, which extracts the cache offset CO (<code id="P7000497027000000000000000045BCD" data-uri="chapter09.xhtml#P7000497027000000000000000045BCD" class="pcalibre1 calibre1 pcalibre2">0x0</code>), the cache set index CI (<code id="P7000497027000000000000000045BCE" data-uri="chapter09.xhtml#P7000497027000000000000000045BCE" class="pcalibre1 calibre1 pcalibre2">0x5</code>), and the cache tag CT (<code id="P7000497027000000000000000045BCF" data-uri="chapter09.xhtml#P7000497027000000000000000045BCF" class="pcalibre1 calibre1 pcalibre2">0x0D</code>) from the physical address.</p>
<figure id="P70004970270000000000000000071DC" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P70004970270000000000000000071DC">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P70004970270000000000000000071DD" title="824" data-uri="chapter09.xhtml#P70004970270000000000000000071DD" epub:type="pagebreak"></span>
<img alt="A diagram has physical address values listed in bit positions 11 through 0." id="P7000497027000000000000000045BD0" data-uri="P700049702700000000000000000B78D" src="../images/p824-1.png" class="pcalibre1 pcalibre2 pcalibre272"/>
<figcaption id="P7000497027000000000000000045BD1" data-uri="chapter09.xhtml#P7000497027000000000000000045BD1" class="pcalibre1 pcalibre2 calibre4">
<details class="pcalibre1 pcalibre2 pcalibre59" id="P7000497027000000000000000025F16" data-uri="chapter09.xhtml#P7000497027000000000000000025F16">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P7000497027000000000000000045BD2" data-uri="chapter09.xhtml#P7000497027000000000000000045BD2" class="pcalibre8 pcalibre1 pcalibre2">A diagram has bit positions 11 through 6 labeled PPN 0x0d and CT 0x0d. Positions 5 through 0 are labeled PPO 0x14 , with 5 through 2 as CI 0x05 and 1 and 0 as CO 0x0. The values listed in the positions are reproduced in the following table:</p>
<table class="pcalibre1 pcalibre2 pcalibre43" id="P7000497027000000000000000045BD3" data-uri="chapter09.xhtml#P7000497027000000000000000045BD3">
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045BD4" data-uri="chapter09.xhtml#P7000497027000000000000000045BD4" class="pcalibre1 pcalibre2 calibre7">Bit position</td>
<td id="P7000497027000000000000000045BD5" data-uri="chapter09.xhtml#P7000497027000000000000000045BD5" class="pcalibre1 pcalibre2 calibre7">11</td>
<td id="P7000497027000000000000000045BD6" data-uri="chapter09.xhtml#P7000497027000000000000000045BD6" class="pcalibre1 pcalibre2 calibre7">10</td>
<td id="P7000497027000000000000000045BD7" data-uri="chapter09.xhtml#P7000497027000000000000000045BD7" class="pcalibre1 pcalibre2 calibre7">9</td>
<td id="P7000497027000000000000000045BD8" data-uri="chapter09.xhtml#P7000497027000000000000000045BD8" class="pcalibre1 pcalibre2 calibre7">8</td>
<td id="P7000497027000000000000000045BD9" data-uri="chapter09.xhtml#P7000497027000000000000000045BD9" class="pcalibre1 pcalibre2 calibre7">7</td>
<td id="P7000497027000000000000000045BDA" data-uri="chapter09.xhtml#P7000497027000000000000000045BDA" class="pcalibre1 pcalibre2 calibre7">6</td>
<td id="P7000497027000000000000000045BDB" data-uri="chapter09.xhtml#P7000497027000000000000000045BDB" class="pcalibre1 pcalibre2 calibre7">5</td>
<td id="P7000497027000000000000000045BDC" data-uri="chapter09.xhtml#P7000497027000000000000000045BDC" class="pcalibre1 pcalibre2 calibre7">4</td>
<td id="P7000497027000000000000000045BDD" data-uri="chapter09.xhtml#P7000497027000000000000000045BDD" class="pcalibre1 pcalibre2 calibre7">3</td>
<td id="P7000497027000000000000000045BDE" data-uri="chapter09.xhtml#P7000497027000000000000000045BDE" class="pcalibre1 pcalibre2 calibre7">2</td>
<td id="P7000497027000000000000000045BDF" data-uri="chapter09.xhtml#P7000497027000000000000000045BDF" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BE0" data-uri="chapter09.xhtml#P7000497027000000000000000045BE0" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045BE1" data-uri="chapter09.xhtml#P7000497027000000000000000045BE1" class="pcalibre1 pcalibre2 calibre7">PA = 0x354</td>
<td id="P7000497027000000000000000045BE2" data-uri="chapter09.xhtml#P7000497027000000000000000045BE2" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BE3" data-uri="chapter09.xhtml#P7000497027000000000000000045BE3" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BE4" data-uri="chapter09.xhtml#P7000497027000000000000000045BE4" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BE5" data-uri="chapter09.xhtml#P7000497027000000000000000045BE5" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BE6" data-uri="chapter09.xhtml#P7000497027000000000000000045BE6" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BE7" data-uri="chapter09.xhtml#P7000497027000000000000000045BE7" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BE8" data-uri="chapter09.xhtml#P7000497027000000000000000045BE8" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BE9" data-uri="chapter09.xhtml#P7000497027000000000000000045BE9" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BEA" data-uri="chapter09.xhtml#P7000497027000000000000000045BEA" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BEB" data-uri="chapter09.xhtml#P7000497027000000000000000045BEB" class="pcalibre1 pcalibre2 calibre7">1</td>
<td id="P7000497027000000000000000045BEC" data-uri="chapter09.xhtml#P7000497027000000000000000045BEC" class="pcalibre1 pcalibre2 calibre7">0</td>
<td id="P7000497027000000000000000045BED" data-uri="chapter09.xhtml#P7000497027000000000000000045BED" class="pcalibre1 pcalibre2 calibre7">0</td>
</tr>
</tbody>
</table>
</details>
</figcaption>
</figure>
<p id="P7000497027000000000000000045BEE" data-uri="chapter09.xhtml#P7000497027000000000000000045BEE" class="pcalibre8 pcalibre1 pcalibre2">Since the tag in set <code id="P7000497027000000000000000045BEF" data-uri="chapter09.xhtml#P7000497027000000000000000045BEF" class="pcalibre1 calibre1 pcalibre2">0x5</code> matches CT, the cache detects a hit, reads out the data byte (<code id="P7000497027000000000000000045BF0" data-uri="chapter09.xhtml#P7000497027000000000000000045BF0" class="pcalibre1 calibre1 pcalibre2">0x36</code>) at offset CO, and returns it to the MMU, which then passes it back to the CPU.</p>
<p id="P7000497027000000000000000045BF1" data-uri="chapter09.xhtml#P7000497027000000000000000045BF1" class="pcalibre8 pcalibre1 pcalibre2">Other paths through the translation process are also possible. For example, if the TLB misses, then the MMU must fetch the PPN from a PTE in the page table. If the resulting PTE is invalid, then there is a page fault and the kernel must page in the appropriate page and rerun the load instruction. Another possibility is that the PTE is valid, but the necessary memory block misses in the cache.</p>
<section id="P70004970270000000000000000071E3" data-uri="chapter09.xhtml#P70004970270000000000000000071E3" epub:type="practice" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre65 pcalibre2" id="P7000497027000000000000000045BF2" data-uri="chapter09.xhtml#P7000497027000000000000000045BF2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">Practice Problem </span><span class="pcalibre1 pcalibre21 pcalibre2">9.4 </span>(solution page <a class="pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre15 pcalibre13" epub:type="pagebreak" href="fileP700049702700000000000000000777C.xhtml#P7000497027000000000000000007785">881</a>)</h1></header>
<ol class="pcalibre1 pcalibre2 pcalibre77" id="P7000497027000000000000000045BF3" data-uri="chapter09.xhtml#P7000497027000000000000000045BF3">
<li class="pcalibre1 pcalibre2 pcalibre78" id="P7000497027000000000000000045BF4" data-uri="chapter09.xhtml#P7000497027000000000000000045BF4">
<div class="pcalibre1 pcalibre2 pcalibre7" id="P7000497027000000000000000045BF5" data-uri="chapter09.xhtml#P7000497027000000000000000045BF5"><p id="P7000497027000000000000000045BF6" data-uri="chapter09.xhtml#P7000497027000000000000000045BF6" class="pcalibre1 pcalibre2 pcalibre10">Show how the example memory system in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000071A0"><span class="pcalibre1 pcalibre21 pcalibre2">Section </span><span class="pcalibre1 pcalibre21 pcalibre2">9.6.4</span></a> translates a virtual address into a physical address and accesses the cache. For the given virtual address, indicate the TLB entry accessed, physical address, and cache byte value returned. Indicate whether the TLB misses, whether a page fault occurs, and whether a cache miss occurs. If there is a cache miss, enter "—" for "Cache byte returned." If there is a page fault, enter "—" for "PPN" and leave parts C and D blank.</p>
<p class="pcalibre1 pcalibre2 pcalibre10" id="P7000497027000000000000000045BF7" data-uri="chapter09.xhtml#P7000497027000000000000000045BF7">Virtual address: <code id="P7000497027000000000000000045BF8" data-uri="chapter09.xhtml#P7000497027000000000000000045BF8" class="pcalibre1 calibre1 pcalibre2">0x03d7</code></p>
<ol class="pcalibre1 pcalibre2 pcalibre79" id="P7000497027000000000000000045BF9" data-uri="chapter09.xhtml#P7000497027000000000000000045BF9">
<li id="P7000497027000000000000000045BFA" data-uri="chapter09.xhtml#P7000497027000000000000000045BFA" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045BFB" data-uri="chapter09.xhtml#P7000497027000000000000000045BFB" class="pcalibre1 pcalibre2 pcalibre10">Virtual address format</p>
<figure id="P70004970270000000000000000071EE" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P70004970270000000000000000071EE">
<img alt="Boxes are numbered 13 through 0." id="P7000497027000000000000000045BFC" data-uri="P700049702700000000000000000B78E" src="../images/p824-2.png" class="calibre71 pcalibre1 pcalibre2"/>
</figure></li>
<li id="P7000497027000000000000000045BFD" data-uri="chapter09.xhtml#P7000497027000000000000000045BFD" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045BFE" data-uri="chapter09.xhtml#P7000497027000000000000000045BFE" class="pcalibre1 pcalibre2 pcalibre10">Address translation</p>
<table id="P7000497027000000000000000045BFF" data-uri="chapter09.xhtml#P7000497027000000000000000045BFF" class="pcalibre1 pcalibre2 pcalibre43">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P7000497027000000000000000045C00" data-uri="chapter09.xhtml#P7000497027000000000000000045C00" class="pcalibre1 pcalibre2 calibre5">Parameter</th>
<th id="P7000497027000000000000000045C01" data-uri="chapter09.xhtml#P7000497027000000000000000045C01" class="pcalibre1 pcalibre2 calibre5">Value</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C02" data-uri="chapter09.xhtml#P7000497027000000000000000045C02" class="pcalibre1 pcalibre2 calibre7">VPN</td>
<td id="P7000497027000000000000000045C03" data-uri="chapter09.xhtml#P7000497027000000000000000045C03" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C04" data-uri="chapter09.xhtml#P7000497027000000000000000045C04" class="pcalibre1 pcalibre2 calibre7">TLB index</td>
<td id="P7000497027000000000000000045C05" data-uri="chapter09.xhtml#P7000497027000000000000000045C05" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C06" data-uri="chapter09.xhtml#P7000497027000000000000000045C06" class="pcalibre1 pcalibre2 calibre7">TLB tag</td>
<td id="P7000497027000000000000000045C07" data-uri="chapter09.xhtml#P7000497027000000000000000045C07" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C08" data-uri="chapter09.xhtml#P7000497027000000000000000045C08" class="pcalibre1 pcalibre2 calibre7">TLB hit? (Y/N)</td>
<td id="P7000497027000000000000000045C09" data-uri="chapter09.xhtml#P7000497027000000000000000045C09" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C0A" data-uri="chapter09.xhtml#P7000497027000000000000000045C0A" class="pcalibre1 pcalibre2 calibre7">Page fault? (Y/N)</td>
<td id="P7000497027000000000000000045C0B" data-uri="chapter09.xhtml#P7000497027000000000000000045C0B" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C0C" data-uri="chapter09.xhtml#P7000497027000000000000000045C0C" class="pcalibre1 pcalibre2 calibre7">PPN</td>
<td id="P7000497027000000000000000045C0D" data-uri="chapter09.xhtml#P7000497027000000000000000045C0D" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
</tbody>
</table><p id="P7000497027000000000000000045C0E" data-uri="chapter09.xhtml#P7000497027000000000000000045C0E" class="pcalibre1 pcalibre2 pcalibre10"> </p></li>
<li id="P7000497027000000000000000045C0F" data-uri="chapter09.xhtml#P7000497027000000000000000045C0F" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045C10" data-uri="chapter09.xhtml#P7000497027000000000000000045C10" class="pcalibre1 pcalibre2 pcalibre10">Physical address format</p>
<figure id="P7000497027000000000000000007204" class="pcalibre2 pcalibre32 pcalibre35" data-uri="chapter09.xhtml#P7000497027000000000000000007204">
<img alt="Boxes are numbered 11 through 0." id="P7000497027000000000000000045C11" data-uri="P700049702700000000000000000B78F" src="../images/p824-3.png" class="pcalibre1 pcalibre2 calibre72"/>
</figure>
</li>
<li id="P7000497027000000000000000045C12" data-uri="chapter09.xhtml#P7000497027000000000000000045C12" class="pcalibre39 pcalibre2 pcalibre1"><p id="P7000497027000000000000000045C13" data-uri="chapter09.xhtml#P7000497027000000000000000045C13" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000007208" title="825" data-uri="chapter09.xhtml#P7000497027000000000000000007208" epub:type="pagebreak"></span>Physical memory reference</p>
<table id="P7000497027000000000000000045C14" data-uri="chapter09.xhtml#P7000497027000000000000000045C14" class="pcalibre1 pcalibre2 pcalibre43">
<thead class="pcalibre44 pcalibre2 pcalibre1">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<th id="P7000497027000000000000000045C15" data-uri="chapter09.xhtml#P7000497027000000000000000045C15" class="pcalibre1 pcalibre2 calibre5">Parameter</th>
<th id="P7000497027000000000000000045C16" data-uri="chapter09.xhtml#P7000497027000000000000000045C16" class="pcalibre1 pcalibre2 calibre5">Value</th>
</tr>
</thead>
<tbody class="pcalibre1 pcalibre2 calibre6">
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C17" data-uri="chapter09.xhtml#P7000497027000000000000000045C17" class="pcalibre1 pcalibre2 calibre7">Byte offset</td>
<td id="P7000497027000000000000000045C18" data-uri="chapter09.xhtml#P7000497027000000000000000045C18" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C19" data-uri="chapter09.xhtml#P7000497027000000000000000045C19" class="pcalibre1 pcalibre2 calibre7">Cache index</td>
<td id="P7000497027000000000000000045C1A" data-uri="chapter09.xhtml#P7000497027000000000000000045C1A" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C1B" data-uri="chapter09.xhtml#P7000497027000000000000000045C1B" class="pcalibre1 pcalibre2 calibre7">Cache tag</td>
<td id="P7000497027000000000000000045C1C" data-uri="chapter09.xhtml#P7000497027000000000000000045C1C" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C1D" data-uri="chapter09.xhtml#P7000497027000000000000000045C1D" class="pcalibre1 pcalibre2 calibre7">Cache hit? (Y/N)</td>
<td id="P7000497027000000000000000045C1E" data-uri="chapter09.xhtml#P7000497027000000000000000045C1E" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
<tr class="pcalibre45 pcalibre1 pcalibre2">
<td id="P7000497027000000000000000045C1F" data-uri="chapter09.xhtml#P7000497027000000000000000045C1F" class="pcalibre1 pcalibre2 calibre7">Cache byte returned</td>
<td id="P7000497027000000000000000045C20" data-uri="chapter09.xhtml#P7000497027000000000000000045C20" class="pcalibre1 pcalibre2 calibre7">_____</td>
</tr>
</tbody>
</table>
</li></ol></div></li></ol>
</section>
</section>
</section></body></html>
