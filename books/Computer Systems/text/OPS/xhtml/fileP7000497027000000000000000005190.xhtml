<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>Chapter 6 The Memory Hierarchy</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="pcalibre1 pcalibre2 pcalibre">
<section class="pcalibre1 pcalibre2 pcalibre3" id="P7000497027000000000000000005190" epub:type="chapter"><header class="pcalibre1 pcalibre2 pcalibre48"><h1 class="pcalibre1 pcalibre2 pcalibre49" id="P700049702700000000000000004392B" data-uri="chapter06.xhtml#P700049702700000000000000004392B" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000005192" title="579" data-uri="chapter06.xhtml#P7000497027000000000000000005192" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre21 pcalibre2">Chapter </span><span class="pcalibre1 pcalibre50 pcalibre2">6 </span>The Memory Hierarchy</h1></header>
<section class="pcalibre1 pcalibre2 pcalibre3" id="d9e116578">
<nav class="pcalibre1 pcalibre2 pcalibre3" id="P700049702700000000000000004392C" data-uri="chapter06.xhtml#P700049702700000000000000004392C" epub:type="toc">
<div class="pcalibre1 pcalibre2 pcalibre7" id="P700049702700000000000000004392D" data-uri="chapter06.xhtml#P700049702700000000000000004392D">
<ol class="pcalibre23 pcalibre1 pcalibre2" id="P700049702700000000000000004392E" data-uri="chapter06.xhtml#P700049702700000000000000004392E">
<li id="P700049702700000000000000004392F" data-uri="chapter06.xhtml#P700049702700000000000000004392F" class="pcalibre1 pcalibre2 pcalibre24" data-class="toclevel1"><p id="P7000497027000000000000000043930" data-uri="chapter06.xhtml#P7000497027000000000000000043930" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP70004970270000000000000000051B5.xhtml#P70004970270000000000000000051B5"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.1 </span>Storage Technologies </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">581</span></a></p></li>
<li id="P7000497027000000000000000043931" data-uri="chapter06.xhtml#P7000497027000000000000000043931" class="pcalibre1 pcalibre2 pcalibre24" data-class="toclevel1"><p id="P7000497027000000000000000043932" data-uri="chapter06.xhtml#P7000497027000000000000000043932" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005435.xhtml#P7000497027000000000000000005435"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.2 </span>Locality </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">604</span></a></p></li>
<li id="P7000497027000000000000000043933" data-uri="chapter06.xhtml#P7000497027000000000000000043933" class="pcalibre1 pcalibre2 pcalibre24" data-class="toclevel1"><p id="P7000497027000000000000000043934" data-uri="chapter06.xhtml#P7000497027000000000000000043934" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP70004970270000000000000000054EF.xhtml#P70004970270000000000000000054EF"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.3 </span>The Memory Hierarchy </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">609</span></a></p></li>
<li id="P7000497027000000000000000043935" data-uri="chapter06.xhtml#P7000497027000000000000000043935" class="pcalibre1 pcalibre2 pcalibre24" data-class="toclevel1"><p id="P7000497027000000000000000043936" data-uri="chapter06.xhtml#P7000497027000000000000000043936" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP700049702700000000000000000556F.xhtml#P700049702700000000000000000556F"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.4 </span>Cache Memories </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">614</span></a></p></li>
<li id="P7000497027000000000000000043937" data-uri="chapter06.xhtml#P7000497027000000000000000043937" class="pcalibre1 pcalibre2 pcalibre24" data-class="toclevel1"><p id="P7000497027000000000000000043938" data-uri="chapter06.xhtml#P7000497027000000000000000043938" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005915.xhtml#P7000497027000000000000000005915"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.5 </span>Writing Cache-Friendly Code </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">633</span></a></p></li>
<li id="P7000497027000000000000000043939" data-uri="chapter06.xhtml#P7000497027000000000000000043939" class="pcalibre1 pcalibre2 pcalibre24" data-class="toclevel1"><p id="P700049702700000000000000004393A" data-uri="chapter06.xhtml#P700049702700000000000000004393A" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005A45.xhtml#P7000497027000000000000000005A45"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.6 </span>Putting It Together: The Impact of Caches on Program Performance </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">639</span></a></p></li>
</ol></div>
<div class="pcalibre1 pcalibre2 pcalibre7" id="P700049702700000000000000004393B" data-uri="chapter06.xhtml#P700049702700000000000000004393B">
<ol class="pcalibre23 pcalibre1 pcalibre2" id="P700049702700000000000000004393C" data-uri="chapter06.xhtml#P700049702700000000000000004393C">
<li class="pcalibre1 pcalibre2 pcalibre24" id="P700049702700000000000000004393D" data-uri="chapter06.xhtml#P700049702700000000000000004393D"><p id="P700049702700000000000000004393E" data-uri="chapter06.xhtml#P700049702700000000000000004393E" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005B21.xhtml#P7000497027000000000000000005B21"><span class="pcalibre1 pcalibre2" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">6.7 </span><span class="pcalibre1 pcalibre21 pcalibre2">Summary</span> </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">648</span></a></p></li>
<li class="pcalibre1 pcalibre2 pcalibre24" id="P700049702700000000000000004393F" data-uri="chapter06.xhtml#P700049702700000000000000004393F"><p id="P7000497027000000000000000043940" data-uri="chapter06.xhtml#P7000497027000000000000000043940" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005B27.xhtml#P7000497027000000000000000005B27"><span class="pcalibre1 pcalibre2" epub:type="title">Bibliographic Notes </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">648</span></a></p></li>
<li class="pcalibre1 pcalibre2 pcalibre24" id="P7000497027000000000000000043941" data-uri="chapter06.xhtml#P7000497027000000000000000043941"><p id="P7000497027000000000000000043942" data-uri="chapter06.xhtml#P7000497027000000000000000043942" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005B2F.xhtml#P7000497027000000000000000005B2F"><span class="pcalibre1 pcalibre2" epub:type="title">Homework Problems </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">649</span></a></p></li>
<li class="pcalibre1 pcalibre2 pcalibre24" id="P7000497027000000000000000043943" data-uri="chapter06.xhtml#P7000497027000000000000000043943"><p id="P7000497027000000000000000043944" data-uri="chapter06.xhtml#P7000497027000000000000000043944" class="pcalibre1 pcalibre2 pcalibre10"><a class="pcalibre1 pcalibre2 pcalibre25 pcalibre16 pcalibre14 pcalibre15" href="fileP7000497027000000000000000005E52.xhtml#P7000497027000000000000000005E52"><span class="pcalibre1 pcalibre2" epub:type="title">Solutions to Practice Problems </span><span class="pcalibre1 pcalibre2" epub:type="pagebreak">660</span></a></p></li>
</ol>
</div>
</nav>
<section id="P7000497027000000000000000043945" data-uri="chapter06.xhtml#P7000497027000000000000000043945" epub:type="introduction" class="pcalibre1 pcalibre2 pcalibre51">
<p id="P7000497027000000000000000043946" data-uri="chapter06.xhtml#P7000497027000000000000000043946" class="pcalibre8 pcalibre1 pcalibre2"><span class="pcalibre1 pcalibre2 pcalibre5" id="P70004970270000000000000000051AE" title="580" data-uri="chapter06.xhtml#P70004970270000000000000000051AE" epub:type="pagebreak"></span>To this point in our study of systems, we have relied on a simple model of a computer system as a CPU that executes instructions and a memory system that holds instructions and data for the CPU. In our simple model, the memory system is a linear array of bytes, and the CPU can access each memory location in a constant amount of time. While this is an effective model up to a point, it does not reflect the way that modern systems really work.</p>
<p id="P7000497027000000000000000043947" data-uri="chapter06.xhtml#P7000497027000000000000000043947" class="pcalibre8 pcalibre1 pcalibre2">In practice, a <i class="pcalibre17 pcalibre2 pcalibre1">memory system</i> is a hierarchy of storage devices with different capacities, costs, and access times. CPU registers hold the most frequently used data. Small, fast <i class="pcalibre17 pcalibre2 pcalibre1">cache memories</i> nearby the CPU act as staging areas for a subset of the data and instructions stored in the relatively slow main memory. The main memory stages data stored on large, slow disks, which in turn often serve as staging areas for data stored on the disks or tapes of other machines connected by networks.</p>
<p id="P7000497027000000000000000043948" data-uri="chapter06.xhtml#P7000497027000000000000000043948" class="pcalibre8 pcalibre1 pcalibre2">Memory hierarchies work because well-written programs tend to access the storage at any particular level more frequently than they access the storage at the next lower level. So the storage at the next level can be slower, and thus larger and cheaper per bit. The overall effect is a large pool of memory that costs as much as the cheap storage near the bottom of the hierarchy but that serves data to programs at the rate of the fast storage near the top of the hierarchy.</p>
<p id="P7000497027000000000000000043949" data-uri="chapter06.xhtml#P7000497027000000000000000043949" class="pcalibre8 pcalibre1 pcalibre2">As a programmer, you need to understand the memory hierarchy because it has a big impact on the performance of your applications. If the data your program needs are stored in a CPU register, then they can be accessed in 0 cycles during the execution of the instruction. If stored in a cache, 4 to 75 cycles. If stored in main memory, hundreds of cycles. And if stored in disk, tens of millions of cycles!</p>
<p id="P700049702700000000000000004394A" data-uri="chapter06.xhtml#P700049702700000000000000004394A" class="pcalibre8 pcalibre1 pcalibre2">Here, then, is a fundamental and enduring idea in computer systems: if you understand how the system moves data up and down the memory hierarchy, then you can write your application programs so that their data items are stored higher in the hierarchy, where the CPU can access them more quickly.</p>
<p id="P700049702700000000000000004394B" data-uri="chapter06.xhtml#P700049702700000000000000004394B" class="pcalibre8 pcalibre1 pcalibre2">This idea centers around a fundamental property of computer programs known as <i class="pcalibre17 pcalibre2 pcalibre1">locality.</i> Programs with good locality tend to access the same set of data items over and over again, or they tend to access sets of nearby data items. Programs with good locality tend to access more data items from the upper levels of the memory hierarchy than programs with poor locality, and thus run faster. For example, on our Core i7 system, the running times of different matrix multiplication kernels that perform the same number of arithmetic operations, but have different degrees of locality, can vary by a factor of almost 40!</p>
<p id="P700049702700000000000000004394C" data-uri="chapter06.xhtml#P700049702700000000000000004394C" class="pcalibre8 pcalibre1 pcalibre2">In this chapter, we will look at the basic storage technologies—SRAM memory, DRAM memory, ROM memory, and rotating and solid state disks—and describe how they are organized into hierarchies. In particular, we focus on the cache memories that act as staging areas between the CPU and main memory, because they have the most impact on application program performance. We show you how to analyze your C programs for locality, and we introduce techniques for improving the locality in your programs. You will also learn an interesting way to characterize the performance of the memory hierarchy on a particular machine as a "memory mountain" that shows read access times as a function of locality.</p>
</section>

</section>
<!--EOF:P70004970270000000000000000051B5-->
<!--EOF:P7000497027000000000000000005435-->
<!--EOF:P70004970270000000000000000054EF-->
<!--EOF:P700049702700000000000000000556F-->
<!--EOF:P7000497027000000000000000005915-->
<!--EOF:P7000497027000000000000000005A45-->

<!--EOF:P7000497027000000000000000005B21-->
<!--EOF:P7000497027000000000000000005B27-->
<!--EOF:P7000497027000000000000000005B2F-->
<!--EOF:P7000497027000000000000000005E52-->


</section></body></html>
