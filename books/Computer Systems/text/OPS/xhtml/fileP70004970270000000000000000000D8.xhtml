<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>1.2 Programs Are Translated by Other Programs into Different Forms</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="pcalibre1 pcalibre2 pcalibre">
<section id="P70004970270000000000000000000D8" class="pcalibre1 pcalibre2 pcalibre3"><header class="pcalibre1 pcalibre2 calibre"><h1 class="pcalibre1 pcalibre2 pcalibre4" id="P700049702700000000000000003E4D9" data-uri="chapter01.xhtml#P700049702700000000000000003E4D9" epub:type="title"><span class="pcalibre1 pcalibre21 pcalibre2">1.2 </span>Programs Are Translated by Other Programs into Different Forms</h1></header>
<p id="P700049702700000000000000003E4DA" data-uri="chapter01.xhtml#P700049702700000000000000003E4DA" class="pcalibre8 pcalibre1 pcalibre2">The <code id="P700049702700000000000000003E4DB" data-uri="chapter01.xhtml#P700049702700000000000000003E4DB" class="pcalibre1 calibre1 pcalibre2">hello</code> program begins life as a high-level C program because it can be read and understood by human beings in that form. However, in order to run <code id="P700049702700000000000000003E4DC" data-uri="chapter01.xhtml#P700049702700000000000000003E4DC" class="pcalibre1 calibre1 pcalibre2">hello.c</code> on the system, the individual C statements must be translated by other programs into a sequence of low-level <i class="pcalibre17 pcalibre2 pcalibre1">machine-language</i> instructions. These instructions are then packaged in a form called an <i class="pcalibre17 pcalibre2 pcalibre1">executable object program</i> and stored as a binary disk file. Object programs are also referred to as <i class="pcalibre17 pcalibre2 pcalibre1">executable object files</i>.</p>
<p id="P700049702700000000000000003E4DD" data-uri="chapter01.xhtml#P700049702700000000000000003E4DD" class="pcalibre8 pcalibre1 pcalibre2">On a Unix system, the translation from source file to object file is performed by a <i class="pcalibre17 pcalibre2 pcalibre1">compiler driver:</i></p>
<figure class="pcalibre2 pcalibre32 pcalibre35" id="P70004970270000000000000000000DE" data-uri="chapter01.xhtml#P70004970270000000000000000000DE">
<span class="pcalibre1 pcalibre2 pcalibre5" id="P70004970270000000000000000000DF" title="5" data-uri="chapter01.xhtml#P70004970270000000000000000000DF" epub:type="pagebreak"></span>
<img alt="A diagram features a sequence of four phases." id="P700049702700000000000000003E4DE" data-uri="P700049702700000000000000000B70C" src="../images/p5-1.png" class="pcalibre1 pcalibre2 calibre10"/>
<figcaption id="P700049702700000000000000003E4DF" data-uri="chapter01.xhtml#P700049702700000000000000003E4DF" class="pcalibre1 pcalibre2 calibre4"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre36" id="P700049702700000000000000003E4E0" data-uri="chapter01.xhtml#P700049702700000000000000003E4E0" epub:type="title"><span class="label pcalibre1 pcalibre2">Figure </span><span class="pcalibre1 pcalibre2 pcalibre37">1.3 </span>The compilation system.</h1></header>
<details class="pcalibre1 pcalibre2 pcalibre59" id="P700049702700000000000000001E7A6" data-uri="chapter01.xhtml#P700049702700000000000000001E7A6">
<summary class="pcalibre1 pcalibre2 pcalibre61 pcalibre60"><span class="pcalibre1 pcalibre2 pcalibre37">Description</span></summary>
<p id="P700049702700000000000000003E4E1" data-uri="chapter01.xhtml#P700049702700000000000000003E4E1" class="pcalibre8 pcalibre1 pcalibre2">The four stages are summarized below.</p>
<ul id="P700049702700000000000000003E4E2" data-uri="chapter01.xhtml#P700049702700000000000000003E4E2" class="pcalibre1 pcalibre2 pcalibre62">
<li id="P700049702700000000000000003E4E3" data-uri="chapter01.xhtml#P700049702700000000000000003E4E3" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E4E4" data-uri="chapter01.xhtml#P700049702700000000000000003E4E4" class="pcalibre1 pcalibre2 pcalibre10">Pre-processor (cpp): input from Source program (text) hello.c with output Modified source program (text) hello.i</p></li>
<li id="P700049702700000000000000003E4E5" data-uri="chapter01.xhtml#P700049702700000000000000003E4E5" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E4E6" data-uri="chapter01.xhtml#P700049702700000000000000003E4E6" class="pcalibre1 pcalibre2 pcalibre10">Compiler (cc1): output Assembly program (text)</p></li>
<li id="P700049702700000000000000003E4E7" data-uri="chapter01.xhtml#P700049702700000000000000003E4E7" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E4E8" data-uri="chapter01.xhtml#P700049702700000000000000003E4E8" class="pcalibre1 pcalibre2 pcalibre10">Assembler (as): output Relocatable object programs (binary) hello.o</p></li>
<li id="P700049702700000000000000003E4E9" data-uri="chapter01.xhtml#P700049702700000000000000003E4E9" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E4EA" data-uri="chapter01.xhtml#P700049702700000000000000003E4EA" class="pcalibre1 pcalibre2 pcalibre10">Linker (ld): input as includes printf.o, with output Executable object program (binary) hello.</p></li>
</ul>
</details>
</figcaption></figure>
<pre id="P700049702700000000000000003E4EB" data-uri="chapter01.xhtml#P700049702700000000000000003E4EB" class="calibre2 pcalibre2 pcalibre1"><code id="P700049702700000000000000003E4EC" data-uri="chapter01.xhtml#P700049702700000000000000003E4EC" class="calibre3 pcalibre1 pcalibre2">
linux&gt; <i class="pcalibre17 pcalibre2 pcalibre1">gcc -o hello hello.c</i>
</code></pre>
<p id="P700049702700000000000000003E4ED" data-uri="chapter01.xhtml#P700049702700000000000000003E4ED" class="pcalibre8 pcalibre1 pcalibre2">Here, the <span class="pcalibre1 pcalibre29 pcalibre2">gcc </span>compiler driver reads the source file <code id="P700049702700000000000000003E4EE" data-uri="chapter01.xhtml#P700049702700000000000000003E4EE" class="pcalibre1 calibre1 pcalibre2">hello.c</code> and translates it into an executable object file <code id="P700049702700000000000000003E4EF" data-uri="chapter01.xhtml#P700049702700000000000000003E4EF" class="pcalibre1 calibre1 pcalibre2">hello</code>. The translation is performed in the sequence of four phases shown in <a class="pcalibre15 pcalibre1 pcalibre2 pcalibre16 pcalibre14 pcalibre28" href="#P70004970270000000000000000000DE"><span class="pcalibre1 pcalibre21 pcalibre2">Figure </span><span class="pcalibre1 pcalibre21 pcalibre2">1.3</span></a>. The programs that perform the four phases (<i class="pcalibre17 pcalibre2 pcalibre1">preprocessor</i>, <i class="pcalibre17 pcalibre2 pcalibre1">compiler</i>, <i class="pcalibre17 pcalibre2 pcalibre1">assembler</i>, and <i class="pcalibre17 pcalibre2 pcalibre1">linker</i>) are known collectively as the <i class="pcalibre17 pcalibre2 pcalibre1">compilation system</i>.</p>
<ul id="P700049702700000000000000003E4F0" data-uri="chapter01.xhtml#P700049702700000000000000003E4F0" class="pcalibre1 calibre9 pcalibre2">
<li id="P700049702700000000000000003E4F1" data-uri="chapter01.xhtml#P700049702700000000000000003E4F1" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E4F2" data-uri="chapter01.xhtml#P700049702700000000000000003E4F2" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre2 pcalibre41">Preprocessing phase. </span>The preprocessor (cpp) modifies the original C program according to directives that begin with the `<code id="P700049702700000000000000003E4F3" data-uri="chapter01.xhtml#P700049702700000000000000003E4F3" class="pcalibre1 calibre1 pcalibre2">#</code>' character. For example, the <code id="P700049702700000000000000003E4F4" data-uri="chapter01.xhtml#P700049702700000000000000003E4F4" class="pcalibre1 calibre1 pcalibre2">#include &lt;stdio.h&gt;</code> command in line 1 of <code id="P700049702700000000000000003E4F5" data-uri="chapter01.xhtml#P700049702700000000000000003E4F5" class="pcalibre1 calibre1 pcalibre2">hello.c</code> tells the preprocessor to read the contents of the system header file <code id="P700049702700000000000000003E4F6" data-uri="chapter01.xhtml#P700049702700000000000000003E4F6" class="pcalibre1 calibre1 pcalibre2">stdio.h</code> and insert it directly into the program text. The result is another C program, typically with the <code id="P700049702700000000000000003E4F7" data-uri="chapter01.xhtml#P700049702700000000000000003E4F7" class="pcalibre1 calibre1 pcalibre2">.i</code> suffix.</p></li>
<li id="P700049702700000000000000003E4F8" data-uri="chapter01.xhtml#P700049702700000000000000003E4F8" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E4F9" data-uri="chapter01.xhtml#P700049702700000000000000003E4F9" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre2 pcalibre41">Compilation phase. </span>The compiler (<code id="P700049702700000000000000003E4FA" data-uri="chapter01.xhtml#P700049702700000000000000003E4FA" class="pcalibre1 calibre1 pcalibre2">cc1</code>) translates the text file <code id="P700049702700000000000000003E4FB" data-uri="chapter01.xhtml#P700049702700000000000000003E4FB" class="pcalibre1 calibre1 pcalibre2">hello.i</code> into the text file <code id="P700049702700000000000000003E4FC" data-uri="chapter01.xhtml#P700049702700000000000000003E4FC" class="pcalibre1 calibre1 pcalibre2">hello.s</code>, which contains an <i class="pcalibre17 pcalibre2 pcalibre1">assembly-language program</i>. This program includes the following definition of <code id="P700049702700000000000000003E4FD" data-uri="chapter01.xhtml#P700049702700000000000000003E4FD" class="pcalibre1 calibre1 pcalibre2">function main</code>:</p>
<pre id="P700049702700000000000000003E4FE" data-uri="chapter01.xhtml#P700049702700000000000000003E4FE" class="calibre2 pcalibre2 pcalibre1"><code id="P700049702700000000000000003E4FF" data-uri="chapter01.xhtml#P700049702700000000000000003E4FF" class="calibre3 pcalibre1 pcalibre2">
1	main:	
2	  subq		$8, %rsp
3	  movl		$.LCO, %edi
4	  call		puts
5	  movl		$0, %eax
6	  addq		$8, %rsp
7	  ret	
</code></pre>
<p id="P700049702700000000000000003E500" data-uri="chapter01.xhtml#P700049702700000000000000003E500" class="pcalibre1 pcalibre2 pcalibre10">Each of lines 2-7 in this definition describes one low-level machine-language instruction in a textual form. Assembly language is useful because it provides a common output language for different compilers for different high-level languages. For example, C compilers and Fortran compilers both generate output files in the same assembly language.</p></li>
<li id="P700049702700000000000000003E501" data-uri="chapter01.xhtml#P700049702700000000000000003E501" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E502" data-uri="chapter01.xhtml#P700049702700000000000000003E502" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre2 pcalibre41">Assembly phase. </span>Next, the assembler (<code id="P700049702700000000000000003E503" data-uri="chapter01.xhtml#P700049702700000000000000003E503" class="pcalibre1 calibre1 pcalibre2">as</code>) translates <code id="P700049702700000000000000003E504" data-uri="chapter01.xhtml#P700049702700000000000000003E504" class="pcalibre1 calibre1 pcalibre2">hello.s</code> into machine-language instructions, packages them in a form known as a <i class="pcalibre17 pcalibre2 pcalibre1">relocatable object program</i>, and stores the result in the object file <code id="P700049702700000000000000003E505" data-uri="chapter01.xhtml#P700049702700000000000000003E505" class="pcalibre1 calibre1 pcalibre2">hello.o.</code> This file is a binary file containing 17 bytes to encode the instructions for function main. If we were to view <code id="P700049702700000000000000003E506" data-uri="chapter01.xhtml#P700049702700000000000000003E506" class="pcalibre1 calibre1 pcalibre2">hello.o</code> with a text editor, it would appear to be gibberish.</p>
<aside class="pcalibre31 pcalibre32 pcalibre2" id="P70004970270000000000000000000FF" data-uri="chapter01.xhtml#P70004970270000000000000000000FF"><header class="pcalibre1 pcalibre2 pcalibre3"><h1 class="pcalibre1 pcalibre2 pcalibre33" id="P700049702700000000000000003E507" data-uri="chapter01.xhtml#P700049702700000000000000003E507" epub:type="title"><span class="pcalibre1 pcalibre2 pcalibre5" id="P7000497027000000000000000000101" title="6" data-uri="chapter01.xhtml#P7000497027000000000000000000101" epub:type="pagebreak"></span><span class="pcalibre1 pcalibre2 pcalibre34">Aside </span>The GNU project</h1></header>
<p id="P700049702700000000000000003E508" data-uri="chapter01.xhtml#P700049702700000000000000003E508" class="pcalibre1 pcalibre2 pcalibre10">G<span class="pcalibre1 pcalibre29 pcalibre2">cc </span>is one of many useful tools developed by the GNU (short for GNU's Not Unix) project. The GNU project is a tax-exempt charity started by Richard Stallman in 1984, with the ambitious goal of developing a complete Unix-like system whose source code is unencumbered by restrictions on how it can be modified or distributed. The GNU project has developed an environment with all the major components of a Unix operating system, except for the kernel, which was developed separately by the Linux project. The GNU environment includes the <span class="pcalibre1 pcalibre29 pcalibre2">emacs </span>editor, <span class="pcalibre1 pcalibre29 pcalibre2">gcc </span>compiler, <span class="pcalibre1 pcalibre29 pcalibre2">gdb </span>debugger, assembler, linker, utilities for manipulating binaries, and other components. The <span class="pcalibre1 pcalibre29 pcalibre2">gcc </span>compiler has grown to support many different languages, with the ability to generate code for many different machines. Supported languages include C, C++, Fortran, Java, Pascal, Objective-C, and Ada.</p>
<p id="P700049702700000000000000003E509" data-uri="chapter01.xhtml#P700049702700000000000000003E509" class="pcalibre1 pcalibre2 pcalibre63">The GNU project is a remarkable achievement, and yet it is often overlooked. The modern open-source movement (commonly associated with Linux) owes its intellectual origins to the GNU project's notion of <i class="pcalibre17 pcalibre2 pcalibre1">free software</i> ("free" as in "free speech," not "free beer"). Further, Linux owes much of its popularity to the GNU tools, which provide the environment for the Linux kernel.</p>
</aside></li>
<li id="P700049702700000000000000003E50A" data-uri="chapter01.xhtml#P700049702700000000000000003E50A" class="pcalibre39 pcalibre2 pcalibre1"><p id="P700049702700000000000000003E50B" data-uri="chapter01.xhtml#P700049702700000000000000003E50B" class="pcalibre1 pcalibre2 pcalibre10"><span class="pcalibre1 pcalibre2 pcalibre41">Linking phase. </span>Notice Notice that our <code id="P700049702700000000000000003E50C" data-uri="chapter01.xhtml#P700049702700000000000000003E50C" class="pcalibre1 calibre1 pcalibre2">hello</code> program calls the <code id="P700049702700000000000000003E50D" data-uri="chapter01.xhtml#P700049702700000000000000003E50D" class="pcalibre1 calibre1 pcalibre2">printf</code> function, which is part of the <i class="pcalibre17 pcalibre2 pcalibre1">standard C library</i> provided by every C compiler. The <code id="P700049702700000000000000003E50E" data-uri="chapter01.xhtml#P700049702700000000000000003E50E" class="pcalibre1 calibre1 pcalibre2">printf</code> function resides in a separate precompiled object file called <code id="P700049702700000000000000003E50F" data-uri="chapter01.xhtml#P700049702700000000000000003E50F" class="pcalibre1 calibre1 pcalibre2">printf.o</code>, which must somehow be merged with our <code id="P700049702700000000000000003E510" data-uri="chapter01.xhtml#P700049702700000000000000003E510" class="pcalibre1 calibre1 pcalibre2">hello.o</code> program. The linker (<code id="P700049702700000000000000003E511" data-uri="chapter01.xhtml#P700049702700000000000000003E511" class="pcalibre1 calibre1 pcalibre2">ld</code>) handles this merging. The result is the <code id="P700049702700000000000000003E512" data-uri="chapter01.xhtml#P700049702700000000000000003E512" class="pcalibre1 calibre1 pcalibre2">hello</code> file, which is an executable object file (or simply <i class="pcalibre17 pcalibre2 pcalibre1">executable</i>) that is ready to be loaded into memory and executed by the system.</p></li>
</ul>
</section></body></html>
